(function(){"use strict";var e={1604:function(e,t,o){var a=o(5102),l=o(9269);const s={key:0,class:"center-container"};function n(e,t,o,a,n,r){const i=(0,l.up)("ParticlesAnimated"),c=(0,l.up)("font-awesome-icon"),u=(0,l.up)("q-toolbar-title"),d=(0,l.up)("q-toolbar"),m=(0,l.up)("NavBar"),p=(0,l.up)("q-header"),f=(0,l.up)("q-btn"),h=(0,l.up)("router-link"),w=(0,l.up)("router-view"),g=(0,l.up)("UserHelper"),_=(0,l.up)("ContactForm"),y=(0,l.up)("q-page"),v=(0,l.up)("q-page-container"),b=(0,l.up)("FooterBar"),k=(0,l.up)("q-footer"),W=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(i),(0,l.Wm)(W,{view:"lHh Lpr lFf"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"q-mt-sm q-ml-sm",style:{position:"fixed",top:"0",left:"0",right:"0","z-index":"1000"}},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(c,{icon:"fa-solid fa-mortar-pestle",size:"xl",color:"#ffb74d"})]),(0,l.Wm)(u,{class:"text-cyan-4",style:{"max-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("PPH")])),_:1})])),_:1}),e.isLoggedIn?((0,l.wg)(),(0,l.j4)(p,{key:0,style:{"z-index":"6000"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[r.shouldDisplayButton?((0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(h,{to:"/login"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{outline:"",size:"xxl",color:"cyan-4",class:"hover-effect",icon:"start"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Start")])),_:1})])),_:1})])):(0,l.kq)("",!0),(0,l.Wm)(w),e.isLoggedIn?((0,l.wg)(),(0,l.j4)(g,{key:1})):(0,l.kq)("",!0),(0,l.Wm)(_)])),_:1})])),_:1}),e.isLoggedIn?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(k,{key:1,style:{"z-index":"6000"}},{default:(0,l.w5)((()=>[(0,l.Wm)(b)])),_:1}))])),_:1})],64)}const r=(0,l._)("div",{id:"particles-js"},null,-1),i=[r];function c(e,t,o,a,s,n){return(0,l.wg)(),(0,l.iD)("div",null,i)}var u=o(6957);o(6641);const d=window.particlesJS;var m={name:"ParticlesAnimated",computed:{...(0,u.rn)("auth",["isLoggedIn"])},watch:{isLoggedIn:"loadParticlesConfig"},mounted(){this.loadParticlesConfig()},methods:{loadParticlesConfig(){const e=this.isLoggedIn?"/particlesjs-config.json":"/guest-particlesjs-config.json";d.load("particles-js",e,(function(){console.log("Particles.js config loaded")}))}}},p=o(7617);const f=(0,p.Z)(m,[["render",c]]);var h=f;function w(e,t,o,a,s,n){const r=(0,l.up)("font-awesome-icon"),i=(0,l.up)("router-link"),c=(0,l.up)("q-toolbar-title"),u=(0,l.up)("FichierBtn"),d=(0,l.up)("PlanificationBtn"),m=(0,l.up)("FabricationBtn"),p=(0,l.up)("TracabiliteBtn"),f=(0,l.up)("GestionBtn"),h=(0,l.up)("q-btn-group"),w=(0,l.up)("q-space"),g=(0,l.up)("q-btn"),_=(0,l.up)("q-toolbar");return(0,l.wg)(),(0,l.j4)(_,{class:"q-pa-md row",style:{"background-color":"#1a2946 !important",opacity:"0.8 !important"}},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/home/"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{icon:"fa-solid fa-mortar-pestle","beat-fade":"",size:"xl",color:n.tokenColor},null,8,["color"])])),_:1}),(0,l.Wm)(c,{class:"text-cyan-4",style:{"max-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("PPH")])),_:1}),(0,l.Wm)(h,{flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u),(0,l.Wm)(d),(0,l.Wm)(m),(0,l.Wm)(p),(0,l.Wm)(f)])),_:1}),(0,l.Wm)(w),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{flat:"",size:"sm",color:"cyan-4",onClick:e.toggleFullscreen,icon:"minimize"},null,8,["onClick"]),(0,l.Wm)(g,{flat:"",size:"sm",color:"cyan-4",onClick:e.toggleFullscreen,icon:"crop_square"},null,8,["onClick"]),e.isLoggedIn?((0,l.wg)(),(0,l.j4)(g,{key:0,flat:"",size:"sm",color:"orange-4",onClick:e.logout,icon:"logout"},null,8,["onClick"])):(0,l.kq)("",!0),e.isLoggedIn?((0,l.wg)(),(0,l.j4)(g,{key:1,flat:"",size:"sm",color:"red-4",onClick:e.close,icon:"close"},null,8,["onClick"])):(0,l.kq)("",!0)])),_:1})])),_:1})}var g=o(3201);function _(e,t,o,a,s,n){const r=(0,l.up)("q-item-section"),i=(0,l.up)("router-link"),c=(0,l.up)("q-item"),u=(0,l.up)("q-separator"),d=(0,l.up)("q-icon"),m=(0,l.up)("q-list"),p=(0,l.up)("q-menu"),f=(0,l.up)("q-btn"),h=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(f,{class:(0,g.C_)({"text-cyan-1":!s.menuOpen,"text-cyan-4":s.menuOpen,"hover-effect":!0}),flat:"",label:"Fichier"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{"transition-show":"jump-down","transition-hide":"jump-up",onShow:t[2]||(t[2]=e=>s.menuOpen=!0),onHide:n.resetMenu},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"bg-blue-grey-4",dense:"",style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"pph-link",to:"/user-account/"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Mon compte")])),_:1})])),_:1})])),_:1})),[[h]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"pph-link",to:"/users/"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Utilisateurs")])),_:1})])),_:1})])),_:1})),[[h]]),(0,l.Wm)(u),(0,l.Wm)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:(0,g.C_)({"text-cyan-1":!s.submenuOpen,"text-cyan-4":s.submenuOpen,"hover-effect":!0})},{default:(0,l.w5)((()=>[(0,l.Uk)("Paramètres")])),_:1},8,["class"]),(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"keyboard_arrow_right"})])),_:1}),(0,l.Wm)(p,{anchor:"top end",self:"top start",onShow:t[0]||(t[0]=e=>s.submenuOpen=!0),onHide:t[1]||(t[1]=e=>s.submenuOpen=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"bg-blue-grey-3"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect-2"},{default:(0,l.w5)((()=>[(0,l.Uk)("Etablissement")])),_:1})])),_:1})),[[h]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect-2"},{default:(0,l.w5)((()=>[(0,l.Uk)("Utilisateurs")])),_:1})])),_:1})),[[h]])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(u),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{class:"logout",clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"logout-text text-red-5"},{default:(0,l.w5)((()=>[(0,l.Uk)("Fermer")])),_:1})])),_:1})),[[h]])])),_:1})])),_:1},8,["onHide"])])),_:1},8,["class"])])}var y={name:"FichierBtn",data(){return{menuOpen:!1,submenuOpen:!1}},methods:{resetMenu(){this.menuOpen=!1,this.submenuOpen=!1}}},v=o(4686),b=o(6375),k=o(2146),W=o(5246),C=o(2278),x=o(4492),q=o(4633),S=o(8819),M=o(1410),U=o.n(M);const F=(0,p.Z)(y,[["render",_]]);var I=F;function V(e,t,o,a,s,n){const r=(0,l.up)("q-item-section"),i=(0,l.up)("q-item"),c=(0,l.up)("q-list"),u=(0,l.up)("q-menu"),d=(0,l.up)("q-btn"),m=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(d,{class:(0,g.C_)({"text-cyan-1":!s.menuOpen,"text-cyan-4":s.menuOpen,"hover-effect":!0}),flat:"",label:"Planification"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{"transition-show":"jump-down","transition-hide":"jump-up",onShow:t[0]||(t[0]=e=>s.menuOpen=!0),onHide:t[1]||(t[1]=e=>s.menuOpen=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-blue-grey-4",dense:"",style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(i,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Nouvelle demande")])),_:1})])),_:1})),[[m]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(i,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Demandes en attente")])),_:1})])),_:1})),[[m]])])),_:1})])),_:1})])),_:1},8,["class"])])}U()(y,"components",{QBtn:v.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z,QSeparator:x.Z,QIcon:q.Z}),U()(y,"directives",{ClosePopup:S.Z});var P={name:"PlanificationBtn",data(){return{menuOpen:!1}}};const E=(0,p.Z)(P,[["render",V]]);var L=E;function Q(e,t,o,a,s,n){const r=(0,l.up)("q-item-section"),i=(0,l.up)("q-item"),c=(0,l.up)("q-list"),u=(0,l.up)("q-menu"),d=(0,l.up)("q-btn"),m=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(d,{class:(0,g.C_)({"text-cyan-1":!s.menuOpen,"text-cyan-4":s.menuOpen,"hover-effect":!0}),flat:"",label:"Fabrication"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{"transition-show":"jump-down","transition-hide":"jump-up",onShow:t[0]||(t[0]=e=>s.menuOpen=!0),onHide:t[1]||(t[1]=e=>s.menuOpen=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-blue-grey-4",dense:"",style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(i,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Nouvelle fiche de fabrication")])),_:1})])),_:1})),[[m]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(i,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Contrôles en attente")])),_:1})])),_:1})),[[m]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(i,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Réattribution")])),_:1})])),_:1})),[[m]])])),_:1})])),_:1})])),_:1},8,["class"])])}U()(P,"components",{QBtn:v.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z}),U()(P,"directives",{ClosePopup:S.Z});var j={name:"FabricationBtn",data(){return{menuOpen:!1}}};const T=(0,p.Z)(j,[["render",Q]]);var D=T;function Z(e,t,o,a,s,n){const r=(0,l.up)("q-item-section"),i=(0,l.up)("q-icon"),c=(0,l.up)("q-item"),u=(0,l.up)("q-list"),d=(0,l.up)("q-menu"),m=(0,l.up)("q-btn"),p=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(m,{class:(0,g.C_)({"text-cyan-1":!s.menuOpen,"text-cyan-4":s.menuOpen,"hover-effect":!0}),flat:"",label:"Tracabilite"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{"transition-show":"jump-down","transition-hide":"jump-up",onShow:t[4]||(t[4]=e=>s.menuOpen=!0),onHide:n.resetMenu},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"bg-blue-grey-4",dense:"",style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:(0,g.C_)({"text-cyan-1":!s.submenuOpen,"text-cyan-4":s.submenuOpen,"hover-effect":!0})},{default:(0,l.w5)((()=>[(0,l.Uk)("Certificats d'analyse")])),_:1},8,["class"]),(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"keyboard_arrow_right"})])),_:1}),(0,l.Wm)(d,{anchor:"top end",self:"top start",onShow:t[0]||(t[0]=e=>s.submenuOpen=!0),onHide:t[1]||(t[1]=e=>s.submenuOpen=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"bg-blue-grey-3"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect-2"},{default:(0,l.w5)((()=>[(0,l.Uk)("Télécharger")])),_:1})])),_:1})),[[p]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect-2"},{default:(0,l.w5)((()=>[(0,l.Uk)("Rechercher")])),_:1})])),_:1})),[[p]])])),_:1})])),_:1})])),_:1}),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Ordonnancier")])),_:1})])),_:1})),[[p]]),(0,l.Wm)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:(0,g.C_)({"text-cyan-1":!s.submenuOpen2,"text-cyan-4":s.submenuOpen2,"hover-effect":!0})},{default:(0,l.w5)((()=>[(0,l.Uk)("Historiques")])),_:1},8,["class"]),(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"keyboard_arrow_right"})])),_:1}),(0,l.Wm)(d,{anchor:"top end",self:"top start",onShow:t[2]||(t[2]=e=>s.submenuOpen2=!0),onHide:t[3]||(t[3]=e=>s.submenuOpen2=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"bg-blue-grey-3"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect-2"},{default:(0,l.w5)((()=>[(0,l.Uk)("Patient")])),_:1})])),_:1})),[[p]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect-2"},{default:(0,l.w5)((()=>[(0,l.Uk)("Matière première")])),_:1})])),_:1})),[[p]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect-2"},{default:(0,l.w5)((()=>[(0,l.Uk)("Préparation")])),_:1})])),_:1})),[[p]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["onHide"])])),_:1},8,["class"])])}U()(j,"components",{QBtn:v.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z}),U()(j,"directives",{ClosePopup:S.Z});var N={name:"TracabiliteBtn",data(){return{menuOpen:!1,submenuOpen:!1,submenuOpen2:!1}},methods:{resetMenu(){this.menuOpen=!1,this.submenuOpen=!1,this.submenuOpen2=!1}}};const z=(0,p.Z)(N,[["render",Z]]);var R=z;function O(e,t,o,a,s,n){const r=(0,l.up)("q-item-section"),i=(0,l.up)("router-link"),c=(0,l.up)("q-item"),u=(0,l.up)("q-icon"),d=(0,l.up)("q-list"),m=(0,l.up)("q-menu"),p=(0,l.up)("q-btn"),f=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(p,{class:(0,g.C_)({"text-cyan-1":!s.menuOpen,"text-cyan-4":s.menuOpen,"hover-effect":!0}),flat:"",label:"Gestion"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{"transition-show":"jump-down","transition-hide":"jump-up",onShow:t[10]||(t[10]=e=>s.menuOpen=!0),onHide:n.resetMenu},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-blue-grey-4",dense:"",style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/suppliers/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Fournisseurs")])),_:1})])),_:1})])),_:1})),[[f]]),(0,l.Wm)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:(0,g.C_)({"text-cyan-1":!s.submenuOpen,"text-cyan-4":s.submenuOpen,"hover-effect":!0})},{default:(0,l.w5)((()=>[(0,l.Uk)("Mat.premières")])),_:1},8,["class"]),(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"keyboard_arrow_right"})])),_:1}),(0,l.Wm)(m,{anchor:"top end",self:"top start",onShow:t[0]||(t[0]=e=>s.submenuOpen=!0),onHide:t[1]||(t[1]=e=>s.submenuOpen=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-blue-grey-3"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/creation-matiere-premiere/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Créer")])),_:1})])),_:1})])),_:1})),[[f]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/matieres-premieres/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Préparatoire")])),_:1})])),_:1})])),_:1})),[[f]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/catalogue/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Catalogue")])),_:1})])),_:1})])),_:1})),[[f]])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:(0,g.C_)({"text-cyan-1":!s.submenuOpen2,"text-cyan-4":s.submenuOpen2,"hover-effect":!0})},{default:(0,l.w5)((()=>[(0,l.Uk)("Formules")])),_:1},8,["class"]),(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"keyboard_arrow_right"})])),_:1}),(0,l.Wm)(m,{anchor:"top end",self:"top start",onShow:t[2]||(t[2]=e=>s.submenuOpen2=!0),onHide:t[3]||(t[3]=e=>s.submenuOpen2=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-blue-grey-3"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/nouvelle-formule/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Nouvelle formule")])),_:1})])),_:1})])),_:1})),[[f]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/formules/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Formules")])),_:1})])),_:1})])),_:1})),[[f]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Cloud")])),_:1})])),_:1})),[[f]])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:(0,g.C_)({"text-cyan-1":!s.submenuOpen4,"text-cyan-4":s.submenuOpen4,"hover-effect":!0})},{default:(0,l.w5)((()=>[(0,l.Uk)("Stock")])),_:1},8,["class"]),(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"keyboard_arrow_right"})])),_:1}),(0,l.Wm)(m,{anchor:"top end",self:"top start",onShow:t[4]||(t[4]=e=>s.submenuOpen4=!0),onHide:t[5]||(t[5]=e=>s.submenuOpen4=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-blue-grey-3"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/commande/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Commandes")])),_:1})])),_:1})])),_:1})),[[f]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/reception/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Livraisons")])),_:1})])),_:1})])),_:1})),[[f]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/reception/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Historique des livraisons")])),_:1})])),_:1})])),_:1})),[[f]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{to:"/reception/",class:"pph-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Inventaire")])),_:1})])),_:1})])),_:1})),[[f]])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:(0,g.C_)({"text-cyan-1":!s.submenuOpen5,"text-cyan-4":s.submenuOpen5,"hover-effect":!0})},{default:(0,l.w5)((()=>[(0,l.Uk)("Statistiques")])),_:1},8,["class"]),(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"keyboard_arrow_right"})])),_:1}),(0,l.Wm)(m,{anchor:"top end",self:"top start",onShow:t[6]||(t[6]=e=>s.submenuOpen5=!0),onHide:t[7]||(t[7]=e=>s.submenuOpen5=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-blue-grey-3"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Bilan")])),_:1})])),_:1})),[[f]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Requêtes")])),_:1})])),_:1})),[[f]])])),_:1})])),_:1})])),_:1}),(0,l.Wm)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:(0,g.C_)({"text-cyan-1":!s.submenuOpen6,"text-cyan-4":s.submenuOpen6,"hover-effect":!0})},{default:(0,l.w5)((()=>[(0,l.Uk)("Tarification")])),_:1},8,["class"]),(0,l.Wm)(r,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"keyboard_arrow_right"})])),_:1}),(0,l.Wm)(m,{anchor:"top end",self:"top start",onShow:t[8]||(t[8]=e=>s.submenuOpen6=!0),onHide:t[9]||(t[9]=e=>s.submenuOpen6=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-blue-grey-3"},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Paramètres")])),_:1})])),_:1})),[[f]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(c,{clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"text-cyan-1 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Générer facture")])),_:1})])),_:1})),[[f]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["onHide"])])),_:1},8,["class"])])}U()(N,"components",{QBtn:v.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z,QIcon:q.Z}),U()(N,"directives",{ClosePopup:S.Z});var A={name:"GestionBtn",data(){return{menuOpen:!1,submenuOpen:!1,submenuOpen2:!1,submenuOpen3:!1,submenuOpen4:!1,submenuOpen5:!1,submenuOpen6:!1}},methods:{resetMenu(){this.menuOpen=!1,this.submenuOpen=!1,this.submenuOpen2=!1,this.submenuOpen3=!1,this.submenuOpen4=!1,this.submenuOpen5=!1,this.submenuOpen6=!1}}};const B=(0,p.Z)(A,[["render",O]]);var $=B;U()(A,"components",{QBtn:v.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z,QIcon:q.Z}),U()(A,"directives",{ClosePopup:S.Z});var H={components:{FichierBtn:I,PlanificationBtn:L,FabricationBtn:D,TracabiliteBtn:R,GestionBtn:$},computed:{...(0,u.rn)("screen",["isFullscreen"]),...(0,u.rn)("auth",["isLoggedIn"]),...(0,u.rn)("auth",["tokenStatus"]),tokenColor(){switch(this.tokenStatus){case"valid":default:return"#81c784";case"nearExpiry":return"#ffb74d";case"nearInvalid":return"#e57373"}}},methods:{...(0,u.nv)("auth",["logout"]),...(0,u.nv)("screen",["toggleFullscreen"])}},G=o(366),Y=o(8623),K=o(8712),J=o(3139);const X=(0,p.Z)(H,[["render",w]]);var ee=X;U()(H,"components",{QToolbar:G.Z,QToolbarTitle:Y.Z,QBtnGroup:K.Z,QSpace:J.Z,QBtn:v.Z});const te=e=>((0,l.dD)("data-v-648e772e"),e=e(),(0,l.Cn)(),e),oe={class:"row justify-center"},ae={class:"justify-center"},le=te((()=>(0,l._)("div",{color:"cyan-1",class:"q-mx-sm inline-block"},"|",-1))),se=te((()=>(0,l._)("div",{color:"cyan-1",class:"q-mx-sm inline-block"},"|",-1))),ne=te((()=>(0,l._)("div",{color:"cyan-1",class:"q-mx-sm inline-block"},"|",-1)));function re(e,t,o,a,s,n){const r=(0,l.up)("router-link"),i=(0,l.up)("q-footer");return(0,l.wg)(),(0,l.j4)(i,{class:"bg-blue-grey-3"},{default:(0,l.w5)((()=>[(0,l._)("div",oe,[(0,l._)("div",ae,[(0,l.Wm)(r,{to:"cgu/",class:"hover-effect pph-link text-cyan-1"},{default:(0,l.w5)((()=>[(0,l.Uk)("CGU")])),_:1}),le,(0,l.Wm)(r,{to:"mentions/",class:"hover-effect pph-link text-cyan-1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Mentions légales")])),_:1}),se,(0,l.Wm)(r,{to:"cookies/",class:"hover-effect pph-link text-cyan-1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Politique cookies")])),_:1}),ne,(0,l.Wm)(r,{to:"confidential/",class:"hover-effect pph-link text-cyan-1"},{default:(0,l.w5)((()=>[(0,l.Uk)("Politique de confidentialité")])),_:1})])])])),_:1})}var ie={name:"FooterBar"},ce=o(830);const ue=(0,p.Z)(ie,[["render",re],["__scopeId","data-v-648e772e"]]);var de=ue;function me(e,t,o,a,s,n){const r=(0,l.up)("q-fab-action"),i=(0,l.up)("q-fab");return(0,l.wg)(),(0,l.j4)(i,{glossy:"",class:"btn-grey-primary-pph",icon:"help",direction:"left"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{glossy:"",class:"btn-grey-primary-pph",onClick:n.toggleForm,icon:"contact_support"},null,8,["onClick"]),(0,l.Wm)(r,{glossy:"",class:"btn-grey-primary-pph",onClick:n.onClick,icon:"play_lesson"},null,8,["onClick"])])),_:1})}U()(ie,"components",{QFooter:ce.Z});var pe={name:"UserHelper",computed:{...(0,u.rn)("contact",["showForm"])},methods:{toggleForm(){this.$store.commit("contact/SET_SHOW_FORM",!this.showForm)},onClick(){}}},fe=o(9917),he=o(118);const we=(0,p.Z)(pe,[["render",me],["__scopeId","data-v-081954a6"]]);var ge=we;U()(pe,"components",{QFab:fe.Z,QFabAction:he.Z});const _e=e=>((0,l.dD)("data-v-57efc496"),e=e(),(0,l.Cn)(),e),ye=_e((()=>(0,l._)("span",{class:"text-cyan-4"},"Contactez-nous !",-1))),ve={class:"row justify-center"};function be(e,t,o,a,s,n){const r=(0,l.up)("q-toolbar-title"),i=(0,l.up)("q-btn"),c=(0,l.up)("q-toolbar"),u=(0,l.up)("CustomTextarea"),d=(0,l.up)("q-form"),m=(0,l.up)("q-card-section"),p=(0,l.up)("q-card"),f=(0,l.up)("q-dialog"),h=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(f,{modelValue:n.showForm,"onUpdate:modelValue":t[1]||(t[1]=e=>n.showForm=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[ye])),_:1}),(0,l.wy)((0,l.Wm)(i,{flat:"",round:"",icon:"close",class:"hover-effect"},null,512),[[h]])])),_:1}),(0,l.Wm)(m,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{onSubmit:n.submitForm},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{textareaModel:n.message,"onUpdate:textareaModel":t[0]||(t[0]=e=>n.message=e),label:"Message",textareaRef:"messageTextarea",iconName:"message",modelName:"message",required:""},null,8,["textareaModel"]),(0,l._)("div",ve,[(0,l.Wm)(i,{glossy:"",rounded:"",class:"btn-grey-success-pph q-my-sm",icon:"send",type:"submit"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}function ke(e,t,o,a,s,n){const r=(0,l.up)("q-icon"),i=(0,l.up)("q-input");return(0,l.wg)(),(0,l.j4)(i,{type:"textarea",class:"my-0",value:o.textareaModel,onInput:t[0]||(t[0]=e=>n.updateValue(e)),ref:o.textareaRef,label:o.label,color:"cyan-4",onMouseover:t[1]||(t[1]=e=>n.changeLabelColor(o.textareaRef,o.hoverColor)),onMouseleave:t[2]||(t[2]=e=>n.changeLabelColor(o.textareaRef,"")),onFocus:t[3]||(t[3]=e=>n.onFocus(o.modelName,o.focusColor)),onBlur:t[4]||(t[4]=e=>n.onBlur(o.modelName))},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:o.iconName,color:"cyan-4"},null,8,["name"])])),_:1},8,["value","label"])}var We={props:{textareaModel:{type:String,required:!0},label:{type:String,required:!0},textareaRef:{type:String,required:!0},iconName:{type:String,required:!0},modelName:{type:String,required:!0},hoverColor:{type:String,default:"#ffb74d"},focusColor:{type:String,default:"#4dd0e1"}},methods:{updateValue(e){this.$emit("update:textareaModel",e)},changeLabelColor(e,t){this.$refs[e].$el.querySelector(".q-field__label").style.color=t},onFocus(){this.isFocused=!0,this.$emit("update:focused",!0)},onBlur(){this.isFocused=!1,this.$emit("update:focused",!1)}}},Ce=o(6053),xe=o(4553);const qe=(0,p.Z)(We,[["render",ke]]);var Se=qe;U()(We,"components",{QInput:Ce.Z,QIcon:q.Z,QField:xe.Z});var Me={components:{CustomTextarea:Se},computed:{...(0,u.rn)("contact",["contactData"]),...(0,u.Se)("auth",["user"]),message:{get(){return this.contactData.message},set(e){this.$store.commit("contact/SET_CONTACT_DATA",{...this.contactData,message:e})}},showForm:{get(){return this.$store.state.contact.showForm},set(e){this.$store.commit("contact/SET_SHOW_FORM",e)}}},methods:{...(0,u.nv)("contact",["submitContactForm"]),async submitForm(){let e={name:this.user.firstName+" "+this.user.lastName,email:this.user.email,message:this.message};await this.submitContactForm(e)}}},Ue=o(7810),Fe=o(8055),Ie=o(9501),Ve=o(3276);const Pe=(0,p.Z)(Me,[["render",be],["__scopeId","data-v-57efc496"]]);var Ee=Pe;U()(Me,"components",{QDialog:Ue.Z,QCard:Fe.Z,QToolbar:G.Z,QToolbarTitle:Y.Z,QBtn:v.Z,QCardSection:Ie.Z,QForm:Ve.Z}),U()(Me,"directives",{ClosePopup:S.Z});var Le={name:"App",data(){return{interval:null,intentionalLogout:!1}},components:{ParticlesAnimated:h,NavBar:ee,FooterBar:de,UserHelper:ge,ContactForm:Ee},computed:{...(0,u.rn)("auth",["isLoggedIn"]),shouldDisplayButton(){return"/"===this.$route.path}},methods:{handleFullscreenChange(){document.fullscreenElement?this.$store.commit("screen/SET_FULLSCREEN",!0):this.$store.commit("screen/SET_FULLSCREEN",!1)},...(0,u.nv)("auth",["checkAuthentication"])},created(){this.isLoggedIn&&(this.checkAuthentication(),this.interval=setInterval(this.checkAuthentication,6e4))},watch:{isLoggedIn(e){e&&!this.interval?this.interval=setInterval(this.checkAuthentication,6e4):!e&&this.interval&&(clearInterval(this.interval),this.interval=null)}},mounted(){document.addEventListener("fullscreenchange",this.handleFullscreenChange)},beforeUnmount(){document.removeEventListener("fullscreenchange",this.handleFullscreenChange),clearInterval(this.interval)}},Qe=o(6384),je=o(7454),Te=o(6974),De=o(8906);const Ze=(0,p.Z)(Le,[["render",n]]);var Ne=Ze;U()(Le,"components",{QLayout:Qe.Z,QToolbar:G.Z,QToolbarTitle:Y.Z,QHeader:je.Z,QPageContainer:Te.Z,QPage:De.Z,QBtn:v.Z,QFooter:ce.Z});var ze=o(2201),Re=(o(121),o(4328)),Oe=o(3785),Ae=o.n(Oe);let Be;Be="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:8000":"https://pph-backend-4f4fd8d99c88.herokuapp.com/";const $e=Re.Z.create({baseURL:Be,withCredentials:!0}),He=()=>{const e=document.cookie.split("; ").find((e=>e.startsWith("refresh_token")));return e?e.split("=")[1]:null},Ge=(e,t,o)=>{var a="";if(o){var l=new Date;l.setTime(l.getTime()+24*o*60*60*1e3),a="; expires="+l.toUTCString()}document.cookie=e+"="+(t||"")+a+"; path=/"},Ye=()=>{Ge("access_token","",-1),Ge("refresh_token","",-1)},Ke=async e=>{try{const t=await $e.post("/api/token/refresh/",{refresh:e});if(t.data&&t.data.access)return document.cookie=`access_token=${t.data.access}`,t.data.access}catch(t){return null}};$e.interceptors.response.use((e=>e),(async e=>{if(e.response&&401===e.response.status){const t=e.config,o=He();if(!t._retry&&o){t._retry=!0;const e=await Ke(o);if(e)return t.headers["Authorization"]=`Bearer ${e}`,$e(t)}Ye()}return Promise.reject(e)})),$e.interceptors.request.use((e=>e.data&&e.data.isTrusted?new Promise((()=>{})):e)),$e.getUserData=function(){return this.get("PPH/current_user/")},$e.interceptors.request.use((e=>(Ae().start(),e))),$e.interceptors.response.use((e=>(Ae().done(),e)),(e=>(Ae().done(),Promise.reject(e))));var Je=$e;const Xe=()=>({suppliers:[],showMenu:{},expanded:{},currentSupplier:null}),et={allSuppliers:e=>e.suppliers,showMenu:e=>e.showMenu,expanded:e=>e.expanded,currentSupplier:e=>e.currentSupplier},tt={async addSupplier({dispatch:e},t){try{return await Je.post("PPH/suppliers/",t),e("notifications/showNotification",{message:"Fournisseur ajouté avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(o){return e("notifications/showNotification",{message:"Erreur lors de l'ajout du fournisseur",type:"error"},{root:!0}),Promise.reject(o)}},async fetchSupplierById(e){try{const t=await Je.get(`PPH/suppliers/${e}`);return t}catch(t){throw console.error("Erreur lors de la récupération du fournisseur:",t),t}},async loadSuppliers({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/suppliers");e("SET_SUPPLIERS",t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des fournisseurs",type:"error"},{root:!0}),console.error(o)}},async toggleActivation({dispatch:e},t){const{supplierId:o,isActive:a}=t;try{a?(await Je.patch(`/PPH/suppliers/${o}/`,{is_activate:!1}),e("notifications/showNotification",{message:"Fournisseur désactivé",type:"success"},{root:!0})):(await Je.patch(`/PPH/suppliers/${o}/`,{is_activate:!0}),e("notifications/showNotification",{message:"Fournisseur activé",type:"success"},{root:!0})),e("loadSuppliers")}catch(l){e("notifications/showNotification",{message:"Erreur lors du changement d'état",type:"error"},{root:!0}),console.error(l)}},async deleteSupplier({dispatch:e},t){try{await Je.delete(`/PPH/suppliers/${t}`),e("notifications/showNotification",{message:"Fournisseur supprimé",type:"success"},{root:!0}),e("loadSuppliers")}catch(o){e("notifications/showNotification",{message:"Erreur lors de la suppression",type:"error"},{root:!0}),console.error(o)}},toggleMenu({commit:e},t){e("TOGGLE_MENU",t)},toggleInfo({commit:e},t){e("TOGGLE_INFO",t)},getSupplier({commit:e},t){return Je.get(`/PPH/suppliers/${t}`).then((t=>(e("SET_CURRENT_SUPPLIER",t.data),t.data)))}},ot={ADD_SUPPLIER(e,t){e.suppliers.push(t)},SET_SUPPLIERS(e,t){e.suppliers=t},TOGGLE_MENU(e,t){e.showMenu[t]=!e.showMenu[t]},TOGGLE_INFO(e,t){e.expanded[t]=!e.expanded[t]},SET_CURRENT_SUPPLIER(e,t){e.currentSupplier=t}};var at={namespaced:!0,state:Xe,getters:et,actions:tt,mutations:ot};const lt=()=>({users:[],showMenu:{},expanded:{},currentUser:null}),st={allUsers:e=>e.users,showMenu:e=>e.showMenu,expanded:e=>e.expanded,currentUser:e=>e.currentUser},nt={async addUser({dispatch:e},t){try{return await Je.post("PPH/users/",t),e("notifications/showNotification",{message:"Utilisateur ajouté avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(o){return e("notifications/showNotification",{message:"Erreur lors de l'ajout de l'utilisateur.",type:"error"},{root:!0}),Promise.reject(o)}},async fetchUserById(e){try{const t=await Je.get(`PPH/users/${e}`);return t}catch(t){throw console.error("Erreur lors de la récupération de l'utilisateur:",t),t}},async loadUsers({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/users"),o=t.data,a={},l={};o.forEach((e=>{a[e.id]=!1,l[e.id]=!1})),e("SET_USERS",o),e("INIT_MENU",a),e("INIT_INFO",l)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des utilisateurs",type:"error"},{root:!0}),console.error(o)}},async toggleActivation({dispatch:e},t){const{userId:o,isActive:a}=t;try{a?(await Je.patch(`/PPH/users/${o}/`,{is_active:!1}),e("notifications/showNotification",{message:"Utilisateur désactivé",type:"success"},{root:!0})):(await Je.patch(`/PPH/users/${o}/`,{is_active:!0}),e("notifications/showNotification",{message:"Utiliisateur activé",type:"success"},{root:!0})),e("loadUsers")}catch(l){e("notifications/showNotification",{message:"Erreur lors du changement d'état",type:"error"},{root:!0}),console.error(l)}},async deleteUser({dispatch:e},t){try{await Je.delete(`/PPH/users/${t}`),e("notifications/showNotification",{message:"Utilisateur supprimé",type:"success"},{root:!0}),e("loadUsers")}catch(o){e("notifications/showNotification",{message:"Erreur lors de la suppression",type:"error"},{root:!0}),console.error(o)}},toggleMenu({commit:e},t){e("TOGGLE_MENU",t)},toggleInfo({commit:e},t){e("TOGGLE_INFO",t)},getUser({commit:e},t){return Je.get(`/PPH/users/${t}`).then((t=>(e("SET_CURRENT_USER",t.data),t.data)))}},rt={ADD_USER(e,t){e.users.push(t)},SET_USERS(e,t){e.users=t,t.forEach((t=>{e.showMenu={...e.showMenu,[t.id]:!1},e.expanded={...e.expanded,[t.id]:!1}}))},TOGGLE_MENU(e,t){e.showMenu[t]=!e.showMenu[t]},TOGGLE_INFO(e,t){e.expanded[t]=!e.expanded[t]},SET_CURRENT_USER(e,t){e.currentUser=t},INIT_MENU(e,t){e.showMenu=t},INIT_INFO(e,t){e.expanded=t}};var it={namespaced:!0,state:lt,getters:st,actions:nt,mutations:rt},ct=o(9797);const ut={showNotification(e,t){let o={};switch(t.type){case"success":o={color:"green-3",icon:"announcement"};break;case"error":o={color:"red-3",icon:"warning"};break;case"info":o={color:"blue-3",icon:"info"};break}ct.Z.create({message:t.message,...o,timeout:5e3,position:"top-right",...t.options})},async showNotificationsSeq({dispatch:e},t){for(const o of t)await new Promise((t=>{e("showNotification",o),setTimeout(t,2e3)}))},showNotificationBackend(e,t){let o={};switch(t.type){case"success":o={color:"green-3",icon:"announcement"};break;case"error":o={color:"red-3",icon:"warning"};break;case"info":o={color:"blue-3",icon:"info"};break}const a=ct.Z.create({message:t.message,...o,timeout:5e3,position:"top-right",...t.options});ct.Z.emitter.$emit("notification-displayed",a)}};var dt={namespaced:!0,actions:ut};const mt=()=>({showForm:!1,contactData:{name:"",email:"",message:""}}),pt=mt(),ft={SET_SHOW_FORM(e,t){e.showForm=t},SET_CONTACT_DATA(e,t){console.log("Updating contactData with payload:",t),e.contactData=t}},ht={toggleForm({commit:e},t){e("SET_SHOW_FORM",t)},async submitContactForm({commit:e,dispatch:t},o){try{let a=await Je.post("PPH/contact/",o);return e("SET_CONTACT_DATA",mt().contactData),t("notifications/showNotification",{type:"success",message:"Votre message a bien été envoyé !"},{root:!0}),a}catch(a){console.error("There was an error submitting the contact form:",a),t("notifications/showNotification",{type:"error",message:"Une erreur est survenue lors de l'envoi de votre message. Veuillez réessayer plus tard."},{root:!0})}}};var wt={namespaced:!0,state:pt,mutations:ft,actions:ht};const gt={isLoggedIn:!1,user:{firstName:null,lastName:null,email:null,function:null},tokenStatus:null},_t={SET_IS_LOGGED_IN(e,t){e.isLoggedIn=t},SET_USER_DATA(e,t){e.user=t},LOGOUT(e){e.isLoggedIn=!1,e.user={firstName:null,lastName:null,email:null,function:null}},SET_TOKEN_STATUS(e,t){e.tokenStatus=t}},yt={async login({commit:e,dispatch:t},o){try{this.intentionalLogout=!1;let t=await Je.post("/api/token/",o);console.log(t.data);let l=await Je.get("/PPH/current_user/");e("SET_USER_DATA",l.data),e("SET_IS_LOGGED_IN",!0);try{await document.documentElement.requestFullscreen()}catch(a){console.error("Erreur lors de la demande de mode plein écran:",a)}return!0}catch(l){l.response&&401===l.response.status?t("notifications/showNotification",{message:"Aucun compte actif pour ces identifiants.",type:"error"},{root:!0}):t("notifications/showNotification",{message:"Une erreur est survenue. Veuillez réessayer plus tard ou contatez un administrateur.",type:"error"},{root:!0}),console.error(l);let e=l.response?.data?.detail||"Échec de la connexion. Veuillez vérifier vos identifiants et réessayer.";throw e}},async logout({commit:e,dispatch:t}){try{const o=await Je.post("/logout/");if(this.intentionalLogout=!0,200!==o.status)throw new Error("Erreur lors de la déconnexion.");e("LOGOUT"),e("SET_IS_LOGGED_IN",!1),t("notifications/showNotification",{message:"Vous êtes déconnecté !",type:"success"},{root:!0}),gm.push({name:"Login"}),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen())}catch(o){console.error("Une erreur s'est produite lors de la déconnexion :",o),t("notifications/showNotification",{message:`Erreur lors de la déconnexion : ${o.message}`,type:"error"},{root:!0})}},async checkAuthentication({commit:e,dispatch:t}){if(!this.intentionalLogout)try{const o=await Je.get("PPH/current_user/"),a=o.data;if(a)if(e("SET_USER_DATA",a),e("SET_IS_LOGGED_IN",!0),void 0!==a.tokenExpiry&&null!==a.tokenExpiry){const o=a.tokenExpiry;o<=600&&o>540?(e("SET_TOKEN_STATUS","nearExpiry"),t("notifications/showNotification",{message:"Votre session expirera dans 10 minutes !",type:"info"},{root:!0})):o<=540&&o>60?e("SET_TOKEN_STATUS","nearExpiry"):o<=300&&o>240?(e("SET_TOKEN_STATUS","nearInvalid"),t("notifications/showNotification",{message:"Votre session expirera dans 5 minutes !",type:"info"},{root:!0})):o<=240&&o>60?e("SET_TOKEN_STATUS","nearInvalid"):o<=60?(e("SET_TOKEN_STATUS","invalid"),e("LOGOUT"),gm.push({name:"Login"}),t("notifications/showNotification",{message:"Votre session a expiré !",type:"info"},{root:!0}),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen&&document.mozCancelFullScreen())):e("SET_TOKEN_STATUS","valid")}else e("SET_TOKEN_STATUS","valid");else e("SET_TOKEN_STATUS","invalid"),e("SET_IS_LOGGED_IN",!1)}catch(o){o.response&&401===o.response.status?(e("SET_TOKEN_STATUS","invalid"),e("SET_IS_LOGGED_IN",!1),t("notifications/showNotification",{message:"L'authentification est invalide ou a expiré !",type:"error"},{root:!0})):(console.error("Erreur lors de la vérification du token:",o),t("notifications/showNotification",{message:"Erreur lors de la vérification du token !",type:"error"},{root:!0}))}}};var vt={namespaced:!0,state:gt,mutations:_t,actions:yt};const bt={user:{firstName:null,lastName:null,email:null,userName:null,function:null},isSubmitting:!1},kt={SET_USER_DATA(e,t){e.user=t},UPDATE_FIELD(e,{field:t,value:o}){e.user[t]=o},SET_SUBMITTING(e,t){e.isSubmitting=t}},Wt={async fetchUserData({commit:e,dispatch:t}){try{let t=await Je.getUserData();e("SET_USER_DATA",t.data)}catch(o){console.error("Erreur lors de la récupération des données de l'utilisateur :",o),t("notifications/showNotification",{type:"error",message:"Une erreur est survenue lors de la récupération de vos données. Veuillez réessayer plus tard."},{root:!0})}},async updateUser({commit:e,state:t,dispatch:o}){e("SET_SUBMITTING",!0);try{await Je.post("PPH/user/update/",t.user),o("notifications/showNotification",{message:"Utilisateur enregistré !",type:"success"},{root:!0})}catch(a){}finally{e("SET_SUBMITTING",!1)}}},Ct={user:e=>e.user};var xt={state:bt,mutations:kt,actions:Wt,getters:Ct};const qt={error:null},St={SET_ERROR(e,t){e.error=t}},Mt={async fetchData({commit:e,dispatch:t},o){try{await Je.get(o)}catch(a){let o=a.response?.data?.detail||"Une erreur est survenue.";e("SET_ERROR",o),t("notifications/showNotification",{message:o,type:"error"},{root:!0})}}};var Ut={namespaced:!0,state:qt,mutations:St,actions:Mt};const Ft={isFullscreen:!1},It={SET_FULLSCREEN(e,t){e.isFullscreen=t}},Vt={toggleFullscreen({commit:e,state:t}){t.isFullscreen?(document.exitFullscreen(),e("SET_FULLSCREEN",!1)):(document.documentElement.requestFullscreen(),e("SET_FULLSCREEN",!0))}};var Pt={namespaced:!0,state:Ft,mutations:It,actions:Vt};const Et={userFormData:{last_name:"",first_name:"",user_name:"",email:""},anotherFormData:{field1:"",field2:""}},Lt={UPDATE_FIELD(e,{formName:t,field:o,value:a}){e[t]&&(e[t][o]=a)}},Qt={updateField({commit:e},{formName:t,field:o,value:a}){e("UPDATE_FIELD",{formName:t,field:o,value:a})}};var jt={namespaced:!0,state:Et,mutations:Lt,actions:Qt};const Tt=!0;let Dt;Dt=Tt?"wss://pph-backend-4f4fd8d99c88.herokuapp.com/ws/notifications/":"ws://localhost:8001/ws/notifications/";var Zt=Dt;const Nt=()=>({receptions:[],cdts:[],formes:[],types:[],unites:[],matieres:[],categoriesMatieres:[],importsCatalogue:[],matieresCatalogue:[],showMenu:{},expanded:{},currentMatiere:null,loadingMatieres:!1}),zt={loadingMatieres(e){return e.loadingMatieres},allCdts:e=>e.cdts,allFormes:e=>e.formes,allUnites:e=>e.unites,allTypes:e=>e.types,allMatieres:e=>e.matieres,allReceptions:e=>e.receptions,allCategories:e=>e.categoriesMatieres,allImports:e=>e.importsCatalogue,allMatieresCatalogue:e=>e.matieresCatalogue,showMenu:e=>e.showMenu,expanded:e=>e.expanded,currentMatiere:e=>e.currentMatiere,showMenuMat:e=>e.menuMat,matieresCdeCount:e=>{const t=e.matieres.filter((e=>e.cde));return t.length},matieresLivraisonCount:e=>e.matieres.filter((e=>e.attente_livraison)).length},Rt={async addMatiere({dispatch:e,commit:t},o){try{const a=await Je.post("PPH/matieres-premieres/",o),l=a.data;return t("ADD_MATIERE",l),e("notifications/showNotification",{message:"Matière première ajoutée avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(a){return e("notifications/showNotification",{message:"Erreur lors de l'ajout de la matière première",type:"error"},{root:!0}),Promise.reject(a)}},async addReception({dispatch:e,commit:t},o){try{const a=await Je.post("PPH/reception/",o,{headers:{"Content-Type":"multipart/form-data"}}),l=a.data;return t("ADD_RECEPTION",l),e("notifications/showNotification",{message:"Réception ajoutée avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(a){return e("notifications/showNotification",{message:"Erreur lors de l'ajout de la réception",type:"error"},{root:!0}),Promise.reject(a)}},async addType({dispatch:e},t){try{return await Je.post("PPH/types-matieres/",t),e("notifications/showNotification",{message:"Type ajouté avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(o){return e("notifications/showNotification",{message:"Erreur lors de l'ajout du type de matière première",type:"error"},{root:!0}),Promise.reject(o)}},async addCdt({dispatch:e},t){try{return await Je.post("PPH/conditionnement/",t),e("notifications/showNotification",{message:"Conditionnement ajouté avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(o){return e("notifications/showNotification",{message:"Erreur lors de l'ajout du conditionnement",type:"error"},{root:!0}),Promise.reject(o)}},async addForme({dispatch:e},t){try{return await Je.post("PPH/formes/",t),e("notifications/showNotification",{message:"Forme ajoutée avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(o){return e("notifications/showNotification",{message:"Erreur lors de l'ajout de la forme de matière première",type:"error"},{root:!0}),Promise.reject(o)}},async addImport({dispatch:e,commit:t},o){return new Promise(((a,l)=>{const s=new WebSocket(Zt);e("spinner/showSpinner",null,{root:!0}),s.onopen=()=>{Je.post("PPH/catalogue-import/",o,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{t("RESET_MATIERES_CATALOGUE"),e("notifications/showNotification",{message:"Demande terminée",type:"success"},{root:!0}),e("spinner/hideSpinner",null,{root:!0}),a()})).catch((t=>{e("spinner/hideSpinner",null,{root:!0}),e("notifications/showNotification",{message:"Impossible d'initialiser l'import",type:"error"},{root:!0}),l(t)})),s.addEventListener("message",(t=>{const o=JSON.parse(t.data);o.notification&&o.notification.message?e("notifications/showNotification",{message:o.notification.message,type:o.notification.notification_type},{root:!0}):e("notifications/showNotification",{message:"Format de notification inattendu",type:"error"},{root:!0})}))}}))},async fetchMatierePremiereById(e){try{const t=await Je.get(`PPH/matieres-premieres/${e}`);return t}catch(t){throw console.error("Erreur lors de la récupération de la matière première:",t),t}},async loadMatieresPremieres({commit:e,dispatch:t}){try{console.log("Chargement des matières premières");const t=await Je.get("/PPH/matieres-premieres");e("SET_MATIERES",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des matières premières",type:"error"},{root:!0}),console.error(o)}},async loadReceptions({commit:e,dispatch:t}){try{console.log("Chargement des réceptions");const t=await Je.get("/PPH/reception");e("SET_RECEPTIONS",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des réceptions",type:"error"},{root:!0}),console.error(o)}},async loadCategoriesMatieres({commit:e,dispatch:t}){try{console.log("Chargement des catégories de matières premières");const t=await Je.get("/PPH/categories");e("SET_CATEGORIES",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des catégories matières premières",type:"error"},{root:!0}),console.error(o)}},async loadMatieresPremieresCatalogue({commit:e,dispatch:t}){try{e("SET_LOADING_MATIERES",!0),console.log("Chargement des matières premières");const t=await Je.get("/PPH/catalogue");e("SET_MATIERES_CATALOGUE",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des matières premières",type:"error"},{root:!0}),console.error(o)}finally{e("SET_LOADING_MATIERES",!1)}},async loadUnites({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/unites-mesure");e("SET_UNITES",t.data),console.log("unites",t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des unités",type:"error"},{root:!0}),console.error(o)}},async loadFormes({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/formes");e("SET_FORMES",t.data),console.log("formes",t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des unités",type:"error"},{root:!0}),console.error(o)}},async loadTypes({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/types-matieres");e("SET_TYPES",t.data),console.log("types",t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des unités",type:"error"},{root:!0}),console.error(o)}},async loadCdt({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/conditionnement");e("SET_CDT",t.data),console.log("cdt",t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des conditionnements",type:"error"},{root:!0}),console.error(o)}},async toggleActivation({dispatch:e},t){const{matiereId:o,isStockee:a}=t;try{a?(await Je.patch(`/PPH/matieres-premieres/${o}/`,{stockee:!1}),e("notifications/showNotification",{message:"Matière première rétirée du stock",type:"success"},{root:!0})):(await Je.patch(`/PPH/matieres-premieres/${o}/`,{stockee:!0}),e("notifications/showNotification",{message:"Matière première stockée",type:"success"},{root:!0})),e("loadMatieresPremieres")}catch(l){e("notifications/showNotification",{message:"Erreur lors du changement d'état",type:"error"},{root:!0}),console.error(l)}},async toggleCde({dispatch:e},t){const{matiereId:o,isCde:a}=t;try{a?(await Je.patch(`/PPH/matieres-premieres/${o}/`,{cde:!1}),e("notifications/showNotification",{message:"Matière première retirée de la liste de commande",type:"success"},{root:!0})):(await Je.patch(`/PPH/matieres-premieres/${o}/`,{cde:!0}),e("notifications/showNotification",{message:"Matière première ajoutée à la liste de commande",type:"success"},{root:!0})),e("loadMatieresPremieres")}catch(l){e("notifications/showNotification",{message:"Erreur lors du changement d'état",type:"error"},{root:!0}),console.error(l)}},async toggleLivraison({dispatch:e},t){const{matiereId:o,isLivraison:a}=t;try{a?(await Je.patch(`/PPH/matieres-premieres/${o}/`,{attente_livraison:!1,cde:!0}),e("notifications/showNotification",{message:"Matière première en attente de commande",type:"success"},{root:!0})):(await Je.patch(`/PPH/matieres-premieres/${o}/`,{attente_livraison:!0,cde:!1}),e("notifications/showNotification",{message:"Matière première en attente de livraison",type:"success"},{root:!0})),e("loadMatieresPremieres")}catch(l){e("notifications/showNotification",{message:"Erreur lors du changement d'état",type:"error"},{root:!0}),console.error(l)}},async deleteMatiere({dispatch:e},t){console.log("deleteMatiere appelée avec l'ID :",t);try{await Je.delete(`/PPH/matieres-premieres/${t}`),e("notifications/showNotification",{message:"Matière première supprimée",type:"success"},{root:!0}),e("loadMatieresPremieres")}catch(o){e("notifications/showNotification",{message:"Erreur lors de la suppression",type:"error"},{root:!0}),console.error(o)}},toggleMenu({commit:e},t){e("TOGGLE_MENU",t)},toggleInfo({commit:e},t){e("TOGGLE_INFO",t)},toggleMenuMat({commit:e}){e("SET_MENU_MAT",!this.state.menuMat)},getMatiere({commit:e},t){return Je.get(`/PPH/matieres-premieres/${t}`).then((t=>(e("SET_CURRENT_MATIERE",t.data),t.data)))}},Ot={ADD_CDT(e,t){e.cdts.push(t)},ADD_MATIERE(e,t){e.matieres.push(t)},ADD_TYPE(e,t){e.type.push(t)},ADD_FORME(e,t){e.forme.push(t)},ADD_IMPORT(e,t){e.importsCatalogue.push(t)},ADD_RECEPTION(e,t){e.receptions.push(t)},SET_LOADING_MATIERES(e,t){e.loadingMatieres=t},RESET_MATIERES_CATALOGUE(e){e.matieresCatalogue=[]},SET_MENU_MAT(e,t){e.menuMat=t},SET_MATIERES(e,t){e.matieres=t},SET_RECEPTIONS(e,t){e.receptions=t},SET_CATEGORIES(e,t){e.categoriesMatieres=t},SET_MATIERES_CATALOGUE(e,t){e.matieresCatalogue=t},SET_UNITES(e,t){e.unites=t},SET_TYPES(e,t){e.types=t},SET_CDT(e,t){e.cdts=t},SET_FORMES(e,t){e.formes=t},TOGGLE_MENU(e,t){e.showMenu[t]=!e.showMenu[t]},TOGGLE_INFO(e,t){e.expanded[t]=!e.expanded[t]},SET_CURRENT_MATIERE(e,t){e.currentMatiere=t}};var At={namespaced:!0,state:Nt,getters:zt,actions:Rt,mutations:Ot};const Bt=()=>({types:[],parametres:[],parametresFormules:[],formules:[],listes:[],showMenu:{},expanded:{},currentFormuleId:null}),$t={expanded:e=>e.expanded,showMenu:e=>e.showMenu,allTypes:e=>e.types,allParametres:e=>e.parametres,allParametresFormules:e=>e.parametresFormules,allFormules:e=>e.formules,allListes:e=>e.listes},Ht={async addParametres({dispatch:e},t){try{return console.log("Envoi de formData:",t),await Je.post("PPH/parametres-formules/",t,{headers:{"Content-Type":"application/json"}}),e("notifications/showNotification",{message:"Paramètres ajoutés avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(o){return e("notifications/showNotification",{message:"Erreur lors de l'ajout des paramètres",type:"error"},{root:!0}),Promise.reject(o)}},async addFormule({dispatch:e},t){try{return await Je.post("PPH/nouvelle-formule/",t),e("notifications/showNotification",{message:"Formule ajouté avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(o){return e("notifications/showNotification",{message:"Erreur lors de l'ajout de la formule",type:"error"},{root:!0}),Promise.reject(o)}},async addComposition({dispatch:e},t){try{return await Je.post("PPH/composition/",t),e("notifications/showNotification",{message:"Composition ajoutée avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(o){return e("notifications/showNotification",{message:"Erreur lors de l'ajout de la composition",type:"error"},{root:!0}),Promise.reject(o)}},async getCompositionsForFormule({dispatch:e},t){try{const e=await Je.get(`PPH/composition/filter/${t}`);return Promise.resolve(e.data)}catch(o){return e("notifications/showNotification",{message:"Erreur lors de la récupération des compositions existantes",type:"error"},{root:!0}),Promise.reject(o)}},async loadFormules({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/formules");e("SET_FORMULES",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des formules",type:"error"},{root:!0}),console.error(o)}},async loadListes({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/liste");e("SET_LISTE",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des listes",type:"error"},{root:!0}),console.error(o)}},async loadTypes({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/type-prep");e("SET_TYPE",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des types de préparations",type:"error"},{root:!0}),console.error(o)}},async loadParametresFormules({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/parametres-formules");e("SET_PARAMETRE_FORMULES",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des paramètres",type:"error"},{root:!0}),console.error(o)}},async loadParametres({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/parametres-prep");e("SET_PARAMETRE",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des paramètres",type:"error"},{root:!0}),console.error(o)}},async toggleActivation({dispatch:e},t){const{formuleId:o,isActive:a}=t;try{a?(await Je.patch(`/PPH/formules/${o}/`,{is_activate:!1}),e("notifications/showNotification",{message:"Formule désactivée",type:"success"},{root:!0})):(await Je.patch(`/PPH/formules/${o}/`,{is_activate:!0}),e("notifications/showNotification",{message:"Formule activée",type:"success"},{root:!0})),e("loadFormules")}catch(l){e("notifications/showNotification",{message:"Erreur lors du changement d'état",type:"error"},{root:!0}),console.error(l)}},async validFormule({dispatch:e},t){const{formuleId:o,isValid:a}=t;try{a?(await Je.patch(`/PPH/formules/${o}/`,{is_valid:!1}),e("notifications/showNotification",{message:"Formule non-validée",type:"success"},{root:!0})):(await Je.patch(`/PPH/formules/${o}/`,{is_valid:!0}),e("notifications/showNotification",{message:"Formule validée",type:"success"},{root:!0})),e("loadformules")}catch(l){e("notifications/showNotification",{message:"Erreur lors du changement d'état",type:"error"},{root:!0}),console.error(l)}},toggleMenu({commit:e},t){e("TOGGLE_MENU",t)},toggleInfo({commit:e},t){e("TOGGLE_INFO",t)}},Gt={updateName(e,t){e.name=t},updateTypePrep(e,t){e.typePrep=t},ADD_TYPE(e,t){e.types.push(t)},SET_TYPE(e,t){e.types=t},SET_LISTE(e,t){e.listes=t},ADD_PARAMETRE(e,t){e.parametres.push(t)},SET_PARAMETRE(e,t){e.parametres=t},SET_PARAMETRE_FORMULES(e,t){e.parametresFormules=t},SET_FORMULES(e,t){e.formules=t},TOGGLE_MENU(e,t){e.showMenu[t]=!e.showMenu[t]},TOGGLE_INFO(e,t){e.expanded[t]=!e.expanded[t]}};var Yt={namespaced:!0,state:Bt,getters:$t,actions:Ht,mutations:Gt};const Kt=()=>({voies:[]}),Jt={allVoies:e=>e.voies},Xt={async addVoie({dispatch:e},t){try{return await Je.post("PPH/voie/",t),e("notifications/showNotification",{message:"Voie d'administration ajoutée avec succès",type:"success"},{root:!0}),Promise.resolve()}catch(o){return e("notifications/showNotification",{message:"Erreur lors de l'ajout de la voie d'administration",type:"error"},{root:!0}),Promise.reject(o)}},async loadVoies({commit:e,dispatch:t}){try{const t=await Je.get("/PPH/voie");e("SET_VOIE",t.data),console.log(t.data)}catch(o){t("notifications/showNotification",{message:"Erreur lors du chargement des voies",type:"error"},{root:!0}),console.error(o)}}},eo={ADD_VOIE(e,t){e.voies.push(t)},SET_VOIE(e,t){e.voies=t}};var to={namespaced:!0,state:Kt,getters:Jt,actions:Xt,mutations:eo};const oo={demandes:[]},ao={demandesAll:e=>e.demandes,demandesDates:e=>e.demandes.map((e=>e.date_prevu)),nombreDemandes:e=>e.demandes.length,demandeProche:e=>{const t=[...e.demandes].sort(((e,t)=>new Date(e.date_prevu)-new Date(t.dat_prevu)));if(t.length>0){const e=t[0],o=new Date(e.date_prevu),a=("0"+o.getDate()).slice(-2),l=("0"+(o.getMonth()+1)).slice(-2),s=o.getFullYear(),n=`${a}/${l}/${s}`;return e.dateFormatee=n,e}return null},nombreDemandesProche:(e,t)=>{const o=t.demandeProche;if(!o)return 0;const a=e.demandes.filter((e=>new Date(e.date_prevu).getTime()===new Date(o.date_prevu).getTime()));return a.length}},lo={setDemandes:(e,t)=>{e.demandes=t}},so={async loadDemandes({commit:e}){try{const t=await Je.get("/demandes");e("setDemandes",t.data)}catch(t){console.error("Erreur lors du chargement des demandes :",t)}}};var no={namespaced:!0,state:oo,getters:ao,mutations:lo,actions:so};const ro={fiches:[],fichesSemaine:[]},io={fichesControlCount:e=>e.fiches.filter((e=>e.attente_controle)).length,fichesAll:e=>e.fiches,fichesSemaine:e=>e.fichesSemaine.map((e=>({week:e.week,count:e.count})))},co={setFiches:(e,t)=>{e.fiches=t},setFichesSemaine:(e,t)=>{e.fichesSemaine=t}},uo={async loadFiches({commit:e}){try{const t=await Je.get("/fiches");e("setFiches",t.data)}catch(t){console.error("Erreur lors du chargement des fiches :",t)}},async loadFichesSemaine({commit:e}){try{const t=await Je.get("/PPH/fiches-semaine");e("setFichesSemaine",t.data)}catch(t){console.error("Erreur lors du chargement des fiches par semaine :",t)}}};var mo={namespaced:!0,state:ro,getters:io,mutations:co,actions:uo};const po={isLoading:!1},fo={SET_LOADING(e,t){e.isLoading=t}},ho={showSpinner({commit:e}){e("SET_LOADING",!0)},hideSpinner({commit:e}){e("SET_LOADING",!1)}},wo={isLoading:e=>e.isLoading};var go={namespaced:!0,state:po,mutations:fo,actions:ho,getters:wo};const _o={socket:null},yo={SET_SOCKET(e,t){e.socket=t}},vo={initWebSocket({commit:e,dispatch:t}){const o=new WebSocket(Zt);o.onopen=()=>{console.log("WebSocket connecté")},o.onerror=e=>{console.error("WebSocket Erreur: ",e)},o.onmessage=e=>{const o=JSON.parse(e.data);o.notification&&t("notifications/showNotification",{message:o.notification.message,type:o.notification.notification_type},{root:!0})},o.onclose=()=>{console.log("WebSocket déconnecté")},e("SET_SOCKET",o)},sendMessage({state:e},t){e.socket&&e.socket.send(JSON.stringify(t))},closeWebSocket({commit:e,state:t}){t.socket&&(t.socket.close(),e("SET_SOCKET",null))}};var bo={namespaced:!0,state:_o,mutations:yo,actions:vo};const ko=(0,u.MT)({modules:{websocket:bo,spinner:go,fiches:mo,demandes:no,voiesAdministration:to,formules:Yt,matieresPremieres:At,suppliers:at,users:it,notifications:dt,contact:wt,user:xt,auth:vt,error:Ut,screen:Pt,forms:jt}});var Wo=ko;const Co=(0,l._)("div",{class:"row justify-center items-center"},[(0,l._)("div",{class:"text-h6 text-center text-cyan-4"},"Inscription")],-1),xo={key:0},qo={key:1},So={class:"row justify-center q-my-md"},Mo={class:"row justify-center q-mt-lg text-cyan-4 pph-link"};function Uo(e,t,o,a,s,n){const r=(0,l.up)("q-card-section"),i=(0,l.up)("q-separator"),c=(0,l.up)("UserRegisterForm"),u=(0,l.up)("q-icon"),d=(0,l.up)("router-link"),m=(0,l.up)("q-card"),p=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(p,{class:"row justify-center container-signup"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"card-signup shadow-10 col-md-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Co])),_:1}),(0,l.Wm)(i,{color:"grey-7"}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[s.formSubmitted?((0,l.wg)(),(0,l.iD)("div",qo,[(0,l._)("div",So,[(0,l.Wm)(u,{size:"10em",name:"check_circle",color:"green-4"})]),(0,l._)("div",Mo,[(0,l.Wm)(d,{class:"q-mx-md text-cyan-4 pph-link",to:"/login"},{default:(0,l.w5)((()=>[(0,l.Uk)("Déjà inscrit ? Connectez-vous")])),_:1})])])):((0,l.wg)(),(0,l.iD)("div",xo,[(0,l.Wm)(c,{register:n.register},null,8,["register"])]))])),_:1})])),_:1})])),_:1})}const Fo={class:"q-pa-sm row"},Io={class:"q-gutter-sm col-md-12"},Vo={class:"row"},Po={class:"col-md-6"},Eo={class:"col-md-6"},Lo={class:"row"},Qo={class:"col-md-6"},jo={class:"col-md-6"},To={class:"row justify-center q-mt-sm"},Do={class:"col-md-10"},Zo={class:"row q-pa-sm items-center"},No={class:"offset-2 col-md-3"},zo=(0,l._)("p",{class:"text-cyan-4 col-2 text-center q-mt-sm"},"Ou",-1),Ro={class:"col-md-3"},Oo={class:"row justify-center"},Ao={class:"col-md-10"};function Bo(e,t,o,s,n,r){const i=(0,l.up)("q-icon"),c=(0,l.up)("q-input"),u=(0,l.up)("q-btn"),d=(0,l.up)("q-separator"),m=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(m,{onSubmit:(0,a.iM)(r.onSubmit,["prevent"])},{default:(0,l.w5)((()=>[(0,l._)("div",Fo,[(0,l._)("div",Io,[(0,l.Wm)(c,{ref:"emailInput",class:"my-0",modelValue:n.email,"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),label:"E-mail",color:"cyan-4",onMouseover:t[1]||(t[1]=e=>r.changeLabelColor("emailInput","#ffb74d")),onMouseleave:t[2]||(t[2]=e=>r.changeLabelColor("emailInput","")),onFocus:t[3]||(t[3]=e=>r.onFocus("email","#4dd0e1")),onBlur:t[4]||(t[4]=e=>r.onBlur("email"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"mail",color:"cyan-4"})])),_:1},8,["modelValue"]),(0,l._)("div",Vo,[(0,l._)("div",Po,[(0,l.Wm)(c,{ref:"last_nameInput",class:"my-0",modelValue:n.last_name,"onUpdate:modelValue":t[5]||(t[5]=e=>n.last_name=e),label:"Nom",color:"cyan-4",onMouseover:t[6]||(t[6]=e=>r.changeLabelColor("last_nameInput","#ffb74d")),onMouseleave:t[7]||(t[7]=e=>r.changeLabelColor("last_nameInput","")),onFocus:t[8]||(t[8]=e=>r.onFocus("last_name","#4dd0e1")),onBlur:t[9]||(t[9]=e=>r.onBlur("last_name"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"portrait",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l._)("div",Eo,[(0,l.Wm)(c,{ref:"first_nameInput",class:"my-0",modelValue:n.first_name,"onUpdate:modelValue":t[10]||(t[10]=e=>n.first_name=e),label:"Prénom",color:"cyan-4",onMouseover:t[11]||(t[11]=e=>r.changeLabelColor("first_nameInput","#ffb74d")),onMouseleave:t[12]||(t[12]=e=>r.changeLabelColor("first_nameInput","")),onFocus:t[13]||(t[13]=e=>r.onFocus("first_name","#4dd0e1")),onBlur:t[14]||(t[14]=e=>r.onBlur("first_name"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"portrait",color:"cyan-4"})])),_:1},8,["modelValue"])])]),(0,l._)("div",Lo,[(0,l._)("div",Qo,[(0,l.Wm)(c,{ref:"password1Input",class:"my-0",modelValue:n.password1,"onUpdate:modelValue":t[15]||(t[15]=e=>n.password1=e),label:"Mot de passe",type:"password",color:"cyan-4",onMouseover:t[16]||(t[16]=e=>r.changeLabelColor("password1Input","#ffb74d")),onMouseleave:t[17]||(t[17]=e=>r.changeLabelColor("password1Input","")),onFocus:t[18]||(t[18]=e=>r.onFocus("password1","#4dd0e1")),onBlur:t[19]||(t[19]=e=>r.onBlur("password1"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"password",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l._)("div",jo,[(0,l.Wm)(c,{ref:"password2Input",class:"my-0",modelValue:n.password2,"onUpdate:modelValue":t[20]||(t[20]=e=>n.password2=e),label:"Confirmation",type:"password",color:"cyan-4",onMouseover:t[21]||(t[21]=e=>r.changeLabelColor("password2Input","#ffb74d")),onMouseleave:t[22]||(t[22]=e=>r.changeLabelColor("password2Input","")),onFocus:t[23]||(t[23]=e=>r.onFocus("password2","#4dd0e1")),onBlur:t[24]||(t[24]=e=>r.onBlur("password2"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"password",color:"cyan-4"})])),_:1},8,["modelValue"])])]),(0,l._)("div",To,[(0,l._)("div",Do,[(0,l.Wm)(u,{type:"submit",class:"q-mt-lg glossy full-width btn-grey-success-pph"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-mx-sm",name:"person_add"}),(0,l.Uk)(" S'inscrire ")])),_:1})])]),(0,l._)("div",Zo,[(0,l._)("div",No,[(0,l.Wm)(d,{color:"grey-8"})]),zo,(0,l._)("div",Ro,[(0,l.Wm)(d,{color:"grey-8"})])]),(0,l._)("div",Oo,[(0,l._)("div",Ao,[(0,l.Wm)(u,{class:"glossy full-width btn-grey-success-pph",onClick:r.redirectToLogin},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-mr-sm",name:"login"}),(0,l.Uk)(" Se connecter ")])),_:1},8,["onClick"])])])])])])),_:1},8,["onSubmit"])}var $o={props:{register:{type:Function,required:!0}},data(){return{email:"",first_name:"",last_name:"",password1:"",password2:"",emailFocused:!1,first_nameFocused:!1,last_nameFocused:!1,password1Focused:!1,password2Focused:!1,isEmailHovered:!1}},methods:{onSubmit(){this.register({email:this.email,first_name:this.first_name,last_name:this.last_name,password1:this.password1,password2:this.password2})},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},redirectToLogin(){this.$router.push("/login")},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1}}};const Ho=(0,p.Z)($o,[["render",Bo]]);var Go=Ho;U()($o,"components",{QForm:Ve.Z,QInput:Ce.Z,QIcon:q.Z,QBtn:v.Z,QSeparator:x.Z,QField:xe.Z});var Yo={components:{UserRegisterForm:Go},data(){return{error:null,formSubmitted:!1}},methods:{register(e){Je.post("/accounts/register/",e,{headers:{"Content-Type":"application/json"}}).then((()=>{this.$q.notify({message:"Inscription réussie !\n Un mail de confirmation\nvient de vous être envoyé.",icon:"announcement",color:"green-4",timeout:1e4,position:"top-right"}),this.formSubmitted=!0})).catch((e=>{e.response&&400===e.response.status&&(this.error=e.response.data),this.$q.notify({message:"Échec de l'inscription.",icon:"warning amber",color:"red-3",timeout:5e3,position:"top-right"})}))}}};const Ko=(0,p.Z)(Yo,[["render",Uo]]);var Jo=Ko;U()(Yo,"components",{QPage:De.Z,QCard:Fe.Z,QCardSection:Ie.Z,QSeparator:x.Z,QIcon:q.Z});const Xo={class:"row justify-center q-my-xl q-py-xl"},ea=(0,l._)("div",{class:"row justify-center items-center"},[(0,l._)("div",{class:"text-h6 text-center text-cyan-4"},"Connexion")],-1);function ta(e,t,o,a,s,n){const r=(0,l.up)("atom-spinner"),i=(0,l.up)("q-page"),c=(0,l.up)("q-card-section"),u=(0,l.up)("q-separator"),d=(0,l.up)("UserLoginForm"),m=(0,l.up)("q-card");return s.logged?((0,l.wg)(),(0,l.j4)(i,{key:0,class:"row justify-center items-center"},{default:(0,l.w5)((()=>[(0,l._)("div",Xo,[(0,l.Wm)(r,{class:"bg-op-8","animation-duration":1e3,size:200,color:"#ff1d5e"})])])),_:1})):((0,l.wg)(),(0,l.j4)(i,{key:1,class:"row justify-center container-signup"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"card-signup shadow-10 col-md-3 col-xs-10"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[ea])),_:1}),(0,l.Wm)(u,{color:"grey-7"}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{onSubmit:n.loginUser},null,8,["onSubmit"])])),_:1})])),_:1})])),_:1}))}const oa={class:"q-pa-sm row"},aa={class:"q-gutter-sm col-md-12"},la={class:"row"},sa={class:"col-md-12"},na={class:"row justify-center q-mt-sm"},ra={class:"col-md-10"},ia={class:"row justify-center q-mt-sm text-cyan-4 pph-link"},ca={class:"row q-pa-sm items-center"},ua={class:"offset-2 col-md-3"},da=(0,l._)("p",{class:"text-cyan-4 col-2 text-center q-mt-sm"},"Ou",-1),ma={class:"col-md-3"},pa={class:"row justify-center"},fa={class:"col-md-10"};function ha(e,t,o,s,n,r){const i=(0,l.up)("q-icon"),c=(0,l.up)("q-input"),u=(0,l.up)("q-btn"),d=(0,l.up)("router-link"),m=(0,l.up)("q-separator"),p=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(p,{onSubmit:(0,a.iM)(r.onSubmit,["prevent"])},{default:(0,l.w5)((()=>[(0,l._)("div",oa,[(0,l._)("div",aa,[(0,l.Wm)(c,{ref:"usernameInput",class:"my-0",modelValue:n.username,"onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),label:"Nom d'utilisateur",color:"cyan-4",onMouseover:t[1]||(t[1]=e=>r.changeLabelColor("usernameInput","#ffb74d")),onMouseleave:t[2]||(t[2]=e=>r.changeLabelColor("usernameInput","")),onFocus:t[3]||(t[3]=e=>r.onFocus("username","#4dd0e1")),onBlur:t[4]||(t[4]=e=>r.onBlur("username"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"portrait",color:"cyan-4"})])),_:1},8,["modelValue"]),(0,l._)("div",la,[(0,l._)("div",sa,[(0,l.Wm)(c,{ref:"password1Input",class:"my-0",modelValue:n.password1,"onUpdate:modelValue":t[5]||(t[5]=e=>n.password1=e),color:"cyan-4",label:"Mot de passe",type:"password",onMouseover:t[6]||(t[6]=e=>r.changeLabelColor("password1Input","#ffb74d")),onMouseleave:t[7]||(t[7]=e=>r.changeLabelColor("password1Input","")),onFocus:t[8]||(t[8]=e=>r.onFocus("password1","#4dd0e1")),onBlur:t[9]||(t[9]=e=>r.onBlur("password1"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"password",color:"cyan-4"})])),_:1},8,["modelValue"])])]),(0,l._)("div",na,[(0,l._)("div",ra,[(0,l.Wm)(u,{type:"submit",class:"q-mt-lg glossy full-width btn-grey-success-pph"},{default:(0,l.w5)((()=>[e.isLoggedIn?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(i,{key:0,class:"q-mx-sm",name:"login"})),(0,l.Uk)(" Se connecter ")])),_:1})]),(0,l._)("div",ia,[(0,l.Wm)(d,{class:"q-mx-md text-cyan-4 hover-effect pph-link",to:"/password-reset"},{default:(0,l.w5)((()=>[(0,l.Uk)("Mot de passe oublié ?")])),_:1})])]),(0,l._)("div",ca,[(0,l._)("div",ua,[(0,l.Wm)(m,{color:"grey-8"})]),da,(0,l._)("div",ma,[(0,l.Wm)(m,{color:"grey-8"})])]),(0,l._)("div",pa,[(0,l._)("div",fa,[(0,l.Wm)(u,{class:"glossy full-width btn-grey-success-pph",onClick:r.redirectToRegister},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-mr-sm",name:"person_add"}),(0,l.Uk)(" S'inscrire ")])),_:1},8,["onClick"])])])])])])),_:1},8,["onSubmit"])}var wa={data(){return{username:"",password1:"",usernameFocused:!1,passwordFocused:!1}},methods:{onSubmit(){this.$emit("submit",{username:this.username,password:this.password1})},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},redirectToRegister(){this.$router.push("/Register")},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1}}};const ga=(0,p.Z)(wa,[["render",ha]]);var _a=ga;U()(wa,"components",{QForm:Ve.Z,QInput:Ce.Z,QIcon:q.Z,QBtn:v.Z,QSeparator:x.Z,QField:xe.Z});var ya=o(7814),va={components:{UserLoginForm:_a,AtomSpinner:ya.e},data(){return{logged:!1}},computed:{...(0,u.rn)("auth",["isLoggedIn","user"])},mounted(){this.$route.query.accountActivated&&this.showActivatedNotification()},methods:{...(0,u.OI)("error",["SET_ERROR"]),...(0,u.nv)("auth",["login"]),async loginUser(e){try{this.logged=!0,await this.login(e),this.$store.dispatch("notifications/showNotification",{message:"Connexion réussie !",type:"success"}),this.$store.dispatch("notifications/showNotification",{message:`Bienvenue ${this.user.firstName} !`,type:"info"}),this.$router.push({name:"Home"})}catch(t){this.SET_ERROR(t)}this.logged=!1},showActivatedNotification(){this.$store.dispatch("notifications/showNotification",{message:"Votre compte est activé !",type:"success"})}}};const ba=(0,p.Z)(va,[["render",ta]]);var ka=ba;U()(va,"components",{QPage:De.Z,QCard:Fe.Z,QCardSection:Ie.Z,QSeparator:x.Z});const Wa=(0,l._)("div",{class:"row justify-center items-center"},[(0,l._)("div",{class:"text-h6 text-center text-cyan-4"},"Nouveau mot de passe")],-1);function Ca(e,t,o,a,s,n){const r=(0,l.up)("q-card-section"),i=(0,l.up)("q-separator"),c=(0,l.up)("PasswordResetForm"),u=(0,l.up)("q-card"),d=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(d,{class:"row justify-center container-signup"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"card-signup shadow-10 col-md-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Wa])),_:1}),(0,l.Wm)(i,{color:"grey-7"}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{register:e.register},null,8,["register"])])),_:1})])),_:1})])),_:1})}var xa=o(6237);const qa={class:"q-pa-sm row"},Sa={class:"q-gutter-sm col-md-12"},Ma={class:"row justify-center q-mt-sm"},Ua={class:"col-md-10"},Fa={class:"row q-pa-sm items-center"},Ia={class:"offset-2 col-md-3"},Va=(0,l._)("p",{class:"text-cyan-4 col-2 text-center q-mt-sm"},"Ou",-1),Pa={class:"col-md-3"},Ea={class:"row justify-center"},La={class:"col-md-10"};function Qa(e,t,o,s,n,r){const i=(0,l.up)("q-icon"),c=(0,l.up)("q-input"),u=(0,l.up)("q-btn"),d=(0,l.up)("q-separator"),m=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(m,{onSubmit:(0,a.iM)(r.onSubmit,["prevent"])},{default:(0,l.w5)((()=>[(0,l._)("div",qa,[(0,l._)("div",Sa,[(0,l.Wm)(c,{ref:"emailInput",class:"my-0",modelValue:n.email,"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),label:"E-mail",color:"cyan-4",onMouseover:t[1]||(t[1]=e=>r.changeLabelColor("emailInput","#ffb74d")),onMouseleave:t[2]||(t[2]=e=>r.changeLabelColor("emailInput","")),onFocus:t[3]||(t[3]=e=>r.onFocus("email","#4dd0e1")),onBlur:t[4]||(t[4]=e=>r.onBlur("email"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"portrait",color:"cyan-4"})])),_:1},8,["modelValue"]),(0,l._)("div",Ma,[(0,l._)("div",Ua,[(0,l.Wm)(u,{type:"submit",class:"q-mt-lg glossy full-width btn-grey-primary-pph"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-mx-sm",name:"restart_alt"}),(0,l.Uk)(" Réinitialiser ")])),_:1})])]),(0,l._)("div",Fa,[(0,l._)("div",Ia,[(0,l.Wm)(d,{color:"grey-8"})]),Va,(0,l._)("div",Pa,[(0,l.Wm)(d,{color:"grey-8"})])]),(0,l._)("div",Ea,[(0,l._)("div",La,[(0,l.Wm)(u,{class:"glossy full-width btn-grey-success-pph",onClick:r.redirectToLogin},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-mr-sm",name:"login"}),(0,l.Uk)(" Se connecter ")])),_:1},8,["onClick"])])])])])])),_:1},8,["onSubmit"])}var ja={data(){return{email:"",emailFocused:!1}},methods:{onSubmit(){this.$emit("submit",{email:this.email})},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},redirectToLogin(){this.$router.push("/login")},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1}}};const Ta=(0,p.Z)(ja,[["render",Qa]]);var Da=Ta;U()(ja,"components",{QForm:Ve.Z,QInput:Ce.Z,QIcon:q.Z,QBtn:v.Z,QSeparator:x.Z,QField:xe.Z});var Za={components:{PasswordResetForm:Da},setup(){const e=(0,xa.iH)(""),t=(0,xa.iH)(""),o=async()=>{try{const o=await Re.Z.post("http://localhost:8000/dj-rest-auth/password/reset/",{email:e.value});200===o.status&&(t.value="Votre demande de réinitialisation du mot de passe a été soumise.")}catch(o){console.error(o)}};return{email:e,message:t,submitForm:o}}};const Na=(0,p.Z)(Za,[["render",Ca]]);var za=Na;U()(Za,"components",{QPage:De.Z,QCard:Fe.Z,QCardSection:Ie.Z,QSeparator:x.Z});const Ra={class:"row justify-center"},Oa={class:"col-12"};function Aa(e,t,o,a,s,n){const r=(0,l.up)("CreateSupplierStepper"),i=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(i,{class:"container"},{default:(0,l.w5)((()=>[(0,l._)("div",Ra,[(0,l._)("div",Oa,[(0,l.Wm)(r,{onSubmit:n.saveSupplier},null,8,["onSubmit"])])])])),_:1})}const Ba=(0,l._)("div",{class:"text-cyan-4 q-mb-lg text-h5 text-center"},"Fiche fournisseur",-1),$a={class:"row"},Ha={class:"row"},Ga={class:"row"},Ya={class:"row"},Ka={class:"row"},Ja={class:"row"},Xa={class:"row"},el={class:"row"},tl={class:"row justify-center"};function ol(e,t,o,s,n,r){const i=(0,l.up)("q-icon"),c=(0,l.up)("q-input"),u=(0,l.up)("q-btn"),d=(0,l.up)("q-stepper-navigation"),m=(0,l.up)("q-step"),p=(0,l.up)("q-file"),f=(0,l.up)("q-btn-group"),h=(0,l.up)("q-stepper"),w=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(w,{onSubmit:(0,a.iM)(r.onSubmit,["prevent"]),enctype:"multipart/form-data",class:"q-pa-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{modelValue:n.step,"onUpdate:modelValue":t[63]||(t[63]=e=>n.step=e),class:"bg-op-8",vertical:"","done-color":"cyan-4","active-color":"orange-4","header-nav":"",animated:""},{default:(0,l.w5)((()=>[Ba,(0,l.Wm)(m,{name:1,title:"Identification",icon:"info",done:n.step>1},{default:(0,l.w5)((()=>[(0,l._)("div",$a,[(0,l.Wm)(c,{class:"col-2",ref:"nameInput",modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),label:"Nom",color:"cyan-4",onMouseover:t[1]||(t[1]=e=>r.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[2]||(t[2]=e=>r.changeLabelColor("nameInput","")),onFocus:t[3]||(t[3]=e=>r.onFocus("name","#4dd0e1")),onBlur:t[4]||(t[4]=e=>r.onBlur("name"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"forklift",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[5]||(t[5]=e=>n.step=2),color:"cyan-4",label:"Suivant",class:"hover-effect"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:2,title:"Localisation",icon:"vaccines",done:n.step>2},{default:(0,l.w5)((()=>[(0,l._)("div",Ha,[(0,l.Wm)(c,{ref:"countryInput",class:"col-2",modelValue:n.country,"onUpdate:modelValue":t[6]||(t[6]=e=>n.country=e),label:"Pays",color:"cyan-4",onMouseover:t[7]||(t[7]=e=>r.changeLabelColor("countryInput","#ffb74d")),onMouseleave:t[8]||(t[8]=e=>r.changeLabelColor("countryInput","")),onFocus:t[9]||(t[9]=e=>r.onFocus("country","#4dd0e1")),onBlur:t[10]||(t[10]=e=>r.onBlur("country"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"flag",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l._)("div",Ga,[(0,l.Wm)(c,{ref:"addressInput",class:"col-3",modelValue:n.address,"onUpdate:modelValue":t[11]||(t[11]=e=>n.address=e),label:"Adresse",color:"cyan-4",onMouseover:t[12]||(t[12]=e=>r.changeLabelColor("addressInput","#ffb74d")),onMouseleave:t[13]||(t[13]=e=>r.changeLabelColor("addressInput","")),onFocus:t[14]||(t[14]=e=>r.onFocus("address","#4dd0e1")),onBlur:t[15]||(t[15]=e=>r.onBlur("address"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"mail",color:"cyan-4"})])),_:1},8,["modelValue"]),(0,l.Wm)(c,{ref:"postalInput",class:"col-2 q-ml-md",modelValue:n.postal,"onUpdate:modelValue":t[16]||(t[16]=e=>n.postal=e),label:"Code postal",color:"cyan-4",onMouseover:t[17]||(t[17]=e=>r.changeLabelColor("postalInput","#ffb74d")),onMouseleave:t[18]||(t[18]=e=>r.changeLabelColor("postalInput","")),onFocus:t[19]||(t[19]=e=>r.onFocus("postal","#4dd0e1")),onBlur:t[20]||(t[20]=e=>r.onBlur("postal"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"contact_mail",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l._)("div",Ya,[(0,l.Wm)(c,{ref:"cityInput",class:"col-3",modelValue:n.city,"onUpdate:modelValue":t[21]||(t[21]=e=>n.city=e),label:"Ville",color:"cyan-4",onMouseover:t[22]||(t[22]=e=>r.changeLabelColor("cityInput","#ffb74d")),onMouseleave:t[23]||(t[23]=e=>r.changeLabelColor("cityInput","")),onFocus:t[24]||(t[24]=e=>r.onFocus("city","#4dd0e1")),onBlur:t[25]||(t[25]=e=>r.onBlur("city"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"location_city",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[26]||(t[26]=e=>n.step=3),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(u,{flat:"",onClick:t[27]||(t[27]=e=>n.step=1),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:3,title:"Contact",icon:"ac_unit",done:n.step>3},{default:(0,l.w5)((()=>[(0,l._)("div",Ka,[(0,l.Wm)(c,{ref:"phoneInput",class:"col-3",modelValue:n.phone,"onUpdate:modelValue":t[28]||(t[28]=e=>n.phone=e),label:"Téléphone",color:"cyan-4",onMouseover:t[29]||(t[29]=e=>r.changeLabelColor("phoneInput","#ffb74d")),onMouseleave:t[30]||(t[30]=e=>r.changeLabelColor("phoneInput","")),onFocus:t[31]||(t[31]=e=>r.onFocus("phone","#4dd0e1")),onBlur:t[32]||(t[32]=e=>r.onBlur("phone"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"phone",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l._)("div",Ja,[(0,l.Wm)(c,{ref:"emailInput",class:"col-3",modelValue:n.email,"onUpdate:modelValue":t[33]||(t[33]=e=>n.email=e),type:"email",label:"E-mail de contact",color:"cyan-4",onMouseover:t[34]||(t[34]=e=>r.changeLabelColor("emailInput","#ffb74d")),onMouseleave:t[35]||(t[35]=e=>r.changeLabelColor("emailInput","")),onFocus:t[36]||(t[36]=e=>r.onFocus("email","#4dd0e1")),onBlur:t[37]||(t[37]=e=>r.onBlur("email"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"mail",color:"cyan-4"})])),_:1},8,["modelValue"]),(0,l.Wm)(c,{ref:"siteInput",class:"col-3 q-ml-md",modelValue:n.site,"onUpdate:modelValue":t[38]||(t[38]=e=>n.site=e),type:"url",label:"Site",color:"cyan-4",onMouseover:t[39]||(t[39]=e=>r.changeLabelColor("siteInput","#ffb74d")),onMouseleave:t[40]||(t[40]=e=>r.changeLabelColor("siteInput","")),onFocus:t[41]||(t[41]=e=>r.onFocus("site","#4dd0e1")),onBlur:t[42]||(t[42]=e=>r.onBlur("site"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"web",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[43]||(t[43]=e=>n.step=4),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(u,{flat:"",onClick:t[44]||(t[44]=e=>n.step=2),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:4,title:"Identifiants",icon:"settings",done:n.step>4},{default:(0,l.w5)((()=>[(0,l._)("div",Xa,[(0,l.Wm)(c,{ref:"user_codeInput",class:"col-2",modelValue:n.user_code,"onUpdate:modelValue":t[45]||(t[45]=e=>n.user_code=e),label:"Code client",color:"cyan-4",onMouseover:t[46]||(t[46]=e=>r.changeLabelColor("user_codeInput","#ffb74d")),onMouseleave:t[47]||(t[47]=e=>r.changeLabelColor("user_codeInput","")),onFocus:t[48]||(t[48]=e=>r.onFocus("user_code","#4dd0e1")),onBlur:t[49]||(t[49]=e=>r.onBlur("user_code"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"sell",color:"cyan-4"})])),_:1},8,["modelValue"]),(0,l.Wm)(c,{ref:"passwordInput",class:"col-2 q-ml-md",modelValue:n.password,"onUpdate:modelValue":t[50]||(t[50]=e=>n.password=e),label:"Mot de passe",color:"cyan-4",onMouseover:t[51]||(t[51]=e=>r.changeLabelColor("passwordInput","#ffb74d")),onMouseleave:t[52]||(t[52]=e=>r.changeLabelColor("passwordInput","")),onFocus:t[53]||(t[53]=e=>r.onFocus("password","#4dd0e1")),onBlur:t[54]||(t[54]=e=>r.onBlur("password"))},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"password",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[55]||(t[55]=e=>n.step=5),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(u,{flat:"",onClick:t[56]||(t[56]=e=>n.step=3),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:5,title:"Logo",icon:"list_alt",done:n.step>5},{default:(0,l.w5)((()=>[(0,l._)("div",el,[(0,l.Wm)(p,{ref:"logoInput",type:"file",class:"col-3",modelValue:n.logo,"onUpdate:modelValue":t[57]||(t[57]=e=>n.logo=e),accept:".jpg,.jpeg,.png,.gif",label:"Choisir un logo",color:"cyan-4",onMouseover:t[58]||(t[58]=e=>r.changeLabelColor("logoInput","#ffb74d")),onMouseleave:t[59]||(t[59]=e=>r.changeLabelColor("logoInput","")),onFocus:t[60]||(t[60]=e=>r.onFocus("logo","#4dd0e1")),onBlur:t[61]||(t[61]=e=>r.onBlur("logo")),onInput:r.handleFileChange},{before:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"branding_watermark",color:"cyan-4"})])),_:1},8,["modelValue","onInput"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[62]||(t[62]=e=>n.step=7),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l._)("div",tl,[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",type:"submit",color:"green-4",class:"btn-flat-success-pph"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-mx-sm",name:"library_add"}),(0,l.Uk)(" Enregistrer ")])),_:1})])),_:1})])])),_:1},8,["modelValue"])])),_:1},8,["onSubmit"])}var al={data(){return{step:1,supplierId:this.$route.params.id,name:"",postal:"",address:"",city:"",country:"",logo:null,phone:"",email:"",site:"",user_code:"",password:"",is_activate:!0,nameFocused:!1,postalFocused:!1,addressFocused:!1,cityFocused:!1,countryFocused:!1,logoFocused:!1,phoneFocused:!1,emailFocused:!1,siteFocused:!1,user_codeFocused:!1,passwordFocused:!1,isEmailHovered:!1,errorMessage:null}},methods:{...(0,u.nv)("suppliers",["addSupplier"]),async onSubmit(){const e=new FormData;e.append("name",this.name),e.append("postal",this.postal),e.append("address",this.address),e.append("city",this.city),e.append("country",this.country),this.logo&&e.append("logo",this.logo),e.append("phone",this.phone),e.append("site",this.site),e.append("email",this.email),e.append("user_code",this.user_code),e.append("password",this.password),e.append("is_activate",this.is_activate);try{await this.addSupplier(e),this.$emit("supplier-added-successfully"),this.resetForm()}catch(t){console.error("Error adding supplier:",t)}},resetForm(){this.name="",this.postal="",this.address="",this.city="",this.country="",this.logo=null,this.phone="",this.email="",this.site="",this.user_code="",this.password="",this.is_activate=!0},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},redirectToLogin(){this.$router.push("/login")},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1},handleFileChange(e){this.logo=e}},computed:{...(0,u.Se)("suppliers",["currentSupplier"])},watch:{currentSupplier(e){e&&(this.name=e.name,this.address=e.address,this.postal=e.postal,this.city=e.city,this.country=e.country,this.phone=e.phone,this.site=e.site,this.email=e.email,this.user_code=e.user_code,this.password=e.password,this.logo=e.logo)}}},ll=o(5588),sl=o(9505),nl=o(1343),rl=o(6967);const il=(0,p.Z)(al,[["render",ol]]);var cl=il;U()(al,"components",{QForm:Ve.Z,QStepper:ll.Z,QStep:sl.Z,QInput:Ce.Z,QIcon:q.Z,QStepperNavigation:nl.Z,QBtn:v.Z,QFile:rl.Z,QBtnGroup:K.Z,QField:xe.Z});var ul={components:{CreateSupplierStepper:cl},data(){return{error:null,formSubmitted:!1}},methods:{saveSupplier(e){console.log(e),Je.post("PPH/suppliers/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{this.formSubmitted=!0,console.log(e.data)})).catch((e=>{console.error(e)}))}}};const dl=(0,p.Z)(ul,[["render",Aa]]);var ml=dl;U()(ul,"components",{QPage:De.Z});var pl=o.p+"img/blanc.2f72339c.jpg";const fl={class:"row justify-center"},hl={class:"col-md-12"},wl={class:"row"},gl={class:"col-1 q-ml-sm q-mt-sm"},_l={class:"col-2 q-ml-lg offset-8"},yl={class:"row q-mt-sm"},vl={class:"col col-12 justify-center"},bl={class:"row justify-start"},kl=["onClick"],Wl=["onClick"],Cl=["href"];function xl(e,t,o,s,n,r){const i=(0,l.up)("q-btn"),c=(0,l.up)("router-link"),u=(0,l.up)("q-icon"),d=(0,l.up)("q-input"),m=(0,l.up)("q-spinner-rings"),p=(0,l.up)("q-img"),f=(0,l.up)("q-item-section"),h=(0,l.up)("q-item"),w=(0,l.up)("q-list"),_=(0,l.up)("q-menu"),y=(0,l.up)("q-card"),v=(0,l.up)("q-page"),b=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(v,null,{default:(0,l.w5)((()=>[(0,l._)("div",fl,[(0,l._)("div",hl,[(0,l._)("div",wl,[(0,l._)("div",gl,[(0,l.Wm)(c,{to:"/supplier/"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{round:"",class:"glossy btn-grey-primary-pph",icon:"add"})])),_:1})]),(0,l._)("div",_l,[(0,l.Wm)(d,{ref:"searchInput",modelValue:n.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchQuery=e),label:"Recherche...",onInput:r.filterSuppliers,color:"cyan-4",onMouseover:t[1]||(t[1]=e=>r.changeLabelColor("searchInput","#ffb74d")),onMouseleave:t[2]||(t[2]=e=>r.changeLabelColor("searchInput","")),onFocus:t[3]||(t[3]=e=>r.onFocus("searchQuery","#4dd0e1")),onBlur:t[4]||(t[4]=e=>r.onBlur("searchQuery"))},{before:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"search",color:"cyan-4"})])),_:1},8,["modelValue","onInput"])])]),(0,l._)("div",yl,[(0,l._)("div",vl,[(0,l._)("div",bl,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.filteredSuppliers,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"col-1 q-pa-sm",key:t.id,onClick:e=>r.redirectToLink(t.id)},[(0,l.Wm)(y,{bordered:"",class:(0,g.C_)(["card-mini justify-center items-center text-center relative",{"bd-red-4":!t.is_activate}])},{default:(0,l.w5)((()=>[(0,l._)("div",{onClick:e=>r.redirectToLink(t.id),class:"card-content"},[(0,l.Wm)(p,{class:"logo-card-mini",src:pl,loading:"lazy","spinner-color":"red-4",alt:t.name},{loading:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"red-4"})])),default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"factory",size:"md",color:"cyan-4",class:"icon-background"}),(0,l._)("div",{class:(0,g.C_)(["absolute-top hover-effect q-my-none",{"text-cyan-1":t.is_activate,"text-red-4":!t.is_activate}])},(0,g.zw)(t.name),3)])),_:2},1032,["alt"]),(0,l.Wm)(i,{flat:"",color:"white",class:"absolute-top-right hover-effect q-pa-none q-ma-none",icon:"more_vert",onClick:(0,a.iM)((o=>e.toggleMenu(t.id)),["stop"])},null,8,["onClick"]),(0,l.Wm)(_,{fit:"",anchor:"top right",self:"bottom middle",modelValue:e.showMenu[t.id],"onUpdate:modelValue":o=>e.showMenu[t.id]=o},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(h,{clickable:"",onClick:(0,a.iM)((o=>e.deleteSupplier(t.id)),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Supprimer")])),_:1})])),_:2},1032,["onClick"])),[[b]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(h,{clickable:"",onClick:(0,a.iM)((o=>e.toggleActivation({supplierId:t.id,isActive:t.is_activate})),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.is_activate?"Désactiver":"Activer"),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[b]])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])],8,Wl),(0,l.Wm)(i,{class:"absolute-bottom-right hover-effect q-pa-none q-ma-none",color:"cyan-4",round:"",flat:"",dense:"",icon:"info",onClick:(0,a.iM)((o=>e.toggleInfo(t.id)),["stop"])},null,8,["onClick"]),(0,l.Wm)(_,{fit:"",anchor:"bottom right",self:"top middle",modelValue:e.expanded[t.id],"onUpdate:modelValue":o=>e.expanded[t.id]=o},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[t.phone?((0,l.wg)(),(0,l.j4)(h,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Téléphone : ")])),_:1}),(0,l.Wm)(f,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.phone),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),t.email?((0,l.wg)(),(0,l.j4)(h,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" E-mail : ")])),_:1}),(0,l.Wm)(f,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.email),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),t.site?((0,l.wg)(),(0,l.j4)(h,{key:2,clickable:"",class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Site : ")])),_:1}),(0,l._)("a",{href:t.site,target:"_blank",rel:"noopener noreferrer",class:"pph-link"},[(0,l.Wm)(f,{class:"row items-center text-grey-7 hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.site),1)])),_:2},1024)],8,Cl)])),_:2},1024)):(0,l.kq)("",!0),t.user_code?((0,l.wg)(),(0,l.j4)(h,{key:3},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Code utilisateur : ")])),_:1}),(0,l.Wm)(f,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.user_code),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),t.password?((0,l.wg)(),(0,l.j4)(h,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Mot de passe : ")])),_:1}),(0,l.Wm)(f,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.password),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["class"])],8,kl)))),128))])])])])])])),_:1})}var ql={name:"SuppliersCards",data(){return{searchQuery:""}},computed:{...(0,u.Se)("suppliers",["allSuppliers","showMenu","expanded"]),filteredSuppliers(){return this.searchQuery?this.allSuppliers.filter((e=>e.name.toLowerCase().startsWith(this.searchQuery.toLowerCase()))):this.allSuppliers}},created(){this.loadSuppliers(),console.log(this.allSuppliers)},methods:{...(0,u.nv)("suppliers",["loadSuppliers","toggleActivation","deleteSupplier","toggleMenu","toggleInfo"]),filterSuppliers(){return this.searchQuery?this.allSuppliers.filter((e=>e.name.toLowerCase().startsWith(this.searchQuery.toLowerCase()))):this.allSuppliers},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1},redirectToLink(e){this.$router.push(`/supplier/${e}`)}}},Sl=o(4711),Ml=o(7332);const Ul=(0,p.Z)(ql,[["render",xl]]);var Fl=Ul;U()(ql,"components",{QPage:De.Z,QBtn:v.Z,QInput:Ce.Z,QIcon:q.Z,QCard:Fe.Z,QImg:Sl.Z,QSpinnerRings:Ml.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z,QField:xe.Z}),U()(ql,"directives",{ClosePopup:S.Z});const Il={class:"row justify-center"},Vl={class:"col-12"},Pl=(0,l._)("h5",{class:"text-cyan-4 q-mb-lg text-center"},"Profil utilisateur",-1);function El(e,t,o,a,s,n){const r=(0,l.up)("UserProfilForm"),i=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(i,{class:"container"},{default:(0,l.w5)((()=>[(0,l._)("div",Il,[(0,l._)("div",Vl,[Pl,(0,l.Wm)(r)])])])),_:1})}const Ll={class:"row justify-center items-center"},Ql={class:"row justify-center q-my-md"},jl={class:"col-2"};function Tl(e,t,o,s,n,r){const i=(0,l.up)("CustomInput"),c=(0,l.up)("q-card-section"),u=(0,l.up)("CustomSelect"),d=(0,l.up)("q-card"),m=(0,l.up)("q-icon"),p=(0,l.up)("q-btn"),f=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(f,{onSubmit:(0,a.iM)(r.handleSubmit,["prevent"]),enctype:"multipart/form-data"},{default:(0,l.w5)((()=>[(0,l._)("div",Ll,[(0,l.Wm)(d,{class:"col-6 shadow-5",style:{"background-color":"#e6e5e8"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"q-mb-lg justify-center row"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"col-4",inputModel:e.userFormData.last_name,"onUpdate:inputModel":t[0]||(t[0]=t=>e.updateField("userFormData","last_name",t)),label:"Nom",inputRef:"last_nameRef",iconName:"portrait",modelName:"last_name"},null,8,["inputModel"]),(0,l.Wm)(i,{class:"col-4 offset-2",inputModel:e.userFormData.first_name,"onUpdate:inputModel":t[1]||(t[1]=t=>e.updateField("userFormData","first_name",t)),label:"Prénom",inputRef:"first_nameRef",iconName:"portrait",modelName:"first_name"},null,8,["inputModel"])])),_:1}),(0,l.Wm)(c,{class:"q-mb-lg justify-center row"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"col-4",inputModel:e.userFormData.email,"onUpdate:inputModel":t[2]||(t[2]=t=>e.updateField("userFormData","email",t)),label:"E-mail",inputRef:"emailRef",iconName:"email",modelName:"email"},null,8,["inputModel"]),(0,l.Wm)(i,{class:"col-4 offset-2",inputModel:e.userFormData.user_name,"onUpdate:inputModel":t[3]||(t[3]=t=>e.updateField("userFormData","user_name",t)),label:"Nom d'utilisateur",inputRef:"usernameRef",iconName:"portrait",modelName:"username"},null,8,["inputModel"])])),_:1}),(0,l.Wm)(c,{class:"q-mb-lg row"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"col-4 offset-1",label:"Fonction",options:n.userFunctions,inputRef:"dropdownInput",inputName:"dropdown",iconName:"badge",onInput:e.onSelectChange},null,8,["options","onInput"])])),_:1})])),_:1})]),(0,l._)("div",Ql,[(0,l._)("div",jl,[(0,l.Wm)(p,{type:"submit",class:"q-mt-lg glossy full-width btn-grey-success-pph"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"q-mx-sm",name:"library_add"}),(0,l.Uk)(" Enregistrer ")])),_:1})])])])),_:1},8,["onSubmit"])}function Dl(e,t,o,a,s,n){const r=(0,l.up)("q-icon"),i=(0,l.up)("q-input");return(0,l.wg)(),(0,l.j4)(i,{clearable:"",class:"my-0",value:o.inputModel,onInput:n.updateValue,ref:o.inputRef,label:o.label,color:"cyan-4",onMouseover:t[0]||(t[0]=e=>n.changeLabelColor(o.inputRef,o.hoverColor)),onMouseleave:t[1]||(t[1]=e=>n.changeLabelColor(o.inputRef,"")),onFocus:t[2]||(t[2]=e=>n.onFocus(o.modelName,o.focusColor)),onBlur:t[3]||(t[3]=e=>n.onBlur(o.modelName))},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:o.iconName,color:"cyan-4"},null,8,["name"])])),_:1},8,["value","onInput","label"])}var Zl={data(){return{isFocused:!1}},props:{inputModel:{type:[String,Number],default:"",required:!0},label:{type:String,required:!0},inputRef:{type:String,required:!0},iconName:{type:String,required:!0},modelName:{type:String,required:!0},hoverColor:{type:String,default:"#ffb74d"},focusColor:{type:String,default:"#4dd0e1"}},methods:{updateValue(e){console.log("updateValue is called with:",e.target.value),this.$emit("update:inputModel",e.target.value)},changeLabelColor(e,t){this.$refs[e].$el.querySelector(".q-field__label").style.color=t},onFocus(){this.isFocused=!0,this.$emit("update:focused",!0)},onBlur(e){this.$emit("blur",e),this.isFocused=!1,this.$emit("update:focused",!1)}}};const Nl=(0,p.Z)(Zl,[["render",Dl]]);var zl=Nl;function Rl(e,t,o,a,s,n){const r=(0,l.up)("q-icon"),i=(0,l.up)("q-select");return(0,l.wg)(),(0,l.j4)(i,{class:"my-0 custom-select",ref:o.inputRef,label:o.label,options:o.options,modelValue:s.selectedValue,"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedValue=e),onMouseover:t[1]||(t[1]=e=>n.changeLabelColor(o.inputRef,o.hoverColor)),onMouseleave:t[2]||(t[2]=e=>n.changeLabelColor(o.inputRef,"")),onFocus:t[3]||(t[3]=e=>n.onFocus(o.inputName,o.focusColor)),onBlur:t[4]||(t[4]=e=>n.onBlur(o.inputName))},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:o.iconName,color:"cyan-4"},null,8,["name"])])),_:1},8,["label","options","modelValue"])}U()(Zl,"components",{QInput:Ce.Z,QIcon:q.Z,QField:xe.Z});var Ol={props:{iconName:String,label:String,options:Array,hoverColor:{type:String,default:"#ffb74d"},focusColor:{type:String,default:"#4dd0e1"},inputRef:String,inputName:String},data(){return{selectedValue:null}},methods:{changeLabelColor(e,t){this.$refs[e].$el.querySelector(".q-field__label").style.color=t},onFocus(e,t){this.$emit("focus",e,t)},onBlur(e){this.$emit("blur",e)}},watch:{selectedValue(e){this.$emit("input",e)}}},Al=o(587);const Bl=(0,p.Z)(Ol,[["render",Rl],["__scopeId","data-v-e17006a8"]]);var $l=Bl;U()(Ol,"components",{QSelect:Al.Z,QIcon:q.Z,QField:xe.Z,QItem:W.Z});var Hl={components:{CustomInput:zl,CustomSelect:$l},data(){return{userFunctions:[]}},computed:{...(0,u.rn)("forms",["userFormData"])},mounted(){Je.get("/PPH/user-functions/").then((e=>{console.log(e.data),this.userFunctions=e.data.map((e=>({label:e.title,value:e.title})))})).catch((e=>{console.error("Erreur lors de la récupération des fonctions utilisateur:",e)}))},methods:{...(0,u.nv)("forms",["updateField"]),async handleSubmit(){try{const e=await Je.post("PPH/user/update/",this.userFormData);console.log("Réponse API:",e.data),this.$store.dispatch("notifications/showNotification",{message:"Soumission réussie",type:"success"}),this.userFormData={email:"",password:""}}catch(e){console.error("Erreur lors de la soumission du formulaire:",e),this.$store.dispatch("notifications/showNotification",{message:"Erreur lors de la soumission du formulaire",type:"error"}),this.$store.commit("errorModule/SET_ERROR",e.response?.data?.detail||"Une erreur est survenue.")}}}};const Gl=(0,p.Z)(Hl,[["render",Tl]]);var Yl=Gl;U()(Hl,"components",{QForm:Ve.Z,QCard:Fe.Z,QCardSection:Ie.Z,QBtn:v.Z,QIcon:q.Z});var Kl={components:{UserProfilForm:Yl},data(){return{error:null,formSubmitted:!1}}};const Jl=(0,p.Z)(Kl,[["render",El]]);var Xl=Jl;U()(Kl,"components",{QPage:De.Z});const es={class:"row justify-center"},ts={class:"col-12"},os=(0,l._)("h5",{class:"text-cyan-4 q-mb-lg text-center"},"Mon compte utilisateur",-1);function as(e,t,o,a,s,n){const r=(0,l.up)("UserAccountForm"),i=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(i,{class:"container"},{default:(0,l.w5)((()=>[(0,l._)("div",es,[(0,l._)("div",ts,[os,(0,l.Wm)(r,{userData:this.$store.getters.user},null,8,["userData"])])])])),_:1})}const ls={class:"row justify-center items-center"},ss={class:"row justify-center q-my-md"},ns={class:"col-2"};function rs(e,t,o,s,n,r){const i=(0,l.up)("CustomInput"),c=(0,l.up)("q-card-section"),u=(0,l.up)("CustomSelect"),d=(0,l.up)("q-card"),m=(0,l.up)("q-icon"),p=(0,l.up)("q-btn"),f=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(f,{onSubmit:(0,a.iM)(r.onSubmit,["prevent"]),enctype:"multipart/form-data"},{default:(0,l.w5)((()=>[(0,l._)("div",ls,[(0,l.Wm)(d,{class:"col-6 shadow-5",style:{"background-color":"#e6e5e8"}},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"q-mb-lg justify-center row"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"col-4",inputModel:n.last_name,"onUpdate:inputModel":t[0]||(t[0]=e=>n.last_name=e),label:"Nom",inputRef:"last_nameInput",iconName:"portrait",modelName:"last_name"},null,8,["inputModel"]),(0,l.Wm)(i,{class:"col-4 offset-2",inputModel:n.first_name,"onUpdate:inputModel":t[1]||(t[1]=e=>n.first_name=e),label:"Prénom",inputRef:"first_nameInput",iconName:"portrait",modelName:"first_name"},null,8,["inputModel"])])),_:1}),(0,l.Wm)(c,{class:"q-mb-lg justify-center row"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"col-4",inputModel:n.email,"onUpdate:inputModel":t[2]||(t[2]=e=>n.email=e),label:"E-mail",inputRef:"emailInput",iconName:"email",modelName:"email"},null,8,["inputModel"]),(0,l.Wm)(i,{class:"col-4 offset-2",inputModel:e.user_name,"onUpdate:inputModel":t[3]||(t[3]=t=>e.user_name=t),label:"Nom d'utilisateur",inputRef:"usernameInput",iconName:"portrait",modelName:"username"},null,8,["inputModel"])])),_:1}),(0,l.Wm)(c,{class:"q-mb-lg row"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"col-4 offset-1",label:"Fonction",options:e.userFunctions,inputRef:"dropDownInput",inputName:"dropDown",iconName:"badge",onInput:e.onSelectChange},null,8,["options","onInput"])])),_:1})])),_:1})]),(0,l._)("div",ss,[(0,l._)("div",ns,[(0,l.Wm)(p,{type:"submit",class:"q-mt-lg glossy full-width btn-grey-success-pph"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"q-mx-sm",name:"library_add"}),(0,l.Uk)(" Enregistrer ")])),_:1})])])])),_:1},8,["onSubmit"])}var is={components:{CustomInput:zl,CustomSelect:$l},props:{userData:Object},data(){return{last_name:this.userData.lastName,first_name:this.userData.firstName,email:this.userData.email,username:this.userData.username,function:this.userData.function}},computed:{...(0,u.Se)({user:"user"})},watch:{user(e){this.last_name=e.lastName,this.first_name=e.firstName,this.email=e.email,this.username=e.username,this.function=e.function}},mounted(){Je.get("/PPH/user-functions/").then((e=>{console.log(e.data),this.userFunctions=e.data.map((e=>({label:e.title,value:e.title})))})).catch((e=>{console.error("Erreur lors de la récupération des fonctions utilisateur:",e)}))},methods:{onSubmit(){this.$store.commit("SET_USER_DATA",{lastName:this.last_name,firstName:this.first_name,email:this.email,userName:this.username,function:this.function})}}};const cs=(0,p.Z)(is,[["render",rs]]);var us=cs;U()(is,"components",{QForm:Ve.Z,QCard:Fe.Z,QCardSection:Ie.Z,QBtn:v.Z,QIcon:q.Z});var ds={components:{UserAccountForm:us},data(){return{error:null,formSubmitted:!1}},mounted(){this.$store.dispatch("fetchUserData")}};const ms=(0,p.Z)(ds,[["render",as]]);var ps=ms;U()(ds,"components",{QPage:De.Z});const fs={class:"row justify-center"},hs={class:"col-md-12"},ws={class:"row"},gs={class:"col-1 q-mx-sm q-mt-sm"},_s={class:"row q-mt-sm"},ys={class:"col col-12 justify-center"},vs={class:"row justify-start"},bs=["onClick"],ks=["onClick"];function Ws(e,t,o,s,n,r){const i=(0,l.up)("q-btn"),c=(0,l.up)("router-link"),u=(0,l.up)("q-img"),d=(0,l.up)("q-item-section"),m=(0,l.up)("q-item"),p=(0,l.up)("q-list"),f=(0,l.up)("q-menu"),h=(0,l.up)("q-card"),w=(0,l.up)("q-page"),_=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",fs,[(0,l._)("div",hs,[(0,l._)("div",ws,[(0,l._)("div",gs,[(0,l.Wm)(c,{to:"/user/"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{round:"",class:"glossy btn-grey-primary-pph",icon:"add"})])),_:1})])]),(0,l._)("div",_s,[(0,l._)("div",ys,[(0,l._)("div",vs,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.allUsers,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"col-1 q-pa-sm",key:t.id,onClick:e=>r.redirectToLink(t.id)},[(0,l.Wm)(h,{bordered:"",class:(0,g.C_)(["card-mini justify-center items-center text-center relative",{"bd-red-4":!t.is_active}])},{default:(0,l.w5)((()=>[(0,l._)("div",{onClick:e=>r.redirectToLink(t.id),class:"card-content"},[(0,l.Wm)(u,{class:"logo-card-mini",src:t.function.logo,alt:t.function.title},{default:(0,l.w5)((()=>[(0,l._)("div",{class:(0,g.C_)(["absolute-top hover-effect q-my-none text-no-wrap",{"text-cyan-1":t.is_active,"text-red-4":!t.is_active}])},(0,g.zw)(t.last_name)+" "+(0,g.zw)(t.first_name[0]),3)])),_:2},1032,["src","alt"]),(0,l.Wm)(i,{flat:"",color:"white",class:"absolute-top-right hover-effect q-pa-none q-ma-none",icon:"more_vert",onClick:(0,a.iM)((o=>e.toggleMenu(t.id)),["stop"])},null,8,["onClick"]),(0,l.Wm)(f,{fit:"",anchor:"top right",self:"bottom middle",modelValue:e.showMenu[t.id],"onUpdate:modelValue":o=>e.showMenu[t.id]=o},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{clickable:"",onClick:(0,a.iM)((o=>e.deleteUser(t.id)),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Supprimer")])),_:1})])),_:2},1032,["onClick"])),[[_]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{clickable:"",onClick:(0,a.iM)((o=>e.toggleActivation({userId:t.id,isActive:t.is_active})),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.is_active?"Désactiver":"Activer"),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[_]])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])],8,ks),(0,l.Wm)(i,{class:"absolute-bottom-right hover-effect q-pa-none q-ma-none",color:"cyan-4",round:"",flat:"",dense:"",icon:"info",onClick:(0,a.iM)((o=>(e.toggleInfo(t.id),e.showMenuLog(t.id))),["stop"])},null,8,["onClick"]),(0,l.Wm)(f,{fit:"",anchor:"bottom right",self:"top middle",modelValue:e.expanded[t.id],"onUpdate:modelValue":o=>e.expanded[t.id]=o},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Nom : ")])),_:1}),(0,l.Wm)(d,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.last_name),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Prénom : ")])),_:1}),(0,l.Wm)(d,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.first_name),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" E-mail : ")])),_:1}),(0,l.Wm)(d,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.email),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Fonction : ")])),_:1}),(0,l.Wm)(d,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.function.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["class"])],8,bs)))),128))])])])])])])),_:1})}var Cs={name:"UsersCards",computed:{...(0,u.Se)("users",["allUsers","showMenu","expanded"])},created(){this.loadUsers(),console.log(this.allUsers)},methods:{...(0,u.nv)("users",["loadUsers","toggleActivation","deleteUser","toggleMenu","toggleInfo"]),redirectToLink(e){this.$router.push(`/user/${e}`)}}};const xs=(0,p.Z)(Cs,[["render",Ws]]);var qs=xs;U()(Cs,"components",{QPage:De.Z,QBtn:v.Z,QCard:Fe.Z,QImg:Sl.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z}),U()(Cs,"directives",{ClosePopup:S.Z});const Ss={class:"row justify-center q-pt-xl"},Ms=(0,l._)("h5",{class:"text-cyan-4"}," Mentions légales ",-1),Us=(0,l._)("p",{class:"text-blue-grey-7"},[(0,l.Uk)(" Le présent site www.pph.fr est la propriété de la société HopDigit SAS, société par action simplifiée au capital de 21.870 euros."),(0,l._)("br"),(0,l.Uk)(" Inscription au RCS de Cherbourg en Cotentin sous le n° 817 698 061"),(0,l._)("br"),(0,l.Uk)(" Siège social: 3 le quesnay, 50690 Couville, France"),(0,l._)("br"),(0,l.Uk)(" Adresse mail: contact@pph.fr"),(0,l._)("br"),(0,l._)("br"),(0,l.Uk)(" Directeur de publication : Monsieur Capelle Jérémy ayant la qualité de Président de la société PPH."),(0,l._)("br"),(0,l._)("br"),(0,l.Uk)(" Numéro de la TVA: FR85 817 698 061"),(0,l._)("br"),(0,l._)("br"),(0,l.Uk)(" Déclaration auprès de la CNIL sous les numéros1850968v0, 1850964v0 & 2070289-V1"),(0,l._)("br"),(0,l._)("br"),(0,l.Uk)(" Hébergeurs: OVH & Hébergement données santé: A2COM (Hébergeur français souverain certifié HDS – Activités 1-2-3-4-5-6 – ZA Rive Ouest, 1 Bd du Trieux, 35740 Pacé) ")],-1);function Fs(e,t,o,a,s,n){const r=(0,l.up)("q-card-section"),i=(0,l.up)("q-card");return(0,l.wg)(),(0,l.iD)("div",Ss,[(0,l.Wm)(i,{class:"col-10 q-mt-xl",style:{"background-color":"#e6e5e8"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Ms,Us])),_:1})])),_:1})])}var Is={name:"MentionsLegales"};const Vs=(0,p.Z)(Is,[["render",Fs]]);var Ps=Vs;U()(Is,"components",{QCard:Fe.Z,QCardSection:Ie.Z});const Es={class:"row justify-center q-pt-xl"},Ls=(0,l._)("h5",{class:"text-cyan-4"}," Conditions générales d'utilisation ",-1),Qs=(0,l._)("h6",{class:"text-cyan-4"}," ARTICLE 1 : DISPOSITIONS GENERALES ",-1),js=(0,l._)("p",{class:"text-blue-grey-7"},[(0,l.Uk)(" Les présentes conditions générales s’appliquent dans leur intégralité, sans restriction ni réserve, à l’ensemble des services proposés (ci-après définis et désignés « Services ») aux Etablissements (ci-après définis), par la société HopDigit, Société par Actions Simplifiée au capital de 21.890 € immatriculée au R.C.S de Cherbourg en Cotentin sous le numéro 817 698 061 sise 20 quai Duguay Trouin, 35000 Rennees (ci-après « HopDigit »), notamment via son site internet https://www.hopdigit.fr/ (ci-après « Site Internet »)."),(0,l._)("br"),(0,l._)("br"),(0,l.Uk)(" Elles en constituent les conditions essentielles et déterminantes et prévalent sur toutes conditions générales et/ou tous autres documents émanant de l’Etablissement, quels qu’en soient les termes."),(0,l._)("br"),(0,l.Uk)(" Aussi, toute demande de souscription à une offre de Services proposée par HopDigit et/ou l’utilisation des Services implique l’acceptation sans réserve des présentes conditions générales. Les présentes conditions générales peuvent être modifiées à tout moment par Hopdigit, notamment en cas d’ajustement tarifaire, d’évolutions technologiques ou réglementaires. Dans cette hypothèse, les conditions générales modifiées seront applicables à toute relation contractuelle en cours et à venir. Chacune des stipulations des présentes conditions générales s’appliquera dans toute la mesure autorisée par la loi et toute nullité en tout ou partie d’une clause sera sans influence sur le reste de cette clause et l’ensemble des conditions générales. ")],-1),Ts=(0,l._)("h6",{class:"text-cyan-4"},"ARTICLE 2 : CHAMP D’APPLICATION SERVICES",-1),Ds=(0,l._)("p",{class:"text-blue-grey-7"},[(0,l.Uk)(" MAPUI LABS met à disposition par le biais du Site Internet et moyennant un abonnement gratuit ou payant selon la formule, une plateforme (ci-après : « Plateforme ») permettant notamment à l’Etablissement, en fonction des différentes fonctionnalités choisies :"),(0,l._)("br"),(0,l.Uk)(" – de mettre à disposition, prêter et échanger des médicaments, dispositifs médicaux ou autres préparations (ci-après « Médicaments ») avec d’autres Etablissements,"),(0,l._)("br"),(0,l.Uk)(" – d’être alerté par notification ou email d’informations provenant d’autres Etablissements, notamment concernant la disponibilité et la péremption de Médicaments,"),(0,l._)("br"),(0,l.Uk)(" – d’accéder à des statistiques et compilations de données réalisée par MAPUI LABS (ci-après : « Données »),"),(0,l._)("br"),(0,l.Uk)(" – d’échanger avec les autres Etablissements et leurs Utilisateurs (ci-après définis) inscrits sur la Plateforme notamment via le forum (ci-après « Forum »)"),(0,l._)("br")],-1),Zs=(0,l._)("h6",{class:"text-cyan-4"},"ETABLISSEMENTS",-1),Ns=(0,l._)("p",{class:"text-blue-grey-7"}," Au regard du contenu et de leurs finalités, la Plateforme et les Services proposés sont exclusivement destiné aux pharmacies des hôpitaux et cliniques agissant dans le cadre de leur activité professionnelle (ci-après « Etablissements ») et à leur personnel habilité à y accéder pour un usage professionnel (ci-après « Utilisateurs »). ",-1);function zs(e,t,o,a,s,n){const r=(0,l.up)("q-card-section"),i=(0,l.up)("q-card");return(0,l.wg)(),(0,l.iD)("div",Es,[(0,l.Wm)(i,{class:"col-10 q-mt-xl",style:{"background-color":"#e6e5e8"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[Ls,Qs,js,Ts,Ds,Zs,Ns])),_:1})])),_:1})])}var Rs={name:"CdtGalUtl"};const Os=(0,p.Z)(Rs,[["render",zs]]);var As=Os;U()(Rs,"components",{QCard:Fe.Z,QCardSection:Ie.Z});var Bs=o.p+"img/commande.b3bf3770.jpg",$s=o.p+"img/livrer.4dff3f2b.jpg",Hs=o.p+"img/demande3.593b0d7f.jpg",Gs=o.p+"img/controle2.ee12c8bc.jpg",Ys=o.p+"img/health_hazard.61e5836e.png";const Ks={class:"row q-mx-md justify-center"},Js={class:"col-md-12"},Xs=(0,l._)("div",{class:"row q-mt-xs"},[(0,l._)("div",{class:"col-6 text-h6 text-center text-cyan-4"}," Matières premières "),(0,l._)("div",{class:"col-6 text-h6 text-center text-cyan-4"}," Préparations ")],-1),en={class:"row justify-center"},tn={class:"col-5"},on={class:"row"},an={class:"col-3 card-home offset-1 q-mt-sm"},ln={class:"absolute-top text-subtitle2 text-center hover-effect"},sn={class:"text-h5 text-center text-cyan-4"},nn={class:"col-3 card-home offset-2 q-mt-sm"},rn={class:"absolute-top text-subtitle2 text-center hover-effect"},cn={class:"text-h5 text-center text-cyan-4"},un={class:"col-5"},dn={class:"row"},mn={class:"col-3 card-home offset-3 q-ml-sm q-mt-sm"},pn={class:"absolute-top text-subtitle2 text-center hover-effect"},fn={class:"text-h5 text-center text-cyan-4"},hn={class:"text-subtitle2 text-center"},wn=(0,l._)("br",null,null,-1),gn={class:"q-ma-md"},_n={class:"q-pa-md"},yn=(0,l._)("div",{class:"text-h6 text-center text-orange-4"},"Demandes en cours",-1),vn={key:0},bn={class:"text-subtitle1 text-center text-cyan-4"},kn={class:"text-bold"},Wn=(0,l._)("br",null,null,-1),Cn={class:"text-italic"},xn={class:"row justify-center"},qn=(0,l._)("br",null,null,-1),Sn={key:1},Mn=(0,l._)("p",null,"Aucune demande pour cette date.",-1),Un=[Mn],Fn={class:"col-3 card-home offset-2 q-mt-sm"},In={class:"absolute-top text-subtitle2 text-center hover-effect"},Vn={class:"text-h5 text-center text-cyan-4"},Pn={class:"row justify-center q-mx-md q-pb-lg q-mt-lg bd-radius-10 bg-op-8",style:{"background-color":"#1a2946"}},En=(0,l._)("div",{class:"col-12 text-center"},[(0,l._)("div",{class:"text-h6 text-cyan-4"},"Tableau de bord")],-1),Ln={class:"col-md-5"},Qn={class:"text-center text-cyan-1"},jn={class:"row justify-center"},Tn=(0,l._)("br",null,null,-1),Dn=(0,l._)("div",{class:"text-center text-cyan-1"},"Produits en attente de commande",-1),Zn={class:"row justify-center"},Nn=(0,l._)("div",{class:"text-center text-cyan-1"},"Produits en attente de livraison",-1),zn={class:"row justify-center"},Rn={class:"col-md-5 offset-1"},On={class:"text-center text-cyan-1"},An={class:"row justify-center"};function Bn(e,t,o,a,s,n){const r=(0,l.up)("q-spinner-rings"),i=(0,l.up)("q-img"),c=(0,l.up)("q-tooltip"),u=(0,l.up)("q-btn"),d=(0,l.up)("router-link"),m=(0,l.up)("q-btn-group"),p=(0,l.up)("q-card"),f=(0,l.up)("q-toolbar"),h=(0,l.up)("q-date"),w=(0,l.up)("q-separator"),_=(0,l.up)("q-scroll-area"),y=(0,l.up)("q-splitter"),v=(0,l.up)("q-dialog"),b=(0,l.up)("q-item-label"),k=(0,l.up)("q-item-section"),W=(0,l.up)("font-awesome-icon"),C=(0,l.up)("q-badge"),x=(0,l.up)("q-item"),q=(0,l.up)("q-list"),S=(0,l.up)("q-card-section"),M=(0,l.up)("q-carousel-slide"),U=(0,l.up)("q-carousel"),F=(0,l.up)("q-toggle"),I=(0,l.up)("apexchart"),V=(0,l.up)("q-page"),P=(0,l.up)("atom-spinner"),E=(0,l.Q2)("ripple");return s.loadedPage?((0,l.wg)(),(0,l.j4)(V,{key:0},{default:(0,l.w5)((()=>[(0,l._)("div",Ks,[(0,l._)("div",Js,[Xs,(0,l._)("div",en,[(0,l._)("div",tn,[(0,l._)("div",on,[(0,l._)("div",an,[(0,l.Wm)(p,{bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{src:Bs,loading:"lazy","spinner-color":"red-4"},{loading:(0,l.w5)((()=>[(0,l.Wm)(r,{color:"red-4"})])),default:(0,l.w5)((()=>[(0,l._)("div",ln,[(0,l.Uk)(" En attente commande "),(0,l._)("div",sn,(0,g.zw)(e.matieresCdeCount),1)])])),_:1}),(0,l.Wm)(m,{class:"absolute-bottom-right q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{to:"/commande/"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"visibility"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-blue-grey-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Voir la liste de commande")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(u,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"print"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-blue-grey-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Imprimer la liste de commande")])),_:1})])),_:1}),(0,l.Wm)(u,{class:"q-pa-none hover-effect",flat:"",color:"green-4",icon:"check_circle",onClick:e.validateCommande},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-blue-grey-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Mettre les produits en attente de livraison")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})]),(0,l._)("div",nn,[(0,l.Wm)(p,{bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{src:$s,loading:"lazy","spinner-color":"red-4"},{loading:(0,l.w5)((()=>[(0,l.Wm)(r,{color:"red-4"})])),default:(0,l.w5)((()=>[(0,l._)("div",rn,[(0,l.Uk)(" En attente livraison "),(0,l._)("div",cn,(0,g.zw)(e.matieresLivraisonCount),1)])])),_:1}),(0,l.Wm)(m,{class:"absolute-bottom-right q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{to:"/reception/"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"visibility"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-blue-grey-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Voir les produits")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])]),(0,l._)("div",un,[(0,l._)("div",dn,[(0,l._)("div",mn,[(0,l.Wm)(p,{bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{src:Hs,loading:"lazy","spinner-color":"red-4"},{loading:(0,l.w5)((()=>[(0,l.Wm)(r,{color:"red-4"})])),default:(0,l.w5)((()=>[(0,l._)("div",pn,[(0,l.Uk)(" En attente préparation "),(0,l._)("div",fn,(0,g.zw)(e.nombreDemandes),1),(0,l._)("div",hn,[(0,l.Uk)((0,g.zw)(e.nombreDemandesProche)+" pour le ",1),wn,(0,l.Uk)(" "+(0,g.zw)(e.demandeProche.dateFormatee),1)])])])),_:1}),(0,l.Wm)(m,{class:"absolute-bottom-right q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"calendar_month",onClick:n.openCalendar},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-blue-grey-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Voir la plannification")])),_:1})])),_:1},8,["onClick"])])),_:1}),(0,l.Wm)(v,{modelValue:s.calendarDialog,"onUpdate:modelValue":t[3]||(t[3]=e=>s.calendarDialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",class:"text-cyan-4 hover-effect",label:"Nouvelle demande"}),(0,l.Wm)(u,{flat:"",class:"text-cyan-4 hover-effect",label:"Toutes les demandes"}),(0,l.Wm)(u,{flat:"",class:"text-cyan-4 hover-effect absolute-right",icon:"close",onClick:t[0]||(t[0]=e=>s.calendarDialog=!1)})])),_:1}),(0,l.Wm)(y,{modelValue:s.splitterModel,"onUpdate:modelValue":t[2]||(t[2]=e=>s.splitterModel=e)},{before:(0,l.w5)((()=>[(0,l._)("div",gn,[(0,l.Wm)(h,{modelValue:s.dateCalendar,"onUpdate:modelValue":t[1]||(t[1]=e=>s.dateCalendar=e),events:n.formatDemandesDates,"event-color":"orange",color:"cyan-4"},null,8,["modelValue","events"])])])),after:(0,l.w5)((()=>[(0,l._)("div",_n,[yn,(0,l.Wm)(_,{"thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"310px","max-width":"300px"}},{default:(0,l.w5)((()=>[Object.keys(n.demandesGroupesParType).length?((0,l.wg)(),(0,l.iD)("div",vn,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.demandesGroupesParType,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[(0,l.Wm)(w),(0,l._)("div",bn,(0,g.zw)(t),1),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[(0,l._)("div",kn,[(0,l.Uk)((0,g.zw)(e.qté)+" "+(0,g.zw)(e.prep.nom),1),Wn]),(0,l.Uk)(" "+(0,g.zw)(e.service.nom)+" ",1),(0,l._)("div",Cn,(0,g.zw)(e.commentaire),1),(0,l._)("div",xn,[(0,l.Wm)(u,{size:"xs",flat:"",class:"text-cyan-4 hover-effect",icon:"visibility"}),(0,l.Wm)(u,{flat:"",size:"xs",icon:"local_pharmacy",color:"green-4"}),(0,l.Wm)(u,{flat:"",size:"xs",icon:"delete_forever",color:"red-4"})]),qn])))),128))])))),128))])):((0,l.wg)(),(0,l.iD)("div",Sn,Un))])),_:1},8,["thumb-style","bar-style"])])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1})]),(0,l._)("div",Fn,[(0,l.Wm)(p,{bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{src:Gs,loading:"lazy","spinner-color":"red-4"},{loading:(0,l.w5)((()=>[(0,l.Wm)(r,{color:"red-4"})])),default:(0,l.w5)((()=>[(0,l._)("div",In,[(0,l.Uk)(" En attente contrôle "),(0,l._)("div",Vn,(0,g.zw)(e.fichesControlCount),1)])])),_:1}),(0,l.Wm)(m,{class:"absolute-bottom-right q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{to:"/controles/"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"visibility"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"bg-blue-grey-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Voir les contrôles en attente")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])])])])]),(0,l._)("div",Pn,[En,(0,l._)("div",Ln,[(0,l.Wm)(U,{animated:"",modelValue:s.carousel1,"onUpdate:modelValue":t[4]||(t[4]=e=>s.carousel1=e),arrows:"",infinite:"",autoplay:s.autoplay1,onMouseenter:t[5]||(t[5]=e=>s.autoplay1=!1),onMouseleave:t[6]||(t[6]=e=>s.autoplay1=!0),class:"rounded-borders q-pb-sm",style:{"background-image":"linear-gradient(to left, #263238, #3F6B79)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{name:"slide1"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{"thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"350px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"items-center",style:{"background-image":"linear-gradient(to left, #263238, #3F6B79)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l._)("div",Qn,"Produits arrivant à expiration en "+(0,g.zw)(s.currentYear),1),(0,l.Wm)(q,{class:"text-cyan-1"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.filteredMatieresExpire,((e,t)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(x,{key:t,clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-cyan-1 text-no-wrap"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.matiere.nom)+" "+(0,g.zw)(e.matiere.qté_cdt)+(0,g.zw)(e.matiere.unite_cdt),1)])),_:2},1024),(0,l.Wm)(b,{class:"text-cyan-1 text-subtitle2 text-no-wrap",caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.matiere.fournisseur.name)+" "+(0,g.zw)(e.lot)+" "+(0,g.zw)(e.peremption),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(k,{class:"q-mr-md",top:""},{default:(0,l.w5)((()=>[(0,l._)("div",jn,[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[e.matiere.froid?((0,l.wg)(),(0,l.j4)(W,{key:0,fade:"",icon:"fa-solid fa-snowflake",class:"fa-2x",style:{color:"#4dd0e1"}})):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[e.matiere.cmr?((0,l.wg)(),(0,l.j4)(i,{key:0,class:"fade-blink",src:Ys,style:{width:"30px",height:"30px"}})):(0,l.kq)("",!0)])),_:2},1024)])])),_:2},1024),(0,l.Wm)(k,{side:"",top:""},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{color:"cyan-4","text-color":"white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.stock_reception)+(0,g.zw)(e.matiere.unite_mesure.nom),1),Tn,(0,l.Uk)((0,g.zw)(e.matiere.qté_stock)+(0,g.zw)(e.matiere.unite_mesure.nom),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[E]]))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["thumb-style","bar-style"])])),_:1}),(0,l.Wm)(M,{name:"slide2"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{"thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"350px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"items-center",style:{"background-image":"linear-gradient(to left, #263238, #3F6B79)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[Dn,(0,l.Wm)(q,{class:"text-cyan-1"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.filteredMatieresCde,((e,t)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(x,{key:t,clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-cyan-1 text-no-wrap"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.nom)+" "+(0,g.zw)(e.qté_cdt)+(0,g.zw)(e.unite_cdt),1)])),_:2},1024),(0,l.Wm)(b,{class:"text-cyan-1 text-subtitle2 text-no-wrap",caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.fournisseur.name)+" "+(0,g.zw)(e.code_fournisseur),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(k,{class:"q-mr-md",top:""},{default:(0,l.w5)((()=>[(0,l._)("div",Zn,[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[e.froid?((0,l.wg)(),(0,l.j4)(W,{key:0,fade:"",icon:"fa-solid fa-snowflake",class:"fa-2x",style:{color:"#4dd0e1"}})):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[e.cmr?((0,l.wg)(),(0,l.j4)(i,{key:0,class:"fade-blink",src:Ys,style:{width:"30px",height:"30px"}})):(0,l.kq)("",!0)])),_:2},1024)])])),_:2},1024),(0,l.Wm)(k,{side:"",top:""},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{color:e.qté_stock<e.stock_mini?"red":"green","text-color":"white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.qté_stock)+(0,g.zw)(e.unite_mesure.nom),1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1024)),[[E]]))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["thumb-style","bar-style"])])),_:1}),(0,l.Wm)(M,{name:"slide3"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{"thumb-style":s.thumbStyle,"bar-style":s.barStyle,style:{height:"350px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"items-center",style:{"background-image":"linear-gradient(to left, #263238, #3F6B79)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[Nn,(0,l.Wm)(q,{class:"text-cyan-1"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.filteredMatieresLivraison,((e,t)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(x,{key:t,clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-cyan-1 text-no-wrap"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.nom)+" "+(0,g.zw)(e.qté_cdt)+(0,g.zw)(e.unite_cdt),1)])),_:2},1024),(0,l.Wm)(b,{class:"text-cyan-1 text-subtitle2 text-no-wrap",caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.fournisseur.name)+" "+(0,g.zw)(e.code_fournisseur),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(k,{class:"q-mr-md",top:""},{default:(0,l.w5)((()=>[(0,l._)("div",zn,[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[e.froid?((0,l.wg)(),(0,l.j4)(W,{key:0,fade:"",icon:"fa-solid fa-snowflake",class:"fa-2x",style:{color:"#4dd0e1"}})):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[e.cmr?((0,l.wg)(),(0,l.j4)(i,{key:0,class:"fade-blink",src:Ys,style:{width:"30px",height:"30px"}})):(0,l.kq)("",!0)])),_:2},1024)])])),_:2},1024),(0,l.Wm)(k,{side:"",top:""},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{color:e.qté_stock<e.stock_mini?"red":"green","text-color":"white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.qté_stock)+(0,g.zw)(e.unite_mesure.nom),1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1024)),[[E]]))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["thumb-style","bar-style"])])),_:1})])),_:1},8,["modelValue","autoplay"])]),(0,l._)("div",Rn,[(0,l.Wm)(U,{animated:"",modelValue:s.carousel2,"onUpdate:modelValue":t[10]||(t[10]=e=>s.carousel2=e),arrows:"",infinite:"",padding:s.padding,autoplay:s.autoplay2,class:"rounded-borders",onMouseenter:t[11]||(t[11]=e=>s.autoplay2=!1),onMouseleave:t[12]||(t[12]=e=>s.autoplay2=!0),style:{"background-image":"linear-gradient(to right, #263238, #3F6B79)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{name:"slide2-1"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"text-subtitle2 text-center text-cyan-1",style:{"background-image":"linear-gradient(to right, #263238, #3F6B79)"}},{default:(0,l.w5)((()=>[s.loadedBar?((0,l.wg)(),(0,l.j4)(S,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{modelValue:s.toggleMonth,"onUpdate:modelValue":t[7]||(t[7]=e=>s.toggleMonth=e),color:"red-4",icon:"calendar_month",label:"Semaines/Mois",size:"md"},null,8,["modelValue"]),(0,l.Wm)(F,{modelValue:s.toggleType,"onUpdate:modelValue":t[8]||(t[8]=e=>s.toggleType=e),color:"purple-4",icon:"bar_chart",label:"Bar/Area",size:"md"},null,8,["modelValue"]),(0,l.Wm)(F,{modelValue:s.toggleValue,"onUpdate:modelValue":t[9]||(t[9]=e=>s.toggleValue=e),color:"green-4",icon:"timeline",label:"Valeurs",size:"md"},null,8,["modelValue"]),((0,l.wg)(),(0,l.j4)(I,{key:s.graphKey,id:"apex-bar",height:"200",type:s.toggleType?"area":"bar",options:s.chartOptions,series:s.series},null,8,["type","options","series"]))])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(M,{name:"slide2-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"items-center",style:{"background-image":"linear-gradient(to right, #263238, #3F6B79)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l._)("div",On,"Evolution des 5 formules les plus utilisées en "+(0,g.zw)(s.currentYear),1),(0,l.Wm)(q,{class:"text-cyan-1"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.topFichesData,((e,t)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(x,{key:t,clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.prep),1)])),_:2},1024),(0,l.Wm)(b,{class:"text-cyan-1 text-subtitle2",caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(s.previousYear)+": "+(0,g.zw)(e.previousCount)+" fiches - "+(0,g.zw)(s.currentYear)+": "+(0,g.zw)(e.count)+" fiches",1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(k,{side:"",top:""},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{color:n.calculateEvolution(e.count,e.previousCount)<0?"red":"green","text-color":"white"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(n.calculateEvolution(e.count,e.previousCount))+"% ",1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1024)),[[E]]))),128))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(M,{name:"slide2-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"items-center",style:{"background-image":"linear-gradient(to right, #263238, #3F6B79)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"text-subtitle2 text-center text-cyan-1"},{default:(0,l.w5)((()=>[s.loadedDonut?((0,l.wg)(),(0,l.j4)(S,{key:0},{default:(0,l.w5)((()=>[(0,l._)("div",null,"Répartition des fiches en "+(0,g.zw)(s.currentYear),1),(0,l.Wm)(I,{options:s.donutOptions,series:s.donutSeries,type:"donut",height:"200"},null,8,["options","series"])])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","padding","autoplay"])])])])),_:1})):((0,l.wg)(),(0,l.j4)(V,{key:1,class:"row items-center justify-center"},{default:(0,l.w5)((()=>[(0,l._)("div",An,[(0,l.Wm)(P,{class:"bg-op-8","animation-duration":1e3,size:200,color:"#ff1d5e"})])])),_:1}))}var $n=o(7559),Hn=o.n($n),Gn={name:"HomePage",components:{apexchart:Hn(),AtomSpinner:ya.e},data(){return{thumbStyle:{right:"4px",borderRadius:"5px",backgroundColor:"#027be3",width:"5px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"#027be3",width:"9px",opacity:.2},carousel1:"slide1",carousel2:"slide2-1",autoplay1:!0,autoplay2:!0,padding:!1,loadedPage:!1,calendarDialog:!1,dateCalendar:(new Date).toISOString().substr(0,10).replace(/-/g,"/"),splitterModel:62,currentYear:(new Date).getFullYear(),previousYear:(new Date).getFullYear()-1,loadedBar:!1,toggleMonth:!0,loadedDonut:!1,loadedTopFiches:!1,topFichesData:null,tickAmountX:2,toggleType:!0,toggleValue:!1,graphKey:0,donutSeries:[],donutOptions:[],series:[],chartOptions:[]}},computed:{...(0,u.Se)("matieresPremieres",["allMatieres","allReceptions","matieresCdeCount","matieresLivraisonCount"]),...(0,u.Se)("demandes",["nombreDemandes","demandeProche","nombreDemandesProche","demandesDates","demandesAll"]),...(0,u.Se)("fiches",["fichesControlCount","fichesSemaine"]),filteredMatieresExpire(){const e=new Date,t=new Date(e.getFullYear(),11,31);return this.allReceptions.filter((o=>{const[a,l,s]=o.peremption.split("/"),n=new Date(`${s}-${l}-${a}`);return n>=e&&n<=t}))},filteredMatieresCde(){return this.allMatieres.filter((e=>!0===e.cde))},filteredMatieresLivraison(){return this.allMatieres.filter((e=>!0===e.attente_livraison))},demandesDates(){const e=this.$store.getters["demandes/demandesDates"];return e},demandesGroupesParType(){let e={};return this.demandesDatesSelect.forEach((t=>{let o=t.prep.type.nom;e[o]||(e[o]=[]),e[o].push(t)})),e},demandesDatesSelect(){let e=this.dateCalendar.replace(/\//g,"-");console.log("Date formatée pour comparaison:",e);let t=this.demandesAll.filter((t=>(console.log("Comparaison de dates:",t.date_prevu,e),t.date_prevu===e)));return console.log("Demandes filtrées:",t),t},formatDemandesDates(){return this.demandesDates.map((e=>e.replace(/-/g,"/")))},totalFiches(){return this.donutSeries.reduce(((e,t)=>e+t),0)}},async mounted(){try{await this.loadAllData()}catch(e){console.error("Erreur lors du chargement des données :",e)}finally{setTimeout((()=>{this.$nextTick((()=>{this.loadedPage=!0}))}),1e3)}},watch:{toggleMonth(){this.loadData(),this.processData()},dateCalendar(e,t){console.log("Ancienne date:",t,"Nouvelle date:",e)},toggleType(){this.graphKey++},toggleValue(e){this.chartOptions={...this.chartOptions,dataLabels:{enabled:e}},this.graphKey++}},methods:{...(0,u.nv)("matieresPremieres",["loadMatieresPremieres","loadReceptions"]),...(0,u.nv)("demandes",["loadDemandes"]),...(0,u.nv)("fiches",["loadFiches"]),async loadAllData(){await this.loadMatieresPremieres(),await this.loadDemandes(),await this.loadFiches(),await this.loadReceptions(),await this.loadData(),await this.loadTopFichesData(),await this.loadDonutData(),console.log("receptions : ",this.allReceptions)},async loadData(){try{const e=this.toggleMonth?"fiches-mois":"fiches-semaine",t=await Je.get(`/PPH/${e}`);this.processData(t.data,this.toggleMonth),this.loadedBar=!0}catch(e){console.error("Erreur lors du chargement des données de l'API:",e),this.loadedBar=!1}},processData(e){const t=this.toggleMonth?"Mois":"Semaine",o=[{name:"Fiches",data:e.map((e=>e.count)),color:"#4dd0e1"},{name:"Unités de conditionnement",data:e.map((e=>e.qte)),color:"#ffb74d"}];this.chartOptions={chart:{id:"barChart",toolbar:{show:!0,tools:{zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0},autoSelected:"zoom"}},tooltip:{theme:"dark"},dataLabels:{enabled:this.toggleValue},xaxis:{labels:{style:{colors:"#e0f7fa"}},tickAmount:this.tickAmountX,title:{text:t,style:{color:"#e0f7fa"}}},yaxis:{labels:{style:{colors:["#e0f7fa"]}},title:{text:"Quantité",style:{color:"#e0f7fa"}},axisBorder:{show:!0,color:"#e0f7fa"}},grid:{xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}}},legend:{position:"top",horizontalAlign:"left",labels:{colors:"#e0f7fa",useSeriesColors:!1}},plotOptions:{bar:{borderRadius:2,columnWidth:"80%",borderRadiusApplication:"end",backgroundBarOpacity:.8,fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:0,gradientToColors:["#ffb74d"],inverseColors:!0,opacityFrom:1,opacityTo:.6}}}}},this.series=o},async loadDonutData(){try{const e=await Je.get("/PPH/fiches/count_per_service"),t=this.DonutData(e.data);this.donutSeries=t.series,this.donutOptions=t.options,this.loadedDonut=!0,console.log(this.donutSeries),console.log(this.donutOptions)}catch(e){console.error("Erreur lors du chargement des données du donut :",e),this.loadedDonut=!1}},DonutData(e){function t(){const e="0123456789ABCDEF";let t="#";for(let o=0;o<6;o++)t+=e[Math.floor(16*Math.random())];return t}const o=e.map((()=>t()));return{series:e.map((e=>e.count)),options:{labels:e.map((e=>e.service)),colors:o,plotOptions:{pie:{donut:{labels:{show:!0,value:{color:"#e0f7fa"},total:{show:!0,label:"Total",formatter:()=>this.totalFiches,color:"#e0f7fa"}}}}},stroke:{width:0},legend:{position:"left",labels:{colors:"#e0f7fa"}},fill:{colors:o}}}},async loadTopFichesData(){try{const e=await Je.get("/PPH/fiches/top_fiches_annuelles");this.topFichesData=this.formatTopFichesData(e.data),this.loadedTopFiches=!0}catch(e){console.error("Erreur lors du chargement des données des top fiches :",e),this.loadedTopFiches=!1}},formatTopFichesData(e){const t=e.current_year.map((t=>({prep:t.prep__nom,count:t.count,previousCount:e.previous_year[t.prep__nom]?.count||0})));return t},calculateEvolution(e,t){return 0===t?0===e?0:100:((e-t)/t*100).toFixed(2)},getEvolutionClass(e,t){const o=this.calculateEvolution(e,t);return o>0?"positive":"negative"},openCalendar(){this.calendarDialog=!0}}},Yn=o(4806),Kn=o(5518),Jn=o(5230),Xn=o(6607),er=o(3535),tr=o(3477),or=o(3712),ar=o(6790),lr=o(8299),sr=o(8108);const nr=(0,p.Z)(Gn,[["render",Bn]]);var rr=nr;U()(Gn,"components",{QPage:De.Z,QCard:Fe.Z,QImg:Sl.Z,QSpinnerRings:Ml.Z,QBtnGroup:K.Z,QBtn:v.Z,QTooltip:Yn.Z,QDialog:Ue.Z,QToolbar:G.Z,QSplitter:Kn.Z,QDate:Jn.Z,QScrollArea:Xn.Z,QSeparator:x.Z,QCarousel:er.Z,QCarouselSlide:tr.Z,QCardSection:Ie.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z,QItemLabel:or.Z,QBadge:ar.Z,QToggle:lr.Z}),U()(Gn,"directives",{Ripple:sr.Z});const ir={class:"row justify-center"},cr={class:"col-md-12"},ur={class:"row q-mx-sm q-mt-sm"},dr={class:"col-3"},mr={class:"row"},pr=(0,l._)("div",{class:"row justify-center text-h6 text-cyan-4"}," Intégrer ",-1),fr=(0,l._)("br",null,null,-1),hr={class:"row justify-center text-subtitle1 text-orange-4"},wr=(0,l._)("br",null,null,-1),gr=(0,l._)("div",{class:"row justify-center text-h6 text-cyan-4"}," aux matières premières ",-1),_r={class:"row"},yr={class:"col-12"},vr={class:"row"},br={class:"col-6"},kr={class:"col-6"},Wr={class:"row"},Cr={class:"col-5"},xr={class:"col-5 offset-1"},qr={class:"row"},Sr={class:"col-5"},Mr={class:"uniteStockName text-subtitle2 text-cyan-4"},Ur={class:"col-5 offset-1"},Fr={class:"row justify-center"},Ir={class:"col-6 q-mt-md text-cyan-4 text-h6"},Vr={class:"row justify-center"},Pr={class:"col-2 offset-1"},Er={class:"row q-mt-sm"},Lr={class:"col-12 justify-center"},Qr={class:"row justify-start"},jr=["onClick"],Tr=["onClick"],Dr={class:"absolute-top-left q-ml-sm q-mt-xs"},Zr={key:0,class:"text-red-4 text-subtitle2"},Nr={key:1,class:"text-green-4 text-subtitle2"},zr={key:2,class:"text-red-4 text-subtitle2"},Rr={class:"absolute-bottom-left"},Or={class:"row"},Ar={class:"row justify-center"};function Br(e,t,o,s,n,r){const i=(0,l.up)("q-btn"),c=(0,l.up)("router-link"),u=(0,l.up)("q-icon"),d=(0,l.up)("font-awesome-icon"),m=(0,l.up)("q-item"),p=(0,l.up)("q-list"),f=(0,l.up)("q-menu"),h=(0,l.up)("q-input"),w=(0,l.up)("q-card-section"),_=(0,l.up)("q-separator"),y=(0,l.up)("q-toggle"),v=(0,l.up)("q-select"),b=(0,l.up)("q-btn-group"),k=(0,l.up)("q-card"),W=(0,l.up)("q-dialog"),C=(0,l.up)("q-form"),x=(0,l.up)("q-spinner-rings"),q=(0,l.up)("q-img"),S=(0,l.up)("q-item-section"),M=(0,l.up)("q-page"),U=(0,l.up)("atom-spinner"),F=(0,l.Q2)("close-popup");return e.loadMatieresPremieres?((0,l.wg)(),(0,l.j4)(M,{key:0},{default:(0,l.w5)((()=>[(0,l._)("div",ir,[(0,l._)("div",cr,[(0,l._)("div",ur,[(0,l._)("div",dr,[(0,l._)("div",mr,[(0,l.Wm)(c,{to:"/creation-matiere-premiere/"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{round:"",class:"q-mt-sm glossy btn-grey-primary-pph",icon:"add"})])),_:1}),(0,l.Wm)(h,{class:"q-ml-md",ref:"searchCatalogueInput",modelValue:n.searchCatalogueQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>n.searchCatalogueQuery=e),label:"Importer...",color:"cyan-4",onInput:e.filterCatalogueMatieres,onMouseover:t[2]||(t[2]=e=>r.changeLabelColor("searchCatalogueInput","#ffb74d")),onMouseleave:t[3]||(t[3]=e=>r.changeLabelColor("searchCatalogueInput","")),onFocus:t[4]||(t[4]=e=>r.onFocus("searchCatalogueQuery","#4dd0e1")),onBlur:t[5]||(t[5]=e=>r.onBlur("searchCatalogueQuery"))},{append:(0,l.w5)((()=>[n.searchCatalogueQuery.length<1?((0,l.wg)(),(0,l.j4)(u,{key:0,name:"search",style:{color:"#4dd0e1"}})):n.searchCatalogueQuery.length>=1&&r.filteredMatieresCatalogue.length>0?((0,l.wg)(),(0,l.j4)(i,{key:1,size:"lg",onClick:e.toogleMenuMat,class:"hover-effect-success q-pa-xs",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{icon:"fa-solid fa-magnifying-glass-plus","beat-fade":"",style:{color:"#a1d19b"}})])),_:1},8,["onClick"])):((0,l.wg)(),(0,l.j4)(d,{key:2,icon:"fa-solid fa-magnifying-glass-plus",fade:"",style:{color:"#d59e9e"},size:"fa-md"}))])),default:(0,l.w5)((()=>[n.searchCatalogueQuery.length>=1?((0,l.wg)(),(0,l.j4)(f,{key:0,modelValue:n.menuMat,"onUpdate:modelValue":t[0]||(t[0]=e=>n.menuMat=e),anchor:"bottom left"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.filteredMatieresCatalogue,(e=>((0,l.wg)(),(0,l.j4)(m,{key:e.id,clickable:"",onClick:t=>r.selectMatiere(e),class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.designation)+", "+(0,g.zw)(e.cdt)+" "+(0,g.zw)(e.qté)+(0,g.zw)(e.unite)+", "+(0,g.zw)(e.fournisseur.name)+", ref:"+(0,g.zw)(e.code_fournisseur),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])):(0,l.kq)("",!0)])),_:1},8,["modelValue","onInput"]),(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W,{modelValue:n.addDialog,"onUpdate:modelValue":t[15]||(t[15]=e=>n.addDialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[pr,fr,(0,l._)("div",hr,(0,g.zw)(n.selectedMatiere.designation)+" "+(0,g.zw)(n.selectedMatiere.cdt)+" "+(0,g.zw)(n.selectedMatiere.qté)+(0,g.zw)(n.selectedMatiere.unite)+" "+(0,g.zw)(n.selectedMatiere.fournisseur.name)+" ref:"+(0,g.zw)(n.selectedMatiere.code_fournisseur),1),wr,gr])),_:1}),(0,l.Wm)(_),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",_r,[(0,l._)("div",yr,[(0,l.Wm)(h,{modelValue:n.nom,"onUpdate:modelValue":t[7]||(t[7]=e=>n.nom=e),label:"Désignation",color:"cyan-4",class:"hover-effect"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(i,{flat:"",color:"cyan-4",class:"hover-effect-success",onClick:t[6]||(t[6]=e=>this.nom=this.selectedMatiere.designation)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{size:"fa-sm",icon:"fa-solid fa-clone"})])),_:1})])),_:1},8,["modelValue"])])]),(0,l._)("div",vr,[(0,l._)("div",br,[(0,l.Wm)(y,{modelValue:n.stockee,"onUpdate:modelValue":t[8]||(t[8]=e=>n.stockee=e),size:"md",icon:"inventory",label:"Stockée",color:"green-4"},null,8,["modelValue"])]),(0,l._)("div",kr,[(0,l.Wm)(y,{modelValue:n.cde_auto,"onUpdate:modelValue":t[9]||(t[9]=e=>n.cde_auto=e),size:"md",icon:"list_alt",label:"Commande auto",color:"purple-4"},null,8,["modelValue"])])]),(0,l._)("div",Wr,[(0,l._)("div",Cr,[(0,l.Wm)(v,{label:"Unité de mesure",class:"hover-effect",color:"cyan-4",modelValue:n.uniteMesure,"onUpdate:modelValue":t[10]||(t[10]=e=>n.uniteMesure=e),options:n.unitesOptions,"options-label":"label","options-value":"value"},null,8,["modelValue","options"])]),(0,l._)("div",xr,[(0,l.Wm)(v,{label:"Liste",class:"hover-effect",color:"cyan-4",modelValue:n.liste,"onUpdate:modelValue":t[11]||(t[11]=e=>n.liste=e),options:e.listesOptions,"options-label":"label","options-value":"value"},null,8,["modelValue","options"])])]),(0,l._)("div",qr,[(0,l._)("div",Sr,[(0,l.Wm)(h,{modelValue:n.stock_mini,"onUpdate:modelValue":t[12]||(t[12]=e=>n.stock_mini=e),label:"Stock mini",color:"cyan-4"},{append:(0,l.w5)((()=>[(0,l._)("div",Mr,(0,g.zw)(r.uniteStockNom),1)])),_:1},8,["modelValue"])]),(0,l._)("div",Ur,[(0,l.Wm)(v,{label:"Forme",class:"hover-effect",color:"cyan-4",modelValue:n.forme,"onUpdate:modelValue":t[13]||(t[13]=e=>n.forme=e),options:e.formesOptions,"options-label":"label","options-value":"value"},null,8,["modelValue","options"])])])])),_:1}),(0,l.Wm)(_),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",Fr,[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{flat:"",label:"Transférer",onClick:r.transfert,color:"green-4"},null,8,["onClick"]),(0,l.Wm)(i,{flat:"",label:"Annuler",onClick:t[14]||(t[14]=e=>{n.addDialog=!1,this.searchCatalogueQuery=""}),color:"red-4"})])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])]),(0,l._)("div",Ir,[(0,l._)("div",Vr,(0,g.zw)(r.countMatieres)+" matières premières référencées ",1)]),(0,l._)("div",Pr,[(0,l.Wm)(h,{ref:"searchInput",modelValue:n.searchQuery,"onUpdate:modelValue":t[16]||(t[16]=e=>n.searchQuery=e),label:"Recherche...",onInput:e.filterMatieres,color:"cyan-4",onMouseover:t[17]||(t[17]=e=>r.changeLabelColor("searchInput","#ffb74d")),onMouseleave:t[18]||(t[18]=e=>r.changeLabelColor("searchInput","")),onFocus:t[19]||(t[19]=e=>r.onFocus("searchQuery","#4dd0e1")),onBlur:t[20]||(t[20]=e=>r.onBlur("searchQuery"))},{append:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"search",color:"cyan-4"})])),_:1},8,["modelValue","onInput"])])]),(0,l._)("div",Er,[(0,l._)("div",Lr,[(0,l._)("div",Qr,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.filteredMatieres,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"col-2 q-pa-sm",key:t.id,onClick:e=>r.redirectToLink(t.id)},[(0,l.Wm)(k,{bordered:"",class:(0,g.C_)(["card-maxi justify-center items-center text-center relative",{"bd-red-4":!t.stockee}])},{default:(0,l.w5)((()=>[(0,l._)("div",{onClick:e=>r.redirectToLink(t.id),class:"card-content"},[(0,l.Wm)(q,{class:"logo-card-mini",src:pl,loading:"lazy","spinner-color":"red-4",alt:t.type.nom},{loading:(0,l.w5)((()=>[(0,l.Wm)(x,{color:"red-4"})])),default:(0,l.w5)((()=>["Conditionnement"===t.type.nom?((0,l.wg)(),(0,l.j4)(d,{key:0,icon:"fa-solid fa-prescription-bottle",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Principe actif"===t.type.nom?((0,l.wg)(),(0,l.j4)(d,{key:1,icon:"fa-solid fa-pills",size:"3x",class:"icon-background hover-effect"})):(0,l.kq)("",!0),"Cosmétique"===t.type.nom?((0,l.wg)(),(0,l.j4)(d,{key:2,icon:"fa-solid fa-hand-holding-droplet",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Complément alimentaire"===t.type.nom?((0,l.wg)(),(0,l.j4)(d,{key:3,icon:"fa-solid fa-glass-water-droplet",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Technique"===t.type.nom?((0,l.wg)(),(0,l.j4)(d,{key:4,icon:"fa-solid fa-book-medical",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Alimentaire"===t.type.nom?((0,l.wg)(),(0,l.j4)(d,{key:5,icon:"fa-solid fa-bottle-droplet",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Excipient"===t.type.nom?((0,l.wg)(),(0,l.j4)(d,{key:6,icon:"fa-solid fa-flask",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),(0,l._)("div",{class:(0,g.C_)(["absolute-top hover-effect q-my-none",{"text-cyan-1":t.stockee,"text-red-4":!t.stockee}])},[(0,l._)("div",null,(0,g.zw)(t.nom),1),(0,l._)("div",null,(0,g.zw)(t.forme.nom)+" "+(0,g.zw)(t.qté_cdt)+(0,g.zw)(t.unite_cdt),1),(0,l._)("div",null,[t.qté_stock<t.stock_mini?((0,l.wg)(),(0,l.j4)(d,{key:0,icon:"fa-solid fa-triangle-exclamation","beat-fade":"",size:"fa-xs",style:{color:"#e57373"}})):(0,l.kq)("",!0),t.cde?((0,l.wg)(),(0,l.j4)(u,{key:1,name:"fact_check",color:"orange-4",size:"xs"})):(0,l.kq)("",!0),t.attente_livraison?((0,l.wg)(),(0,l.j4)(u,{key:2,name:"fact_check",color:"green-4",size:"xs"})):(0,l.kq)("",!0),(0,l.Uk)(" Stock : "+(0,g.zw)(t.qté_stock)+(0,g.zw)(t.unite_mesure.nom),1)])],2)])),_:2},1032,["alt"]),(0,l.Wm)(i,{flat:"",color:"white",class:"absolute-top-right hover-effect q-pa-none q-ma-none",icon:"more_vert",onClick:(0,a.iM)((o=>e.toggleMenu(t.id)),["stop"])},null,8,["onClick"]),(0,l.Wm)(f,{fit:"",anchor:"top right",self:"bottom middle",modelValue:e.showMenu[t.id],"onUpdate:modelValue":o=>e.showMenu[t.id]=o},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{clickable:"",onClick:(0,a.iM)((o=>e.deleteMatiere(t.id)),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)("Supprimer")])),_:1})])),_:2},1032,["onClick"])),[[F]]),(0,l.wy)(((0,l.wg)(),(0,l.j4)(m,{clickable:"",onClick:(0,a.iM)((o=>e.toggleActivation({matiereId:t.id,isStockee:t.stockee})),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.stockee?"Non Stockée":"Stockée"),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[F]])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])],8,Tr),(0,l._)("div",Dr,["Liste 1"===t.liste.nom?((0,l.wg)(),(0,l.iD)("div",Zr,"1")):(0,l.kq)("",!0),"Liste 2"===t.liste.nom?((0,l.wg)(),(0,l.iD)("div",Nr,"2")):(0,l.kq)("",!0),"Stupéfiant"===t.liste.nom?((0,l.wg)(),(0,l.iD)("div",zr,"S")):(0,l.kq)("",!0)]),(0,l._)("div",Rr,[(0,l._)("div",Or,[t.froid?((0,l.wg)(),(0,l.j4)(d,{key:0,fade:"",icon:"fa-solid fa-snowflake",class:"q-ml-xs q-mb-xs fa-2x",style:{color:"#4dd0e1"}})):(0,l.kq)("",!0),t.cmr?((0,l.wg)(),(0,l.j4)(q,{key:1,class:"q-ml-xs q-mb-xs fade-blink",src:Ys,style:{width:"30px",height:"30px"}})):(0,l.kq)("",!0)])]),(0,l.Wm)(b,{class:"absolute-bottom-right q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"bar_chart"}),(0,l.Wm)(i,{class:"q-pa-none hover-effect",flat:"",color:t.cde?"red-4":"green-4",icon:t.cde?"playlist_remove":"playlist_add",onClick:(0,a.iM)((o=>e.toggleCde({matiereId:t.id,isCde:t.cde})),["stop"])},null,8,["color","icon","onClick"]),(0,l.Wm)(i,{class:"hover-effect",color:"cyan-4",round:"",flat:"",dense:"",icon:"info",onClick:(0,a.iM)((o=>e.toggleInfo(t.id)),["stop"])},null,8,["onClick"])])),_:2},1024),(0,l.Wm)(f,{fit:"",anchor:"bottom right",self:"top middle",modelValue:e.expanded[t.id],"onUpdate:modelValue":o=>e.expanded[t.id]=o},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[t.fournisseur?((0,l.wg)(),(0,l.j4)(m,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Fournisseur : ")])),_:1}),(0,l.Wm)(S,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.fournisseur.name),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),t.prix?((0,l.wg)(),(0,l.j4)(m,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Prix : ")])),_:1}),(0,l.Wm)(S,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.prix)+" € ",1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),t.prix_unit?((0,l.wg)(),(0,l.j4)(m,{key:2},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Prix unitaire : ")])),_:1}),(0,l.Wm)(S,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.prix_unit)+" €/"+(0,g.zw)(t.unite_mesure.nom),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),t.stock_mini?((0,l.wg)(),(0,l.j4)(m,{key:3},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Stock mini : ")])),_:1}),(0,l.Wm)(S,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.stock_mini)+(0,g.zw)(t.unite_mesure.nom),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["class"])],8,jr)))),128))])])])])])])),_:1})):((0,l.wg)(),(0,l.j4)(M,{key:1,class:"row items-center justify-center"},{default:(0,l.w5)((()=>[(0,l._)("div",Ar,[(0,l.Wm)(U,{class:"bg-op-8","animation-duration":1e3,size:200,color:"#ff1d5e"})])])),_:1}))}var $r=o(1238),Hr={name:"MatieresCards",components:{FontAwesomeIcon:$r.GN,AtomSpinner:ya.e},data(){return{searchCatalogueQuery:"",searchQuery:"",addDialog:!1,menuMat:!1,selectedMatiere:null,nom:"",stock_mini:"",stockee:!1,cde_auto:!1,uniteMesure:null,liste:null,forme:null,type:null,unitesOptions:[]}},computed:{...(0,u.Se)("matieresPremieres",["allMatieres","allMatieresCatalogue","allCategories","allUnites","allFormes","showMenu","expanded"]),...(0,u.Se)("formules",["allListes"]),countMatieres(){return this.allMatieres.length},filteredMatieres(){return this.searchQuery?this.allMatieres.filter((e=>e.nom.toLowerCase().startsWith(this.searchQuery.toLowerCase()))):this.allMatieres},filteredMatieresCatalogue(){return this.searchCatalogueQuery?this.allMatieresCatalogue.filter((e=>e.designation.toLowerCase().startsWith(this.searchCatalogueQuery.toLowerCase()))):this.allMatieresCatalogue},uniteStockNom(){if(this.unite_mesure&&this.allUnites){const e=this.allUnites.find((e=>e.id===this.unite_mesure.id));return e?e.nom:""}return""}},async created(){await this.loadMatieresPremieres(),await this.loadMatieresPremieresCatalogue(),await this.loadCategoriesMatieres(),await this.loadUnites(),await this.loadListes(),await this.loadFormes(),this.unitesOptions=this.allUnites.map((e=>({label:e.nom,value:e.id}))),this.listesOptions=this.allListes.map((e=>({label:e.nom,value:e.id}))),this.formesOptions=this.allFormes.map((e=>({label:e.nom,value:e.id})))},methods:{...(0,u.nv)("matieresPremieres",["loadMatieresPremieres","loadCategoriesMatieres","loadMatieresPremieresCatalogue","deleteMatiere","loadUnites","loadFormes","addMatiere","toggleActivation","toggleMenuMat","toggleCde","toggleMenu","toggleInfo"]),...(0,u.nv)("formules",["loadListes"]),selectMatiere(e){this.searchCatalogueQuery=e.designation,this.selectedMatiere={...e},this.menuMat=!1,this.addDialog=!0},async transfert(){console.log("Formatage des données"),console.log(this.froid),console.log(this.cmr);const e={nom:this.nom,type:this.selectedMatiere.type.id,"qté_cdt":this.selectedMatiere.qté,unite_mesure:this.uniteMesure.value,fournisseur:this.selectedMatiere.fournisseur.id,prix:this.selectedMatiere.prix,stock_mini:this.stock_mini,"qté_stock":0,cdt:1,froid:this.selectedMatiere.froid,cmr:this.selectedMatiere.cmr,liste:this.liste.value,forme:this.forme.value,stockee:this.stockee,ean:this.selectedMatiere.cip,code_fournisseur:this.selectedMatiere.code_fournisseur,unite_cdt:this.selectedMatiere.unite};console.log("formData",e),this.addMatiere(e),await this.loadMatieresPremieres(),this.selectedMatiere=null,this.searchCatalogueQuery="",this.nom="",this.stock_mini="",this.stockee=!1,this.cde_auto=!1,this.uniteMesure=null,this.liste=null,this.forme=null,this.type=null,this.addDialog=!1},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1},redirectToLink(e){this.$router.push(`/matiere/${e}`)}}};const Gr=(0,p.Z)(Hr,[["render",Br]]);var Yr=Gr;U()(Hr,"components",{QPage:De.Z,QBtn:v.Z,QInput:Ce.Z,QIcon:q.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QForm:Ve.Z,QDialog:Ue.Z,QCard:Fe.Z,QCardSection:Ie.Z,QSeparator:x.Z,QToggle:lr.Z,QSelect:Al.Z,QBtnGroup:K.Z,QImg:Sl.Z,QSpinnerRings:Ml.Z,QItemSection:C.Z,QField:xe.Z}),U()(Hr,"directives",{ClosePopup:S.Z});const Kr=e=>((0,l.dD)("data-v-7c4a207c"),e=e(),(0,l.Cn)(),e),Jr={class:"row justify-center"},Xr={class:"row justify-center"},ei={class:"col-md-12"},ti={class:"row q-mx-sm"},oi={class:"col-1 q-mt-md"},ai=Kr((()=>(0,l._)("div",{class:"row text-h6 text-cyan-4 justify-center"}," Importer un catalogue Excel ",-1))),li=Kr((()=>(0,l._)("div",{class:"row text-subtitle1 text-orange-4"}," Données du catalogue ",-1))),si={class:"row"},ni={class:"col-12"},ri={class:"row"},ii={class:"col-6"},ci={class:"col-5 offset-1"},ui=Kr((()=>(0,l._)("div",{class:"row text-subtitle1 text-orange-4"}," Plage d'extraction ",-1))),di={class:"row"},mi={class:"col-4"},pi={class:"col-4 offset-1"},fi={class:"row"},hi={class:"col-4"},wi={class:"col-4 offset-1"},gi={class:"row justify-center"},_i=Kr((()=>(0,l._)("div",{class:"row text-cyan-4 justify-center text-h6"}," Importer un catalogue Excel ",-1))),yi=Kr((()=>(0,l._)("div",{class:"row text-orange-4 justify-center text-subtitle2"}," Données a importer ",-1))),vi={class:"row"},bi={class:"col"},ki=["onDragenter","onDragleave"],Wi=Kr((()=>(0,l._)("div",{class:"row text-orange-4 justify-center text-subtitle2"}," Colonnes du fichier Excel ",-1))),Ci={class:"items"},xi=["onDragstart"],qi={class:"row justify-center"},Si=Kr((()=>(0,l._)("div",{class:"row text-h6 text-cyan-4 justify-center"}," Importer un catalogue ",-1))),Mi=Kr((()=>(0,l._)("div",{class:"row text-subtitle1 text-orange-4"}," Données du catalogue ",-1))),Ui={class:"row"},Fi={class:"col-12"},Ii={class:"row"},Vi={class:"col-6"},Pi={class:"col-5 offset-1"},Ei=Kr((()=>(0,l._)("div",{class:"row text-subtitle1 text-orange-4"}," Plage d'extraction ",-1))),Li={class:"row"},Qi={class:"col-4"},ji={class:"col-4 offset-1"},Ti={class:"row"},Di={class:"col-4"},Zi={class:"col-4 offset-1"},Ni={class:"row justify-center"},zi={class:"col-6 offset-2 q-mt-md text-cyan-4 text-h6"},Ri={class:"row justify-center"},Oi={class:"col-2 offset-1"},Ai={class:"row q-mt-sm"},Bi={class:"col-12 justify-center"},$i={key:0,class:"row justify-start"},Hi=["onClick"],Gi={class:"absolute-top hover-effect q-my-none text-cyan-1"},Yi={key:0,class:"absolute-bottom-left"},Ki={key:1,class:"row"},Ji=Kr((()=>(0,l._)("div",{class:"row"},[(0,l._)("div",{class:"col-3 text-center"},"Désignation"),(0,l._)("div",{class:"col-1 text-center"},"Conditionnement"),(0,l._)("div",{class:"col-1 text-center"},"Prix HT"),(0,l._)("div",{class:"col-2 text-center"},"Ref fournisseur"),(0,l._)("div",{class:"col-2 text-center"},"EAN"),(0,l._)("div",{class:"col-1 text-center"},"Fournisseur")],-1))),Xi=Kr((()=>(0,l._)("div",{class:"row justify-center text-h6 text-cyan-4"}," Intégrer ",-1))),ec=Kr((()=>(0,l._)("br",null,null,-1))),tc={class:"row justify-center text-subtitle1 text-orange-4"},oc=Kr((()=>(0,l._)("br",null,null,-1))),ac=Kr((()=>(0,l._)("div",{class:"row justify-center text-h6 text-cyan-4"}," aux matières premières ",-1))),lc={class:"row"},sc={class:"col-12"},nc={class:"row"},rc={class:"col-6"},ic={class:"col-6"},cc={class:"row"},uc={class:"col-5"},dc={class:"col-5 offset-1"},mc={class:"row"},pc={class:"col-5"},fc={class:"uniteStockName text-subtitle2 text-cyan-4"},hc={class:"col-5 offset-1"},wc={class:"row justify-center"};function gc(e,t,o,s,n,r){const i=(0,l.up)("atom-spinner"),c=(0,l.up)("q-page"),u=(0,l.up)("q-fab-action"),d=(0,l.up)("q-card-section"),m=(0,l.up)("q-separator"),p=(0,l.up)("q-file"),f=(0,l.up)("q-select"),h=(0,l.up)("q-input"),w=(0,l.up)("q-btn"),_=(0,l.up)("q-btn-group"),y=(0,l.up)("q-card"),v=(0,l.up)("q-dialog"),b=(0,l.up)("q-splitter"),k=(0,l.up)("q-card-actions"),W=(0,l.up)("q-form"),C=(0,l.up)("q-fab"),x=(0,l.up)("q-icon"),q=(0,l.up)("q-spinner-rings"),S=(0,l.up)("q-img"),M=(0,l.up)("q-item-label"),U=(0,l.up)("q-item-section"),F=(0,l.up)("font-awesome-icon"),I=(0,l.up)("q-item"),V=(0,l.up)("q-list"),P=(0,l.up)("q-toggle");return e.isLoading?((0,l.wg)(),(0,l.j4)(c,{key:0,class:"row items-center justify-center"},{default:(0,l.w5)((()=>[(0,l._)("div",Jr,[(0,l.Wm)(i,{class:"bg-op-8","animation-duration":1e3,size:200,color:"#ff1d5e"})])])),_:1})):((0,l.wg)(),(0,l.j4)(c,{key:1},{default:(0,l.w5)((()=>[(0,l._)("div",Xr,[(0,l._)("div",ei,[(0,l._)("div",ti,[(0,l._)("div",oi,[(0,l.Wm)(C,{size:"sm",glossy:"",class:"btn-grey-primary-pph",icon:"add_box",direction:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{glossy:"","external-label":"","label-position":"bottom",label:"Excel",class:"btn-grey-primary-pph",onClick:t[0]||(t[0]=e=>n.importCatalogueExcel=!0),icon:"playlist_add"}),(0,l.Wm)(u,{glossy:"","external-label":"","label-position":"bottom",label:"PDF",class:"btn-grey-primary-pph",onClick:t[1]||(t[1]=e=>n.importCatalogue=!0),icon:"post_add"}),(0,l.Wm)(u,{glossy:"","external-label":"","label-position":"bottom",label:"Site",class:"btn-grey-primary-pph",onClick:t[2]||(t[2]=e=>n.selectColumns=!0),icon:"add_business"}),(0,l.Wm)(W,{enctype:"multipart/form-data"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{modelValue:n.importCatalogueExcel,"onUpdate:modelValue":t[12]||(t[12]=e=>n.importCatalogueExcel=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[ai])),_:1}),(0,l.Wm)(m),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[li,(0,l._)("div",si,[(0,l._)("div",ni,[(0,l.Wm)(p,{label:"Sélectionner un fichier.xls",accept:".xls",modelValue:n.selectedFile,"onUpdate:modelValue":t[3]||(t[3]=e=>n.selectedFile=e)},null,8,["modelValue"])])]),(0,l._)("div",ri,[(0,l._)("div",ii,[(0,l.Wm)(f,{label:"Fournisseur",color:"cyan-4",modelValue:n.selectedSupplier,"onUpdate:modelValue":t[4]||(t[4]=e=>n.selectedSupplier=e),options:n.suppliersOptions,"options-label":"label","options-value":"value",onInput:r.onSupplierChange},null,8,["modelValue","options","onInput"])]),(0,l._)("div",ci,[(0,l.Wm)(f,{label:"Catégorie",color:"cyan-4",modelValue:n.selectedCategory,"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedCategory=e),options:n.categoriesOptions,"options-label":"label","options-value":"value"},null,8,["modelValue","options"])])])])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[ui,(0,l._)("div",di,[(0,l._)("div",mi,[(0,l.Wm)(h,{label:"Page de début",modelValue:n.pageDebut,"onUpdate:modelValue":t[6]||(t[6]=e=>n.pageDebut=e),color:"cyan-4"},null,8,["modelValue"])]),(0,l._)("div",pi,[(0,l.Wm)(h,{label:"Page de fin",modelValue:n.pageFin,"onUpdate:modelValue":t[7]||(t[7]=e=>n.pageFin=e),color:"cyan-4"},null,8,["modelValue"])])]),(0,l._)("div",fi,[(0,l._)("div",hi,[(0,l.Wm)(h,{label:"Code CPF de début",modelValue:n.codeDebut,"onUpdate:modelValue":t[8]||(t[8]=e=>n.codeDebut=e),color:"cyan-4",mask:n.maskFormat},null,8,["modelValue","mask"])]),(0,l._)("div",wi,[(0,l.Wm)(h,{label:"Code CPF de fin",modelValue:n.codeFin,"onUpdate:modelValue":t[9]||(t[9]=e=>n.codeFin=e),color:"cyan-4",mask:n.maskFormat},null,8,["modelValue","mask"])])])])),_:1}),(0,l.Wm)(m),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l._)("div",gi,[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{flat:"",label:"Importer",onClick:r.importer,color:"green-4"},null,8,["onClick"]),(0,l.Wm)(w,{flat:"",label:"Colonnes",onClick:t[10]||(t[10]=t=>{n.importCatalogueExcel=!1,e.SelectColumns=!0}),color:"green-4"}),(0,l.Wm)(w,{flat:"",label:"Annuler",onClick:t[11]||(t[11]=e=>n.importCatalogue=!1),color:"red-4"})])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(v,{modelValue:n.selectColumns,"onUpdate:modelValue":t[17]||(t[17]=e=>n.selectColumns=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[_i,(0,l.Wm)(m),(0,l.Wm)(b,{horizontal:""},{after:(0,l.w5)((()=>[yi,(0,l._)("div",vi,[(0,l._)("div",bi,[(0,l._)("div",{class:"drop-target",onDragover:t[13]||(t[13]=(...e)=>r.onDragOver&&r.onDragOver(...e)),onDrop:t[14]||(t[14]=(...e)=>r.onDrop&&r.onDrop(...e))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.labels,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:(0,g.C_)(["label q-mx-xs",{active:r.isLabelActive(e)}]),onDragenter:t=>r.onLabelDragEnter(e),onDragleave:t=>r.onLabelDragLeave(e)},(0,g.zw)(e),43,ki)))),128))],32)])])])),before:(0,l.w5)((()=>[Wi,(0,l._)("div",Ci,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.items,((e,o)=>((0,l.wg)(),(0,l.iD)("div",{key:o,class:"item q-mx-xsm run",draggable:!0,onDragstart:e=>r.onDragStart(o),onDragend:t[15]||(t[15]=(...e)=>r.onDragEnd&&r.onDragEnd(...e))},(0,g.zw)(e),41,xi)))),128))])])),_:1}),(0,l.Wm)(m),(0,l._)("div",qi,[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{flat:"",label:"Importer",onClick:e.transfert,color:"green-4"},null,8,["onClick"]),(0,l.Wm)(w,{flat:"",label:"Annuler",onClick:t[16]||(t[16]=e=>n.selectColumns=!1),color:"red-4"})])),_:1})])),_:1})])])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(v,{modelValue:n.importCatalogue,"onUpdate:modelValue":t[26]||(t[26]=e=>n.importCatalogue=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[Si])),_:1}),(0,l.Wm)(m),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[Mi,(0,l._)("div",Ui,[(0,l._)("div",Fi,[(0,l.Wm)(p,{label:"Sélectionner un fichier.pdf",accept:".pdf",modelValue:n.selectedFile,"onUpdate:modelValue":t[18]||(t[18]=e=>n.selectedFile=e)},null,8,["modelValue"])])]),(0,l._)("div",Ii,[(0,l._)("div",Vi,[(0,l.Wm)(f,{label:"Fournisseur",color:"cyan-4",modelValue:n.selectedSupplier,"onUpdate:modelValue":t[19]||(t[19]=e=>n.selectedSupplier=e),options:n.suppliersOptions,"options-label":"label","options-value":"value",onInput:r.onSupplierChange},null,8,["modelValue","options","onInput"])]),(0,l._)("div",Pi,[(0,l.Wm)(f,{label:"Catégorie",color:"cyan-4",modelValue:n.selectedCategory,"onUpdate:modelValue":t[20]||(t[20]=e=>n.selectedCategory=e),options:n.categoriesOptions,"options-label":"label","options-value":"value"},null,8,["modelValue","options"])])])])),_:1}),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[Ei,(0,l._)("div",Li,[(0,l._)("div",Qi,[(0,l.Wm)(h,{label:"Page de début",modelValue:n.pageDebut,"onUpdate:modelValue":t[21]||(t[21]=e=>n.pageDebut=e),color:"cyan-4"},null,8,["modelValue"])]),(0,l._)("div",ji,[(0,l.Wm)(h,{label:"Page de fin",modelValue:n.pageFin,"onUpdate:modelValue":t[22]||(t[22]=e=>n.pageFin=e),color:"cyan-4"},null,8,["modelValue"])])]),(0,l._)("div",Ti,[(0,l._)("div",Di,[(0,l.Wm)(h,{label:"Code CPF de début",modelValue:n.codeDebut,"onUpdate:modelValue":t[23]||(t[23]=e=>n.codeDebut=e),color:"cyan-4",mask:n.maskFormat},null,8,["modelValue","mask"])]),(0,l._)("div",Zi,[(0,l.Wm)(h,{label:"Code CPF de fin",modelValue:n.codeFin,"onUpdate:modelValue":t[24]||(t[24]=e=>n.codeFin=e),color:"cyan-4",mask:n.maskFormat},null,8,["modelValue","mask"])])])])),_:1}),(0,l.Wm)(m),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l._)("div",Ni,[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{flat:"",label:"Importer",onClick:r.importer,color:"green-4"},null,8,["onClick"]),(0,l.Wm)(w,{flat:"",label:"Annuler",onClick:t[25]||(t[25]=e=>n.importCatalogue=!1),color:"red-4"})])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})]),(0,l._)("div",zi,[(0,l._)("div",Ri,[(0,l.Uk)((0,g.zw)(r.countMatieresCatalogue)+" matières premières disponibles ",1),(0,l.Wm)(w,{flat:"",size:"md",onClick:t[27]||(t[27]=e=>n.toggleCard=!n.toggleCard),icon:n.toggleCard?"list":"grid_view"},null,8,["icon"])])]),(0,l._)("div",Oi,[(0,l.Wm)(h,{ref:"searchInput",modelValue:n.searchQuery,"onUpdate:modelValue":t[28]||(t[28]=e=>n.searchQuery=e),label:"Recherche...",onInput:e.filterMatieres,color:"cyan-4",onMouseover:t[29]||(t[29]=e=>r.changeLabelColor("searchInput","#ffb74d")),onMouseleave:t[30]||(t[30]=e=>r.changeLabelColor("searchInput","")),onFocus:t[31]||(t[31]=e=>r.onFocus("searchQuery","#4dd0e1")),onBlur:t[32]||(t[32]=e=>r.onBlur("searchQuery"))},{append:(0,l.w5)((()=>[(0,l.Wm)(x,{name:"search",color:"cyan-4"})])),_:1},8,["modelValue","onInput"])])]),(0,l._)("div",Ai,[(0,l._)("div",Bi,[n.toggleCard?((0,l.wg)(),(0,l.iD)("div",$i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.filteredMatieres,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"col-2 q-pa-sm",key:e.id,onClick:t=>r.redirectToLink(e.id)},[(0,l.Wm)(y,{bordered:"",class:"card-maxi justify-center items-center text-center relative"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(S,{class:"logo-card-mini",src:pl,loading:"lazy","spinner-color":"red-4",alt:e.designation},{loading:(0,l.w5)((()=>[(0,l.Wm)(q,{color:"red-4"})])),default:(0,l.w5)((()=>[(0,l.Wm)(x,{name:"Cooper"===e.fournisseur.name?"copyright":"info",class:"icon-background"},null,8,["name"]),(0,l._)("div",Gi,[(0,l._)("div",null,(0,g.zw)(e.designation),1),(0,l._)("div",null,(0,g.zw)(e.prix)+"€ - "+(0,g.zw)(e.qté)+(0,g.zw)(e.unite),1),(0,l._)("div",null,"Ref fournisseur : "+(0,g.zw)(e.code_fournisseur),1),(0,l._)("div",null,"EAN : "+(0,g.zw)(e.cip),1)])])),_:2},1032,["alt"])]),e.cmr?((0,l.wg)(),(0,l.iD)("div",Yi,[e.cmr?((0,l.wg)(),(0,l.j4)(S,{key:0,class:"q-ml-xs q-mb-xs fade-blink",src:Ys,style:{width:"30px",height:"30px"}})):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l.Wm)(_,{class:"absolute-bottom-right q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"add_box",onClick:(0,a.iM)((t=>r.openDialog(e)),["stop"])},null,8,["onClick"])])),_:2},1024)])),_:2},1024)],8,Hi)))),128))])):((0,l.wg)(),(0,l.iD)("div",Ki,[(0,l.Wm)(V,{bordered:"",class:"col-12 bg-white bg-op-8"},{default:(0,l.w5)((()=>[Ji,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.filteredMatieres,(e=>((0,l.wg)(),(0,l.j4)(I,{class:"row hover-effect",key:e.id,clickable:"",onClick:t=>r.redirectToLink(e.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"col-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.designation),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(U,{class:"col-1 text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.qté)+(0,g.zw)(e.unite),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(U,{class:"col-1 text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.prix)+"€",1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(U,{class:"col-2 text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.code_fournisseur),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(U,{class:"col-2 text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.cip),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(U,{class:"col-1 text-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{caption:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.fournisseur.name),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(U,{class:"col-1 text-center"},{default:(0,l.w5)((()=>[e.cmr?((0,l.wg)(),(0,l.j4)(F,{key:0,fade:"",size:"fa-lg",icon:"fa-solid fa-skull-crossbones",style:{color:"#e57373"},class:"q-ml-md"})):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(U,{class:"col-1"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{flat:"",icon:"add_box",color:"cyan-4",onClick:(0,a.iM)((t=>r.openDialog(e)),["stop"])},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{modelValue:e.addMatiereCat,"onUpdate:modelValue":t[42]||(t[42]=t=>e.addMatiereCat=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[Xi,ec,(0,l._)("div",tc,(0,g.zw)(n.selectedMatiere.designation)+" "+(0,g.zw)(n.selectedMatiere.cdt)+" "+(0,g.zw)(n.selectedMatiere.qté)+(0,g.zw)(n.selectedMatiere.unite)+" "+(0,g.zw)(n.selectedMatiere.fournisseur.name)+" ref:"+(0,g.zw)(n.selectedMatiere.code_fournisseur),1),oc,ac])),_:1}),(0,l.Wm)(m),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l._)("div",lc,[(0,l._)("div",sc,[(0,l.Wm)(h,{modelValue:e.nom,"onUpdate:modelValue":t[34]||(t[34]=t=>e.nom=t),label:"Désignation",color:"cyan-4",class:"hover-effect"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(w,{flat:"",color:"cyan-4",class:"hover-effect-success",onClick:t[33]||(t[33]=e=>this.nom=this.selectedMatiere.designation)},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{size:"fa-sm",icon:"fa-solid fa-clone"})])),_:1})])),_:1},8,["modelValue"])])]),(0,l._)("div",nc,[(0,l._)("div",rc,[(0,l.Wm)(P,{modelValue:e.stockee,"onUpdate:modelValue":t[35]||(t[35]=t=>e.stockee=t),size:"md",icon:"inventory",label:"Stockée",color:"green-4"},null,8,["modelValue"])]),(0,l._)("div",ic,[(0,l.Wm)(P,{modelValue:e.cde_auto,"onUpdate:modelValue":t[36]||(t[36]=t=>e.cde_auto=t),size:"md",icon:"list_alt",label:"Commande auto",color:"purple-4"},null,8,["modelValue"])])]),(0,l._)("div",cc,[(0,l._)("div",uc,[(0,l.Wm)(f,{label:"Unité de mesure",class:"hover-effect",color:"cyan-4",modelValue:e.uniteMesure,"onUpdate:modelValue":t[37]||(t[37]=t=>e.uniteMesure=t),options:e.unitesOptions,"options-label":"label","options-value":"value"},null,8,["modelValue","options"])]),(0,l._)("div",dc,[(0,l.Wm)(f,{label:"Liste",class:"hover-effect",color:"cyan-4",modelValue:e.liste,"onUpdate:modelValue":t[38]||(t[38]=t=>e.liste=t),options:e.listesOptions,"options-label":"label","options-value":"value"},null,8,["modelValue","options"])])]),(0,l._)("div",mc,[(0,l._)("div",pc,[(0,l.Wm)(h,{modelValue:e.stock_mini,"onUpdate:modelValue":t[39]||(t[39]=t=>e.stock_mini=t),label:"Stock mini",color:"cyan-4"},{append:(0,l.w5)((()=>[(0,l._)("div",fc,(0,g.zw)(e.uniteStockNom),1)])),_:1},8,["modelValue"])]),(0,l._)("div",hc,[(0,l.Wm)(f,{label:"Forme",class:"hover-effect",color:"cyan-4",modelValue:e.forme,"onUpdate:modelValue":t[40]||(t[40]=t=>e.forme=t),options:e.formesOptions,"options-label":"label","options-value":"value"},null,8,["modelValue","options"])])])])),_:1}),(0,l.Wm)(m),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l._)("div",wc,[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{flat:"",label:"Transférer",onClick:e.transfert,color:"green-4"},null,8,["onClick"]),(0,l.Wm)(w,{flat:"",label:"Annuler",onClick:t[41]||(t[41]=t=>e.addMatiereCat=!1),color:"red-4"})])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})]))])])])])])),_:1}))}var _c={name:"MatieresCatalogueCards",components:{AtomSpinner:ya.e},data(){return{toggleCard:!0,showing:!0,items:["Item 1","Item 2","Item 3","Item 4","Item 5"],labels:["Nom","Code fournisseur","CIP/EAN","Prix"],activeLabel:null,selectColumns:!1,importCatalogueExcel:!1,importCatalogue:!1,searchQuery:"",currentPage:1,perPage:24,addDialog:!1,selectedFile:null,selectedMatiere:null,selectedSupplier:null,selectedCategory:null,pageDebut:"",pageFin:"",codeDebut:"",codeFin:"",suppliersOptions:[],categoriesOptions:[],maskFormat:"# ### ###"}},computed:{...(0,u.Se)("matieresPremieres",["allMatieresCatalogue","allCategories","showMenu","expanded","loadingMatieres"]),...(0,u.Se)("suppliers",["allSuppliers"]),...(0,u.Se)("spinner",["isLoading"]),countMatieresCatalogue(){return this.allMatieresCatalogue.length},filteredMatieres(){let e=(this.currentPage-1)*this.perPage,t=this.currentPage*this.perPage,o=this.allMatieresCatalogue;return this.searchQuery&&(o=o.filter((e=>e.designation.toLowerCase().startsWith(this.searchQuery.toLowerCase())))),o.slice(e,t)}},async mounted(){await this.loadMatieresPremieresCatalogue(),await this.loadCategoriesMatieres(),await this.loadSuppliers(),this.showing=!1,this.suppliersOptions=this.allSuppliers.filter((e=>!0===e.download_catalogue)).map((e=>({label:e.name,value:e.id}))),window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},watch:{selectedSupplier:"onSupplierChange"},methods:{...(0,u.nv)("matieresPremieres",["loadMatieresPremieresCatalogue","loadCategoriesMatieres","addImport","toggleActivation","toggleMenu","toggleInfo"]),...(0,u.nv)("suppliers",["loadSuppliers"]),onDragStart(e){event.dataTransfer.setData("text/plain",e)},onDragEnd(){this.activeLabel=null},onLabelDragEnter(e){this.activeLabel=e},onLabelDragLeave(e){this.activeLabel===e&&(this.activeLabel=null)},onDragOver(e){e.preventDefault()},onDrop(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain");null!==this.activeLabel&&(this.labels[this.labels.indexOf(this.activeLabel)]=`${this.activeLabel}: ${this.items[t]}`,this.items.splice(t,1))},isLabelActive(e){return this.activeLabel===e},onSupplierChange(){console.log("suuplierId",this.selectedSupplier),this.selectedSupplier?this.categoriesOptions=this.allCategories.filter((e=>e.fournisseur.id===this.selectedSupplier.value)).map((e=>({label:e.nom,value:e.id}))):this.categoriesOptions=this.allCategories.map((e=>({label:e.nom,value:e.id})))},openDialog(e){this.selectedMatiere={...e},this.addDialog=!0},importer(){console.log("Le formulaire est soumis");const e={pdf:this.selectedFile,fournisseur:this.selectedSupplier.value,categorie:this.selectedCategory.value,page_debut:this.pageDebut,page_fin:this.pageFin,code_debut:this.codeDebut,code_fin:this.codeFin,data_source:"PDF"};console.log(e),this.addImport(e).then((()=>{this.importCatalogue=!1,this.loadMatieresPremieresCatalogue()}))},handleScroll(){let e=document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight;e&&this.loadMore()},loadMore(){this.currentPage++},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1},redirectToLink(e){this.$router.push(`/matiere/${e}`)}}},yc=o(4333);const vc=(0,p.Z)(_c,[["render",gc],["__scopeId","data-v-7c4a207c"]]);var bc=vc;U()(_c,"components",{QPage:De.Z,QFab:fe.Z,QFabAction:he.Z,QForm:Ve.Z,QDialog:Ue.Z,QCard:Fe.Z,QCardSection:Ie.Z,QSeparator:x.Z,QFile:rl.Z,QSelect:Al.Z,QInput:Ce.Z,QBtnGroup:K.Z,QBtn:v.Z,QSplitter:Kn.Z,QCardActions:yc.Z,QIcon:q.Z,QImg:Sl.Z,QSpinnerRings:Ml.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z,QItemLabel:or.Z,QToggle:lr.Z,QField:xe.Z});const kc={class:"q-pa-md"},Wc=(0,l._)("div",{class:"text-h5 text-center text-cyan-4"},"Formule",-1),Cc={class:"row"},xc={class:"row"},qc={class:"row"},Sc={class:"row"},Mc={class:"q-pa-md q-gutter-sm"},Uc={class:"row"},Fc={class:"col-8"},Ic={class:"row"},Vc={class:"row"},Pc={class:"col-12"},Ec={class:"row"},Lc={class:"row"},Qc={class:"row justify-center"};function jc(e,t,o,a,s,n){const r=(0,l.up)("q-icon"),i=(0,l.up)("q-input"),c=(0,l.up)("q-select"),u=(0,l.up)("q-btn"),d=(0,l.up)("q-stepper-navigation"),m=(0,l.up)("q-step"),p=(0,l.up)("q-toggle"),f=(0,l.up)("ParametresForm"),h=(0,l.up)("CompositionForm"),w=(0,l.up)("q-btn-group"),g=(0,l.up)("q-stepper");return(0,l.wg)(),(0,l.iD)("div",kc,[(0,l.Wm)(g,{modelValue:s.step,"onUpdate:modelValue":t[46]||(t[46]=e=>s.step=e),class:"bg-op-8",vertical:"","done-color":"cyan-4","active-color":"orange-4","header-nav":"",animated:""},{default:(0,l.w5)((()=>[Wc,(0,l.Wm)(m,{name:1,title:"Identification",icon:"info",done:s.step>1},{default:(0,l.w5)((()=>[(0,l._)("div",Cc,[(0,l.Wm)(i,{ref:"nomInput",class:"q-mr-lg col-3",modelValue:s.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e),label:"Nom de la formule",color:"cyan-4",onMouseover:t[1]||(t[1]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[2]||(t[2]=t=>e.changeLabelColor("nameInput","")),onFocus:t[3]||(t[3]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[4]||(t[4]=t=>e.onBlur("name"))},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"local_pharmacy",color:"cyan-4"})])),_:1},8,["modelValue"]),(0,l.Wm)(c,{modelValue:s.typePrep,"onUpdate:modelValue":t[5]||(t[5]=e=>s.typePrep=e),color:"cyan-4",class:"col-3 hover-effect",label:"Type de préparation",options:n.allTypePrepLabel,"option-label":"label","option-value":"id"},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"local_pharmacy",color:"cyan-4"})])),_:1},8,["modelValue","options"])]),(0,l._)("div",xc,[(0,l.Wm)(c,{modelValue:s.liste,"onUpdate:modelValue":t[6]||(t[6]=e=>s.liste=e),color:"cyan-4",class:"col-2 hover-effect",label:"Liste",options:n.allListeLabel,"option-label":"label","option-value":"id"},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"gavel",color:"cyan-4"})])),_:1},8,["modelValue","options"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[7]||(t[7]=e=>s.step=2),color:"cyan-4",label:"Suivant",class:"hover-effect"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:2,title:"Voie d'administration",icon:"vaccines",done:s.step>2},{default:(0,l.w5)((()=>[(0,l._)("div",qc,[(0,l.Wm)(c,{modelValue:s.voie,"onUpdate:modelValue":t[8]||(t[8]=e=>s.voie=e),color:"cyan-4",class:"col-3 hover-effect",label:"Sélectionnez la voie",options:n.allVoiesLabel,"option-label":"label","option-value":"value"},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"vaccines",color:"cyan-4"})])),_:1},8,["modelValue","options"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[9]||(t[9]=e=>s.step=3),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(u,{flat:"",onClick:t[10]||(t[10]=e=>s.step=1),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:3,title:"Conservation",icon:"ac_unit",done:s.step>3},{default:(0,l.w5)((()=>[(0,l._)("div",Sc,[(0,l.Wm)(i,{ref:"dureeInput",class:"my-0 col-1",modelValue:s.duree,"onUpdate:modelValue":t[11]||(t[11]=e=>s.duree=e),label:"Durée (j)",color:"cyan-4",onMouseover:t[12]||(t[12]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[13]||(t[13]=t=>e.changeLabelColor("nameInput","")),onFocus:t[14]||(t[14]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[15]||(t[15]=t=>e.onBlur("name"))},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"alarm",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l._)("div",Mc,[(0,l._)("div",null,[(0,l.Wm)(p,{modelValue:s.froid,"onUpdate:modelValue":t[16]||(t[16]=e=>s.froid=e),color:"cyan-4",icon:"ac_unit",label:"4°C - 8°C",size:"md"},null,8,["modelValue"]),(0,l.Wm)(p,{modelValue:s.lumiere,"onUpdate:modelValue":t[17]||(t[17]=e=>s.lumiere=e),color:"yellow-4",icon:"light_mode",label:"Abris de la lumiere",size:"md"},null,8,["modelValue"]),(0,l.Wm)(p,{modelValue:s.agiter,"onUpdate:modelValue":t[18]||(t[18]=e=>s.agiter=e),color:"red-4",icon:"waving_hand",label:"Agiter avant emploi",size:"md"},null,8,["modelValue"])])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[19]||(t[19]=e=>s.step=4),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(u,{flat:"",onClick:t[20]||(t[20]=e=>s.step=2),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:4,title:"Paramètres",icon:"settings",done:s.step>4},{default:(0,l.w5)((()=>[(0,l._)("div",Uc,[(0,l._)("div",Fc,[4===s.step?((0,l.wg)(),(0,l.j4)(f,{key:0})):(0,l.kq)("",!0)])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[21]||(t[21]=e=>s.step=5),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(u,{flat:"",onClick:t[22]||(t[22]=e=>s.step=3),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:5,title:"Mode opératoire",icon:"list_alt",done:s.step>5},{default:(0,l.w5)((()=>[(0,l._)("div",Ic,[(0,l.Wm)(i,{ref:"modeOpInput",class:"my-0 col-3",modelValue:s.modeOperatoire,"onUpdate:modelValue":t[23]||(t[23]=e=>s.modeOperatoire=e),label:"Mode opératoire",color:"cyan-4",autogrow:"",onMouseover:t[24]||(t[24]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[25]||(t[25]=t=>e.changeLabelColor("nameInput","")),onFocus:t[26]||(t[26]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[27]||(t[27]=t=>e.onBlur("name"))},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"menu_book",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[28]||(t[28]=e=>s.step=6),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(u,{flat:"",onClick:t[29]||(t[29]=e=>s.step=4),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:6,title:"Composition",icon:"science",done:s.step>6},{default:(0,l.w5)((()=>[(0,l._)("div",Vc,[(0,l._)("div",Pc,[(0,l.Wm)(h)])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[30]||(t[30]=e=>s.step=7),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(u,{flat:"",onClick:t[31]||(t[31]=e=>s.step=5),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:7,title:"Contre-indications et précautions d'emploi",icon:"warning",done:s.step>7},{default:(0,l.w5)((()=>[(0,l._)("div",Ec,[(0,l.Wm)(i,{ref:"emploiInput",class:"my-0 col-3",modelValue:s.emploi,"onUpdate:modelValue":t[32]||(t[32]=e=>s.emploi=e),label:"Entrez les informations",color:"cyan-4",autogrow:"",onMouseover:t[33]||(t[33]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[34]||(t[34]=t=>e.changeLabelColor("nameInput","")),onFocus:t[35]||(t[35]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[36]||(t[36]=t=>e.onBlur("name"))},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"info",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[37]||(t[37]=e=>s.step=8),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(u,{flat:"",onClick:t[38]||(t[38]=e=>s.step=6),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(m,{name:8,title:"Publications",icon:"article",done:s.step>8},{default:(0,l.w5)((()=>[(0,l._)("div",Lc,[(0,l.Wm)(i,{ref:"publicationsInput",class:"my-0 col-3",modelValue:s.publications,"onUpdate:modelValue":t[39]||(t[39]=e=>s.publications=e),label:"Publications, données de stabilité...",color:"cyan-4",autogrow:"",onMouseover:t[40]||(t[40]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[41]||(t[41]=t=>e.changeLabelColor("nameInput","")),onFocus:t[42]||(t[42]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[43]||(t[43]=t=>e.onBlur("name"))},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"article",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:t[44]||(t[44]=e=>s.step=7),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"}),(0,l.Wm)(u,{flat:"",onClick:t[45]||(t[45]=e=>s.step=9),color:"cyan-4",label:"Terminer",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l._)("div",Qc,[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",onClick:n.submitForm,color:"green-4",label:"Enregistrer",class:"btn-flat-success-pph"},null,8,["onClick"]),(0,l.Wm)(u,{flat:"",color:"red-4",label:"Supprimer",class:"btn-flat-danger-pph"})])),_:1})])])),_:1},8,["modelValue"])])}const Tc=(0,l._)("div",{class:"row"},[(0,l._)("div",{class:"col-3 text-cyan-4 text-center"},"Matière Première"),(0,l._)("div",{class:"col-1 text-cyan-4 text-center"},"Qté"),(0,l._)("div",{class:"col-1 text-cyan-4 text-center"},"Unité"),(0,l._)("div",{class:"col-5 text-cyan-4 text-center"},"Calcul")],-1),Dc={class:"row text-subtitle1 text-cyan-4 justify-center"},Zc=(0,l._)("div",{class:"row text-orange-4 text-subtitle2 justify-center"},"Paramètres de calcul",-1),Nc={class:"row justify-center"},zc={class:"row justify-center"},Rc={class:"row"},Oc={class:"col-4"};function Ac(e,t,o,s,n,r){const i=(0,l.up)("q-select"),c=(0,l.up)("q-input"),u=(0,l.up)("q-btn"),d=(0,l.up)("q-avatar"),m=(0,l.up)("q-btn-group"),p=(0,l.up)("q-card-section"),f=(0,l.up)("q-separator"),h=(0,l.up)("q-card-actions"),w=(0,l.up)("q-card"),_=(0,l.up)("q-dialog"),y=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(y,{onSubmit:(0,a.iM)(r.submitForm,["prevent"])},{default:(0,l.w5)((()=>[Tc,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.formRows,((e,o)=>((0,l.wg)(),(0,l.iD)("div",{key:o,class:"row"},[(0,l.Wm)(i,{square:"",outlined:"",modelValue:e.matiere,"onUpdate:modelValue":t=>e.matiere=t,color:"cyan-4",class:"col-3 hover-effect",options:r.allMatieresLabel,"option-label":"label","option-value":"id"},null,8,["modelValue","onUpdate:modelValue","options"]),(0,l.Wm)(c,{square:"",outlined:"",modelValue:e.qté,"onUpdate:modelValue":t=>e.qté=t,color:"cyan-4",class:"col-1 bd-hover-effect text-center"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(i,{square:"",outlined:"",modelValue:e.unite,"onUpdate:modelValue":t=>e.unite=t,color:"cyan-4",class:"col-1 hover-effect text-center",options:r.allUnitesMesure,"option-label":"label","option-value":"id"},null,8,["modelValue","onUpdate:modelValue","options"]),(0,l.Wm)(c,{readonly:"",modelValue:e.calculInput,"onUpdate:modelValue":t=>e.calculInput=t,square:"",outlined:"",color:"cyan-4",class:"col-5 bd-hover-effect text-center"},{prepend:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",size:"md",onClick:e=>r.openCalculDialog(o),icon:"calculate",color:"cyan-4",class:"hover-effect"},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(m,{flat:"",class:"q-ml-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",size:"sm",onClick:r.addRow,icon:"add_box",color:"green-4",class:"hover-effect-success"},null,8,["onClick"]),(0,l.Wm)(u,{flat:"",size:"sm",onClick:r.removeRow,icon:"delete_forever",color:"red-4",class:"hover-effect-warning"},null,8,["onClick"])])),_:1}),(0,l.Wm)(_,{modelValue:n.calculDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>n.calculDialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l._)("div",Dc," Calcul pour "+(0,g.zw)(n.formRows[n.selectedRowIndex].matiere.nom),1)])),_:1}),(0,l.Wm)(f),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[Zc,(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l._)("div",Nc,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.filteredParametresFormules,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[(0,l.Wm)(u,{flat:"",color:"cyan-4",class:"hover-effect",label:e.label,onClick:t=>r.inputParametre(e)},null,8,["label","onClick"])])))),128)),(0,l.Wm)(u,{flat:"",color:"cyan-4",class:"hover-effect",label:"Quantité - "+(n.formRows[n.selectedRowIndex]?.unite?.nom||"Unité inconnue"),onClick:t[0]||(t[0]=e=>r.inputParametre("Quantité - "+(n.formRows[n.selectedRowIndex]?.unite?.nom||"")))},null,8,["label"])])])),_:2},1024)])),_:2},1024),(0,l.Wm)(f),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{modelValue:e.calcul,"onUpdate:modelValue":t=>e.calcul=t},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.Wm)(f),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l._)("div",zc,[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{flat:"",color:"green-4",label:"Valider",onClick:r.validerCalcul},null,8,["onClick"]),(0,l.Wm)(u,{flat:"",class:"hover-effect",color:"cyan-4",label:"Effacer",onClick:r.effacerCalcul},null,8,["onClick"]),(0,l.Wm)(u,{flat:"",color:"red-4",label:"Annuler",onClick:t[1]||(t[1]=e=>n.calculDialog=!1)})])),_:1})])])),_:1})])),_:2},1024)])),_:2},1032,["modelValue"])])))),128)),(0,l._)("div",Rc,[(0,l._)("div",Oc,[(0,l.Wm)(u,{flat:"",onClick:r.submitForm,color:"green-4",class:"q-mt-xs btn-flat-success-pph"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Valider ")])),_:1},8,["onClick"])])])])),_:1},8,["onSubmit"])}var Bc={data(){return{calculDialog:!1,enregistrements:[],selectedRowIndex:null,calculDetails:[],formRows:[{num_formule:null,matiere:null,"qté":"",unite:null,calcul:"",calculInput:""}]}},computed:{...(0,u.Se)("matieresPremieres",["allMatieres","allUnites"]),...(0,u.Se)("formules",["allParametres","allParametresFormules"]),filteredParametresFormules(){if(null!==this.selectedRowIndex){const e=this.formRows[this.selectedRowIndex].num_formule,t=this.allParametres;return console.log("allparametres",this.allParametres),this.allParametresFormules.filter((t=>t.num_formule.toString()===e.toString())).map((e=>{const o=t.find((t=>t.id===e.parametre));return{...e,label:o?`${o.nom} - ${o.unite}`:"Inconnu",id:e.parametre}}))}return[]},allMatieresLabel(){return this.allMatieres.map((e=>({...e,label:`${e.nom} ${e.qté_cdt}${e.forme.unite_mesure.nom} - ${e.forme.nom} - ${e.fournisseur.name}`,id:`${e.id}`})))},allUnitesMesure(){return this.allUnites.map((e=>({...e,label:`${e.nom}`})))}},async created(){await this.loadMatieresPremieres(),await this.loadUnites(),await this.loadParametres(),await this.loadParametresFormules(),await this.createNewNumCompo()},methods:{...(0,u.nv)("matieresPremieres",["loadMatieresPremieres","loadUnites"]),...(0,u.nv)("formules",["addComposition"]),...(0,u.nv)("formules",["loadParametres","loadParametresFormules"]),validerCalcul(){if(null!==this.selectedRowIndex){this.formRows[this.selectedRowIndex].calculInput=this.formRows[this.selectedRowIndex].calcul;let e=this.formRows[this.selectedRowIndex].calcul;this.calculDetails.forEach((t=>{if(null!==t.id){const o=new RegExp(t.label,"g");e=e.replace(o,t.id)}})),this.formRows[this.selectedRowIndex].calcul=e,this.calculDetails=[],this.calculDialog=!1}},openCalculDialog(e){this.selectedRowIndex=e,this.calculDialog=!0,this.formRows[this.selectedRowIndex].calculInput&&(this.formRows[this.selectedRowIndex].calcul=this.formRows[this.selectedRowIndex].calculInput)},inputParametre(e){if(console.log("Paramètre reçu :",e),null!==this.selectedRowIndex&&this.formRows[this.selectedRowIndex]){let t,o;"string"===typeof e?(t=e,o=null):(t=e.label,o=e.id),this.formRows[this.selectedRowIndex].calcul+=t,this.calculDetails.push({label:t,id:o})}},effacerCalcul(){this.formRows[this.selectedRowIndex].calcul=" "},removeRow(e){const t=this.formRows.indexOf(e);this.formRows.splice(t,1)},async createNewNumCompo(){try{const e=await Je.get("/PPH/nouvelle-formule/dernier_id"),t=e.data.dernierId,o=t+1;console.error("dernier id",o),0!==this.formRows.length&&null!==this.formRows[0].num_formule||(this.formRows[0].num_formule=o)}catch(e){console.error("Erreur lors de la récupération du dernier ID de la formule",e)}},async loadRecords(){try{const e=await this.createNewNumCompo(),t=await Je.get(`/PPH/composition/filter/${e}`);this.enregistrements=t.data,console.log("Enregistrements chargés:",this.enregistrements)}catch(e){console.error("Erreur lors du chargement des enregistrements:",e)}},async updateFilteredRecords(){const e=await this.createNewNumCompo(),t=this.enregistrements.filter((t=>t.num_formule===e));0===t.length?this.addRow():this.formRows=t.map((e=>({num_formule:e.num_formule,matiere:e.matiere,"qté":e.qté,unite:e.unite,calcul:e.calcul})))},async addRow(){try{const e=await Je.get("/PPH/nouvelle-formule/dernier_id"),t=e.data.dernierId,o=t+1;this.formRows.push({num_formule:o,matiere:null,"qté":"",unite:null,calcul:""})}catch(e){console.error("Erreur lors de la récupération du dernier ID du modèle Formule",e)}},async submitForm(){const e={compositions:this.formRows.map((e=>({num_formule:e.num_formule,matiere:e.matiere.id,"qté":e.qté,unite:e.unite.id,calcul:e.calcul})))};this.addComposition(e)}}},$c=o(9393);const Hc=(0,p.Z)(Bc,[["render",Ac]]);var Gc=Hc;U()(Bc,"components",{QForm:Ve.Z,QSelect:Al.Z,QInput:Ce.Z,QAvatar:$c.Z,QBtn:v.Z,QBtnGroup:K.Z,QDialog:Ue.Z,QCard:Fe.Z,QCardSection:Ie.Z,QSeparator:x.Z,QCardActions:yc.Z});const Yc={class:"row"},Kc={class:"col-8"},Jc={class:"row"},Xc={class:"col-4"};function eu(e,t,o,s,n,r){const i=(0,l.up)("q-select"),c=(0,l.up)("q-btn"),u=(0,l.up)("q-btn-group"),d=(0,l.up)("q-form");return(0,l.wg)(),(0,l.iD)("div",Yc,[(0,l._)("div",Kc,[(0,l.Wm)(d,{onSubmit:(0,a.iM)(r.submitForm,["prevent"])},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.formRows,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"row"},[(0,l.Wm)(i,{square:"",outlined:"",modelValue:e.parametre,"onUpdate:modelValue":t=>e.parametre=t,color:"cyan-4",class:"col-6 hover-effect",options:r.allParametresLabel,"option-label":"label","option-value":"id"},null,8,["modelValue","onUpdate:modelValue","options"]),(0,l.Wm)(u,{flat:"",class:"q-ml-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",size:"sm",onClick:r.addRow,icon:"add_box",color:"green-4"},null,8,["onClick"]),(0,l.Wm)(c,{flat:"",size:"sm",onClick:r.removeRow,icon:"delete_forever",color:"red-4"},null,8,["onClick"])])),_:1})])))),128)),(0,l._)("div",Jc,[(0,l._)("div",Xc,[(0,l.Wm)(c,{flat:"",onClick:r.submitForm,color:"green-4",class:"q-mt-xs"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Valider ")])),_:1},8,["onClick"])])])])),_:1},8,["onSubmit"])])])}var tu={data(){return{selectedRowIndex:null,formRows:[{num_formule:null,parametre:null}]}},computed:{...(0,u.Se)("formules",["allParametres"]),allParametresLabel(){return this.allParametres.map((e=>({...e,label:`${e.nom} - ${e.unite}`})))}},async created(){this.loadLastId(),this.loadParametres()},methods:{...(0,u.nv)("formules",["loadParametres","addParametres"]),async loadLastId(){try{const e=await Je.get("/PPH/nouvelle-formule/dernier_id"),t=e.data.dernierId,o=t+1;this.formRows[0].num_formule=o}catch(e){console.error("Erreur lors de la récupération du dernier ID de la formule",e)}},async addRow(){try{const e=await Je.get("PPH/nouvelle-formule/dernier_id/"),t=e.data.dernierId,o=t+1;this.formRows.push({num_formule:o,parametre:null})}catch(e){console.error("Erreur lors de la récupération du dernier ID du modèle Formule",e)}},removeRow(e){const t=this.formRows.indexOf(e);this.formRows.splice(t,1)},async submitForm(){const e=this.formRows.map((e=>({num_formule:e.num_formule,parametre:e.parametre.id})));console.log("Envoi de formData:",e),this.addParametres(e)}}};const ou=(0,p.Z)(tu,[["render",eu]]);var au=ou;U()(tu,"components",{QForm:Ve.Z,QSelect:Al.Z,QBtnGroup:K.Z,QBtn:v.Z});var lu={components:{CompositionForm:Gc,ParametresForm:au},data(){return{step:1,name:"",typePrep:null,liste:null,voie:null,duree:"",froid:!1,lumiere:!1,agiter:!1,modeOperatoire:"",emploi:"",publications:""}},computed:{...(0,u.Se)("formules",["allTypes","allListes"]),...(0,u.Se)("voiesAdministration",["allVoies"]),allTypePrepLabel(){return this.allTypes.map((e=>({...e,label:`${e.nom}`})))},allListeLabel(){return this.allListes.map((e=>({...e,label:`${e.nom}`})))},allVoiesLabel(){return this.allVoies.map((e=>({...e,label:`${e.nom}`})))}},created(){this.loadVoies(),this.loadTypes(),this.loadListes()},methods:{...(0,u.nv)("formules",["loadTypes","loadListes","addFormule"]),...(0,u.nv)("voiesAdministration",["loadVoies"]),async submitForm(){const e={nom:this.name,type:this.typePrep,liste:this.liste,voie:this.voie,duree:this.duree,froid:this.froid,lumiere:this.lumiere,agiter:this.agiter,mode_operatoire:this.modeOperatoire,contre_indications:this.emploi,publications:this.publications};this.addFormule(e)}}};const su=(0,p.Z)(lu,[["render",jc]]);var nu=su;U()(lu,"components",{QStepper:ll.Z,QStep:sl.Z,QInput:Ce.Z,QIcon:q.Z,QSelect:Al.Z,QStepperNavigation:nl.Z,QBtn:v.Z,QToggle:lr.Z,QBtnGroup:K.Z});const ru={class:"row justify-center"},iu={class:"col-md-12"},cu={class:"row q-mx-sm"},uu={class:"col-1 q-mt-sm"},du={class:"col-2 offset-9"},mu={class:"row q-mt-sm"},pu={class:"col col-12 justify-center"},fu={class:"row justify-start"},hu=["onClick"],wu=["onClick"],gu={class:"absolute-bottom-left"},_u={class:"row"};function yu(e,t,o,s,n,r){const i=(0,l.up)("q-btn"),c=(0,l.up)("router-link"),u=(0,l.up)("q-icon"),d=(0,l.up)("q-input"),m=(0,l.up)("q-img"),p=(0,l.up)("q-item-section"),f=(0,l.up)("q-item"),h=(0,l.up)("q-list"),w=(0,l.up)("q-menu"),_=(0,l.up)("font-awesome-icon"),y=(0,l.up)("q-btn-group"),v=(0,l.up)("q-card"),b=(0,l.up)("q-page"),k=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(b,null,{default:(0,l.w5)((()=>[(0,l._)("div",ru,[(0,l._)("div",iu,[(0,l._)("div",cu,[(0,l._)("div",uu,[(0,l.Wm)(c,{to:"/formules/"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{round:"",class:"glossy btn-grey-primary-pph",icon:"add"})])),_:1})]),(0,l._)("div",du,[(0,l.Wm)(d,{ref:"searchInput",modelValue:n.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchQuery=e),label:"Recherche...",onInput:r.filterFormules,color:"cyan-4",onMouseover:t[1]||(t[1]=e=>r.changeLabelColor("searchInput","#ffb74d")),onMouseleave:t[2]||(t[2]=e=>r.changeLabelColor("searchInput","")),onFocus:t[3]||(t[3]=e=>r.onFocus("searchQuery","#4dd0e1")),onBlur:t[4]||(t[4]=e=>r.onBlur("searchQuery"))},{append:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"search",color:"cyan-4"})])),_:1},8,["modelValue","onInput"])])]),(0,l._)("div",mu,[(0,l._)("div",pu,[(0,l._)("div",fu,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.filteredFormules,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"col-2 q-pa-sm",key:t.id,onClick:e=>r.redirectToLink(t.id)},[(0,l.Wm)(v,{bordered:"",class:(0,g.C_)(["card-maxi justify-center items-center text-center relative",{"bd-red-4":!t.is_activate}])},{default:(0,l.w5)((()=>[(0,l._)("div",{onClick:e=>r.redirectToLink(t.id),class:"card-content"},[(0,l.Wm)(m,{class:"logo-card-mini",src:pl,alt:t.nom},{default:(0,l.w5)((()=>[t.is_valid?((0,l.wg)(),(0,l.j4)(u,{key:0,name:"done_all",color:"green-4",class:"icon-background"})):(0,l.kq)("",!0),t.is_valid?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(u,{key:1,name:"remove_done",color:"red-4",class:"icon-background"})),(0,l._)("div",{class:(0,g.C_)(["absolute-top hover-effect q-my-none",{"text-cyan-1":t.is_activate,"text-red-4":!t.is_activate}])},[(0,l._)("div",null,(0,g.zw)(t.nom),1),(0,l._)("div",null,(0,g.zw)(t.type.nom),1)],2)])),_:2},1032,["alt"]),(0,l.Wm)(i,{flat:"",color:"white",class:"absolute-top-right hover-effect q-pa-none q-ma-none",icon:"more_vert",onClick:(0,a.iM)((o=>e.toggleMenu(t.id)),["stop"])},null,8,["onClick"]),(0,l.Wm)(w,{fit:"",anchor:"top right",self:"bottom middle",modelValue:e.showMenu[t.id],"onUpdate:modelValue":o=>e.showMenu[t.id]=o},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{clickable:"",onClick:(0,a.iM)((o=>e.toggleActivation({formuleId:t.id,isActive:t.is_activate})),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{class:"hover-effect"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.is_activate?"Désactiver":"Activer"),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[k]])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])],8,wu),(0,l._)("div",gu,[(0,l._)("div",_u,[t.froid?((0,l.wg)(),(0,l.j4)(_,{key:0,fade:"",icon:"fa-solid fa-snowflake",class:"q-ml-xs q-mb-xs fa-2x",style:{color:"#4dd0e1"}})):(0,l.kq)("",!0),t.agiter?((0,l.wg)(),(0,l.j4)(u,{key:1,name:"waving_hand",class:"q-ml-xs q-mb-xs",color:"cyan-4",size:"md"})):(0,l.kq)("",!0),t.lumiere?((0,l.wg)(),(0,l.j4)(u,{key:2,name:"light_mode",class:"q-ml-xs q-mb-xs",color:"red-4",size:"md"})):(0,l.kq)("",!0)])]),(0,l.Wm)(y,{class:"absolute-bottom-right q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"bar_chart"}),(0,l.Wm)(i,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"list",onClick:(0,a.iM)((o=>e.toggleCompo(t.id)),["stop"])},null,8,["onClick"]),(0,l.Wm)(i,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"settings",onClick:(0,a.iM)((o=>e.toggleSettings(t.id)),["stop"])},null,8,["onClick"]),(0,l.Wm)(i,{class:"hover-effect",color:"cyan-4",round:"",flat:"",dense:"",icon:"info",onClick:(0,a.iM)((o=>e.toggleInfo(t.id)),["stop"])},null,8,["onClick"])])),_:2},1024),(0,l.Wm)(w,{fit:"",anchor:"bottom right",self:"top middle",modelValue:e.expanded[t.id],"onUpdate:modelValue":o=>e.expanded[t.id]=o},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[t.voie?((0,l.wg)(),(0,l.j4)(f,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Voie : ")])),_:1}),(0,l.Wm)(p,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.voie.nom),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),t.liste?((0,l.wg)(),(0,l.j4)(f,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Liste : ")])),_:1}),(0,l.Wm)(p,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(t.liste.nom)+" € ",1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["class"])],8,hu)))),128))])])])])])])),_:1})}var vu={name:"formulaCards",data(){return{searchQuery:""}},computed:{...(0,u.Se)("formules",["allFormules","showMenu","expanded"]),filteredFormules(){return this.searchQuery?this.allFormules.filter((e=>e.nom.toLowerCase().startsWith(this.searchQuery.toLowerCase()))):this.allFormules}},created(){this.loadFormules(),console.log(this.allFormules)},methods:{...(0,u.nv)("formules",["loadFormules","toggleActivation","validFormule","toggleInfo","toggleMenu"]),filterFormules(){return this.searchQuery?this.allFormules.filter((e=>e.nom.toLowerCase().startsWith(this.searchQuery.toLowerCase()))):this.allFormules},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1},redirectToLink(e){this.$router.push(`/supplier/${e}`)}}};const bu=(0,p.Z)(vu,[["render",yu]]);var ku=bu;U()(vu,"components",{QPage:De.Z,QBtn:v.Z,QInput:Ce.Z,QIcon:q.Z,QCard:Fe.Z,QImg:Sl.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z,QBtnGroup:K.Z,QField:xe.Z}),U()(vu,"directives",{ClosePopup:S.Z});const Wu={class:"q-pa-md"},Cu=(0,l._)("div",{class:"row text-h6 justify-center text-cyan-4"},"Matière première",-1),xu={class:"row"},qu=(0,l._)("div",{class:"row text-subtitle1 text-cyan-4 justify-center"}," Ajouter un type de matière première ",-1),Su={class:"row justify-center"},Mu={class:"row"},Uu=(0,l._)("div",{class:"row text-subtitle1 text-cyan-4 justify-center"}," Ajouter une forme de matière première ",-1),Fu=(0,l._)("br",null,null,-1),Iu=(0,l._)("div",{class:"row"},[(0,l._)("div",{class:"text-cyan-4"},"Unités : ")],-1),Vu={class:"row"},Pu={class:"row justify-center"},Eu={class:"row"},Lu={class:"row"},Qu={class:"col-8"},ju={class:"row"},Tu=(0,l._)("div",{class:"row text-subtitle1 text-cyan-4 justify-center"}," Ajouter un conditionnement ",-1),Du={class:"row justify-center"},Zu={class:"row"},Nu={class:"uniteStockName text-subtitle2 text-cyan-4"},zu={class:"row"},Ru=(0,l._)("div",{class:"uniteStockName text-subtitle2 text-cyan-4"},"€",-1),Ou={class:"row"},Au={class:"uniteStockName text-subtitle2 text-cyan-4"},Bu={class:"row"},$u={class:"row"},Hu={class:"row justify-center"};function Gu(e,t,o,a,s,n){const r=(0,l.up)("q-icon"),i=(0,l.up)("q-input"),c=(0,l.up)("q-btn"),u=(0,l.up)("q-select"),d=(0,l.up)("q-card-section"),m=(0,l.up)("q-separator"),p=(0,l.up)("q-card"),f=(0,l.up)("q-dialog"),h=(0,l.up)("q-stepper-navigation"),w=(0,l.up)("q-step"),_=(0,l.up)("font-awesome-icon"),y=(0,l.up)("q-toggle"),v=(0,l.up)("q-btn-group"),b=(0,l.up)("q-stepper");return(0,l.wg)(),(0,l.iD)("div",Wu,[(0,l.Wm)(b,{modelValue:s.step,"onUpdate:modelValue":t[64]||(t[64]=e=>s.step=e),class:"bg-op-8",vertical:"","done-color":"cyan-4","active-color":"orange-4","header-nav":"",animated:""},{default:(0,l.w5)((()=>[Cu,(0,l.Wm)(w,{name:1,title:"Identification",icon:"info",done:s.step>1},{default:(0,l.w5)((()=>[(0,l._)("div",xu,[(0,l.Wm)(i,{ref:"nomInput",class:"q-mr-lg col-3",modelValue:s.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e),label:"Nom",color:"cyan-4",onMouseover:t[1]||(t[1]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[2]||(t[2]=t=>e.changeLabelColor("nameInput","")),onFocus:t[3]||(t[3]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[4]||(t[4]=t=>e.onBlur("name"))},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"local_pharmacy",color:"cyan-4"})])),_:1},8,["modelValue"]),(0,l.Wm)(u,{modelValue:s.type,"onUpdate:modelValue":t[6]||(t[6]=e=>s.type=e),color:"cyan-4",class:"col-3 hover-effect",label:"Type",options:n.allTypeLabel,"option-label":"label","option-value":"id"},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"medication",color:"cyan-4"})])),append:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:t[5]||(t[5]=e=>s.typeDialog=!0),icon:"add_box",color:"green-4",class:"hover-effect"})])),_:1},8,["modelValue","options"]),(0,l.Wm)(f,{modelValue:s.typeDialog,"onUpdate:modelValue":t[13]||(t[13]=e=>s.typeDialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[qu])),_:1}),(0,l.Wm)(m),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:s.typeMat,"onUpdate:modelValue":t[7]||(t[7]=e=>s.typeMat=e),label:"Type",color:"cyan-4",onMouseover:t[8]||(t[8]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[9]||(t[9]=t=>e.changeLabelColor("nameInput","")),onFocus:t[10]||(t[10]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[11]||(t[11]=t=>e.onBlur("name"))},null,8,["modelValue"])])),_:1}),(0,l.Wm)(m),(0,l._)("div",Su,[(0,l.Wm)(c,{flat:"",onClick:n.validerType,label:"Ajouter",color:"green-4"},null,8,["onClick"]),(0,l.Wm)(c,{flat:"",onClick:t[12]||(t[12]=e=>s.typeDialog=!1),label:"Annuler",color:"red-4"})])])),_:1})])),_:1},8,["modelValue"])]),(0,l._)("div",Mu,[(0,l.Wm)(u,{modelValue:s.forme,"onUpdate:modelValue":t[15]||(t[15]=e=>s.forme=e),color:"cyan-4",class:"col-2 hover-effect",label:"Forme",options:n.allFormeLabel,"option-label":"label","option-value":"id",onInput:n.updateForme},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"medication_liquid",color:"cyan-4"})])),append:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:t[14]||(t[14]=e=>s.formeDialog=!0),icon:"add_box",color:"green-4",class:"hover-effect"})])),_:1},8,["modelValue","options","onInput"]),(0,l.Wm)(f,{modelValue:s.formeDialog,"onUpdate:modelValue":t[24]||(t[24]=e=>s.formeDialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[Uu])),_:1}),(0,l.Wm)(m),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:s.formeMat,"onUpdate:modelValue":t[16]||(t[16]=e=>s.formeMat=e),label:"Forme",color:"cyan-4",onMouseover:t[17]||(t[17]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[18]||(t[18]=t=>e.changeLabelColor("nameInput","")),onFocus:t[19]||(t[19]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[20]||(t[20]=t=>e.onBlur("name"))},null,8,["modelValue"]),Fu,Iu,(0,l._)("div",Vu,[(0,l.Wm)(u,{modelValue:s.uniteStock,"onUpdate:modelValue":t[21]||(t[21]=e=>s.uniteStock=e),color:"cyan-4",class:"col-4 hover-effect",label:"Stock",options:n.allUniteLabel,"option-label":"label","option-value":"id"},null,8,["modelValue","options"]),(0,l.Wm)(u,{modelValue:s.uniteMes,"onUpdate:modelValue":t[22]||(t[22]=e=>s.uniteMes=e),color:"cyan-4",class:"col-4 offset-1 hover-effect",label:"Mesure",options:n.allUniteLabel,"option-label":"label","option-value":"id"},null,8,["modelValue","options"])])])),_:1}),(0,l.Wm)(m),(0,l._)("div",Pu,[(0,l.Wm)(c,{flat:"",onClick:n.validerForme,label:"Ajouter",color:"green-4"},null,8,["onClick"]),(0,l.Wm)(c,{flat:"",onClick:t[23]||(t[23]=e=>s.formeDialog=!1),label:"Annuler",color:"red-4"})])])),_:1})])),_:1},8,["modelValue"])]),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:t[25]||(t[25]=e=>s.step=2),color:"cyan-4",label:"Suivant",class:"hover-effect"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(w,{name:2,title:"Fournisseur",icon:"forklift",done:s.step>2},{default:(0,l.w5)((()=>[(0,l._)("div",Eu,[(0,l.Wm)(u,{modelValue:s.fournisseur,"onUpdate:modelValue":t[26]||(t[26]=e=>s.fournisseur=e),color:"cyan-4",class:"col-3 hover-effect",label:"Sélectionnez un fournisseur",options:n.allSuppliersLabel,"option-label":"label","option-value":"id"},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"forklift",color:"cyan-4"})])),_:1},8,["modelValue","options"])]),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:t[27]||(t[27]=e=>s.step=3),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(c,{flat:"",onClick:t[28]||(t[28]=e=>s.step=1),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(w,{name:3,title:"Conditionnement",icon:"science",done:s.step>3},{default:(0,l.w5)((()=>[(0,l._)("div",Lu,[(0,l._)("div",Qu,[(0,l._)("div",ju,[(0,l.Wm)(u,{modelValue:s.cdt,"onUpdate:modelValue":t[30]||(t[30]=e=>s.cdt=e),color:"cyan-4",class:"col-3 hover-effect",label:"Conditionnement",options:n.allCdtLabel,"option-label":"label","option-value":"id"},{append:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:t[29]||(t[29]=e=>s.cdtDialog=!0),icon:"add_box",color:"green-4",class:"hover-effect"})])),before:(0,l.w5)((()=>[(0,l.Wm)(_,{icon:"fa-solid fa-prescription-bottle",style:{color:"#4dd0e1"}})])),_:1},8,["modelValue","options"]),(0,l.Wm)(f,{modelValue:s.cdtDialog,"onUpdate:modelValue":t[37]||(t[37]=e=>s.cdtDialog=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[Tu])),_:1}),(0,l.Wm)(m),(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:s.cdtMat,"onUpdate:modelValue":t[31]||(t[31]=e=>s.cdtMat=e),label:"Type",color:"cyan-4",onMouseover:t[32]||(t[32]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[33]||(t[33]=t=>e.changeLabelColor("nameInput","")),onFocus:t[34]||(t[34]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[35]||(t[35]=t=>e.onBlur("name"))},null,8,["modelValue"])])),_:1}),(0,l.Wm)(m),(0,l._)("div",Du,[(0,l.Wm)(c,{flat:"",onClick:n.validerCdt,label:"Ajouter",color:"green-4"},null,8,["onClick"]),(0,l.Wm)(c,{flat:"",onClick:t[36]||(t[36]=e=>s.cdtDialog=!1),label:"Annuler",color:"red-4"})])])),_:1})])),_:1},8,["modelValue"])]),(0,l._)("div",Zu,[(0,l.Wm)(i,{ref:"qteInput",class:"my-0 col-2",modelValue:s.qté_cdt,"onUpdate:modelValue":t[38]||(t[38]=e=>s.qté_cdt=e),label:"Quantité cdt",color:"cyan-4",onMouseover:t[39]||(t[39]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[40]||(t[40]=t=>e.changeLabelColor("nameInput","")),onFocus:t[41]||(t[41]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[42]||(t[42]=t=>e.onBlur("name"))},{append:(0,l.w5)((()=>[(0,l._)("div",Nu,(0,g.zw)(n.uniteStockNom),1)])),before:(0,l.w5)((()=>[(0,l.Wm)(_,{icon:"fa-solid fa-weight-scale",style:{color:"#4dd0e1"}})])),_:1},8,["modelValue"])])])]),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:t[43]||(t[43]=e=>s.step=4),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(c,{flat:"",onClick:t[44]||(t[44]=e=>s.step=2),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(w,{name:4,title:"Coût",icon:"point_of_sale",done:s.step>4},{default:(0,l.w5)((()=>[(0,l._)("div",zu,[(0,l.Wm)(i,{ref:"prixInput",class:"my-0 col-1",modelValue:s.prix,"onUpdate:modelValue":t[45]||(t[45]=e=>s.prix=e),label:"Prix",color:"cyan-4",onMouseover:t[46]||(t[46]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[47]||(t[47]=t=>e.changeLabelColor("nameInput","")),onFocus:t[48]||(t[48]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[49]||(t[49]=t=>e.onBlur("name"))},{append:(0,l.w5)((()=>[Ru])),before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"euro",color:"cyan-4"})])),_:1},8,["modelValue"])]),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:t[50]||(t[50]=e=>s.step=5),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(c,{flat:"",onClick:t[51]||(t[51]=e=>s.step=2),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(w,{name:5,title:"Stock",icon:"inventory",done:s.step>5},{default:(0,l.w5)((()=>[(0,l._)("div",Ou,[(0,l.Wm)(i,{ref:"stockMini",class:"my-0 col-2",modelValue:s.stock_mini,"onUpdate:modelValue":t[52]||(t[52]=e=>s.stock_mini=e),label:"Stock mini",color:"cyan-4",onMouseover:t[53]||(t[53]=t=>e.changeLabelColor("nameInput","#ffb74d")),onMouseleave:t[54]||(t[54]=t=>e.changeLabelColor("nameInput","")),onFocus:t[55]||(t[55]=t=>e.onFocus("name","#4dd0e1")),onBlur:t[56]||(t[56]=t=>e.onBlur("name"))},{append:(0,l.w5)((()=>[(0,l._)("div",Au,(0,g.zw)(n.uniteStockNom),1)])),before:(0,l.w5)((()=>[(0,l.Wm)(_,{icon:"fa-solid fa-flask",style:{color:"#4dd0e1"}})])),_:1},8,["modelValue"])]),(0,l._)("div",Bu,[(0,l.Wm)(y,{modelValue:s.stock,"onUpdate:modelValue":t[57]||(t[57]=e=>s.stock=e),color:"green-4",icon:"inventory",label:"Stockée",size:"md"},null,8,["modelValue"]),(0,l.Wm)(y,{modelValue:s.cdeAuto,"onUpdate:modelValue":t[58]||(t[58]=e=>s.cdeAuto=e),color:"purple-4",icon:"shopping_cart",label:"Déclenchement des commande",size:"md"},null,8,["modelValue"])]),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:t[59]||(t[59]=e=>s.step=6),color:"cyan-4",label:"Suivant",class:"hover-effect"}),(0,l.Wm)(c,{flat:"",onClick:t[60]||(t[60]=e=>s.step=4),color:"cyan-4",label:"Précédent",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l.Wm)(w,{name:6,title:"Réglementation",icon:"settings",done:s.step>6},{default:(0,l.w5)((()=>[(0,l._)("div",$u,[(0,l.Wm)(u,{modelValue:s.liste,"onUpdate:modelValue":t[61]||(t[61]=e=>s.liste=e),color:"cyan-4",class:"col-2 hover-effect",label:"Liste",options:n.allListeLabel,"option-label":"label","option-value":"id"},{before:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"gavel",color:"cyan-4"})])),_:1},8,["modelValue","options"])]),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:t[62]||(t[62]=e=>s.step=5),color:"cyan-4",label:"Précédent",class:"hover-effect"}),(0,l.Wm)(c,{flat:"",onClick:t[63]||(t[63]=e=>s.step=7),color:"cyan-4",label:"Terminer",class:"hover-effect q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,l._)("div",Hu,[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{flat:"",onClick:n.submitForm,color:"green-4",label:"Enregistrer",class:"btn-flat-success-pph"},null,8,["onClick"]),(0,l.Wm)(c,{flat:"",color:"red-4",label:"Supprimer",class:"btn-flat-danger-pph"})])),_:1})])])),_:1},8,["modelValue"])])}var Yu={data(){return{cdtDialog:!1,cdtMat:"",uniteMes:[],uniteStock:[],typeDialog:!1,formeDialog:!1,typeMat:"",formeMat:"",step:1,name:"",type:null,forme:null,fournisseur:null,cdt:"","qté_cdt":"",prix_unit:"",prix:"","qté_stock":"",stock_mini:"",stock:!1,cdeAuto:!1,cde:!1,liste:null,attente_livraison:!1}},computed:{...(0,u.Se)("matieresPremieres",["allTypes","allUnites","allFormes","allCdts"]),...(0,u.Se)("formules",["allListes"]),...(0,u.Se)("suppliers",["allSuppliers"]),allCdtLabel(){return this.allCdts.map((e=>({...e,label:`${e.nom}`,id:`${e.id}`})))},allSuppliersLabel(){return this.allSuppliers.map((e=>({...e,label:`${e.name}`,id:`${e.id}`})))},allTypeLabel(){return this.allTypes.map((e=>({...e,label:`${e.nom}`,id:`${e.id}`})))},allListeLabel(){return this.allListes.map((e=>({...e,label:`${e.nom}`,id:`${e.id}`})))},allUniteLabel(){return this.allUnites.map((e=>({...e,label:`${e.nom}`,id:`${e.id}`})))},allFormeLabel(){return this.allFormes.map((e=>({...e,label:`${e.nom}`,id:`${e.id}`})))},uniteStockNom(){if(this.forme&&this.allUnites){const e=this.allUnites.find((e=>e.id===this.forme.unite_stock.id));return e?e.nom:""}return""}},async mounted(){await this.loadUnites(),await this.loadTypes(),await this.loadListes(),await this.loadFormes(),await this.loadSuppliers(),await this.loadCdt(),console.log("allCdt",this.allCdts)},methods:{...(0,u.nv)("matieresPremieres",["loadTypes","loadFormes","loadUnites","addMatiere","addType","addForme","loadCdt","addCdt"]),...(0,u.nv)("formules",["loadListes"]),...(0,u.nv)("suppliers",["loadSuppliers"]),updateForme(e){this.forme=this.allFormeLabel.find((t=>t.id===e))},async validerCdt(){const e={nom:this.cdtMat};await this.addCdt(e),await this.loadCdt(),this.cdtDialog=!1},async validerType(){const e={nom:this.typeMat};await this.addType(e),await this.loadTypes(),this.typeDialog=!1},async validerForme(){const e={nom:this.formeMat,unite_mesure:this.uniteMes.id,unite_stock:this.uniteStock.id};console.log("formData envoyé:",e),await this.addForme(e),await this.loadFormes(),this.formeDialog=!1},async submitForm(){const e={nom:this.name,type:this.type.id,forme:this.forme.id,fournisseur:this.fournisseur.id,cdt:this.cdt.id,"qté_cdt":this.qté_cdt,prix_unit:this.prix_unit,prix:this.prix,"qté_stock":0,stock_mini:this.stock_mini,stock:this.stock,cde_auto:this.cdeAuto,cde:!1,liste:this.liste.id,attente_livraison:!1};this.addMatiere(e)}}};const Ku=(0,p.Z)(Yu,[["render",Gu]]);var Ju=Ku;U()(Yu,"components",{QStepper:ll.Z,QStep:sl.Z,QInput:Ce.Z,QIcon:q.Z,QSelect:Al.Z,QBtn:v.Z,QDialog:Ue.Z,QCard:Fe.Z,QCardSection:Ie.Z,QSeparator:x.Z,QStepperNavigation:nl.Z,QToggle:lr.Z,QBtnGroup:K.Z});const Xu={class:"row justify-center"},ed={class:"col-md-12"},td={class:"row q-mx-sm q-mt-sm"},od={class:"col-3"},ad={class:"row"},ld={class:"col-6 q-mt-md text-cyan-4 text-h6"},sd={class:"row justify-center"},nd={class:"col-2 offset-1"},rd={class:"row q-mt-sm"},id={class:"col-12 justify-center"},cd={class:"row justify-start"},ud={class:"absolute-top-left q-ml-sm q-mt-xs"},dd={key:0,class:"text-red-4 text-subtitle2"},md={key:1,class:"text-green-4 text-subtitle2"},pd={key:2,class:"text-red-4 text-subtitle2"},fd={class:"absolute-bottom-left"},hd={class:"row"},wd=(0,l._)("div",{class:"row justify-center text-h6 text-cyan-4"}," Réceptionner ",-1),gd=(0,l._)("br",null,null,-1),_d={class:"row justify-center text-subtitle1 text-orange-4"},yd=(0,l._)("br",null,null,-1),vd=(0,l._)("div",{class:"row justify-center text-h6 text-cyan-4"}," dans le stock du préparatoire ",-1),bd={class:"row"},kd={class:"col-4"},Wd={class:"row"},Cd={class:"col-5"},xd={class:"col-5 offset-1"},qd={class:"row"},Sd={class:"col-12"},Md={class:"row justify-center"},Ud={class:"row justify-center"};function Fd(e,t,o,s,n,r){const i=(0,l.up)("q-btn"),c=(0,l.up)("router-link"),u=(0,l.up)("q-icon"),d=(0,l.up)("q-input"),m=(0,l.up)("font-awesome-icon"),p=(0,l.up)("q-spinner-rings"),f=(0,l.up)("q-img"),h=(0,l.up)("q-btn-group"),w=(0,l.up)("q-card-section"),_=(0,l.up)("q-separator"),y=(0,l.up)("q-file"),v=(0,l.up)("q-card"),b=(0,l.up)("q-dialog"),k=(0,l.up)("q-form"),W=(0,l.up)("q-item-section"),C=(0,l.up)("q-item"),x=(0,l.up)("q-list"),q=(0,l.up)("q-menu"),S=(0,l.up)("q-page"),M=(0,l.up)("atom-spinner");return e.loadMatieresPremieres?((0,l.wg)(),(0,l.j4)(S,{key:0},{default:(0,l.w5)((()=>[(0,l._)("div",Xu,[(0,l._)("div",ed,[(0,l._)("div",td,[(0,l._)("div",od,[(0,l._)("div",ad,[(0,l.Wm)(c,{to:"/creation-matiere-premiere/"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{round:"",class:"q-mt-sm glossy btn-grey-primary-pph",icon:"add"})])),_:1})])]),(0,l._)("div",ld,[(0,l._)("div",sd,(0,g.zw)(r.countMatieres)+" matières premières en attente de livraison ",1)]),(0,l._)("div",nd,[(0,l.Wm)(d,{ref:"searchInput",modelValue:n.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchQuery=e),label:"Recherche...",onInput:e.filterMatieres,color:"cyan-4",onMouseover:t[1]||(t[1]=e=>r.changeLabelColor("searchInput","#ffb74d")),onMouseleave:t[2]||(t[2]=e=>r.changeLabelColor("searchInput","")),onFocus:t[3]||(t[3]=e=>r.onFocus("searchQuery","#4dd0e1")),onBlur:t[4]||(t[4]=e=>r.onBlur("searchQuery"))},{append:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"search",color:"cyan-4"})])),_:1},8,["modelValue","onInput"])])]),(0,l._)("div",rd,[(0,l._)("div",id,[(0,l._)("div",cd,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.filteredMatieres,(o=>((0,l.wg)(),(0,l.iD)("div",{class:"col-2 q-pa-sm",key:o.id},[(0,l.Wm)(v,{bordered:"",class:(0,g.C_)(["card-maxi justify-center items-center text-center relative",{"bd-red-4":!o.stockee}])},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(f,{class:"logo-card-mini",src:pl,loading:"lazy","spinner-color":"red-4",alt:o.type.nom},{loading:(0,l.w5)((()=>[(0,l.Wm)(p,{color:"red-4"})])),default:(0,l.w5)((()=>["Conditionnement"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:0,icon:"fa-solid fa-prescription-bottle",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Principe actif"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:1,icon:"fa-solid fa-pills",size:"3x",class:"icon-background hover-effect"})):(0,l.kq)("",!0),"Cosmétique"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:2,icon:"fa-solid fa-hand-holding-droplet",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Complément alimentaire"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:3,icon:"fa-solid fa-glass-water-droplet",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Technique"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:4,icon:"fa-solid fa-book-medical",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Alimentaire"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:5,icon:"fa-solid fa-bottle-droplet",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Excipient"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:6,icon:"fa-solid fa-flask",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),(0,l._)("div",{class:(0,g.C_)(["absolute-top hover-effect q-my-none",{"text-cyan-1":o.stockee,"text-red-4":!o.stockee}])},[(0,l._)("div",null,(0,g.zw)(o.nom),1),(0,l._)("div",null,(0,g.zw)(o.forme.nom)+" "+(0,g.zw)(o.qté_cdt)+(0,g.zw)(o.unite_cdt),1),(0,l._)("div",null,[o.qté_stock<o.stock_mini?((0,l.wg)(),(0,l.j4)(m,{key:0,icon:"fa-solid fa-triangle-exclamation","beat-fade":"",size:"fa-xs",style:{color:"#e57373"}})):(0,l.kq)("",!0),(0,l.Uk)(" Stock : "+(0,g.zw)(o.qté_stock)+(0,g.zw)(o.unite_mesure.nom),1)])],2)])),_:2},1032,["alt"])]),(0,l._)("div",ud,["Liste 1"===o.liste.nom?((0,l.wg)(),(0,l.iD)("div",dd,"1")):(0,l.kq)("",!0),"Liste 2"===o.liste.nom?((0,l.wg)(),(0,l.iD)("div",md,"2")):(0,l.kq)("",!0),"Stupéfiant"===o.liste.nom?((0,l.wg)(),(0,l.iD)("div",pd,"S")):(0,l.kq)("",!0)]),(0,l._)("div",fd,[(0,l._)("div",hd,[o.froid?((0,l.wg)(),(0,l.j4)(m,{key:0,fade:"",icon:"fa-solid fa-snowflake",class:"q-ml-xs q-mb-xs fa-2x",style:{color:"#4dd0e1"}})):(0,l.kq)("",!0),o.cmr?((0,l.wg)(),(0,l.j4)(f,{key:1,class:"q-ml-xs q-mb-xs fade-blink",src:Ys,style:{width:"30px",height:"30px"}})):(0,l.kq)("",!0)])]),(0,l.Wm)(h,{class:"absolute-bottom-right q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-pa-none hover-effect",flat:"",color:"cyan-4",icon:"undo",onClick:(0,a.iM)((t=>e.toggleLivraison({matiereId:o.id,isLivraison:o.attente_livraison})),["stop"])},null,8,["onClick"]),(0,l.Wm)(i,{class:"q-pa-none hover-effect",flat:"",color:"green-4",icon:"check_circle",onClick:(0,a.iM)((e=>r.selectMatiere(o)),["stop"])},null,8,["onClick"]),(0,l.Wm)(i,{class:"hover-effect",color:"cyan-4",round:"",flat:"",dense:"",icon:"info",onClick:(0,a.iM)((t=>e.toggleInfo(o.id)),["stop"])},null,8,["onClick"])])),_:2},1024),(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{modelValue:n.addMatiereStock,"onUpdate:modelValue":t[10]||(t[10]=e=>n.addMatiereStock=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[wd,gd,(0,l._)("div",_d,(0,g.zw)(n.selectedMatiere.nom)+" "+(0,g.zw)(n.selectedMatiere.qté_cdt)+(0,g.zw)(n.selectedMatiere.unite_cdt)+" "+(0,g.zw)(n.selectedMatiere.fournisseur.name)+" ref:"+(0,g.zw)(n.selectedMatiere.code_fournisseur),1),yd,vd])),_:1}),(0,l.Wm)(_),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",bd,[(0,l._)("div",kd,[(0,l.Wm)(d,{modelValue:n.qte,"onUpdate:modelValue":t[5]||(t[5]=e=>n.qte=e),label:"Quantité",color:"cyan-4",class:"hover-effect"},null,8,["modelValue"])])]),(0,l._)("div",Wd,[(0,l._)("div",Cd,[(0,l.Wm)(d,{label:"Lot",class:"hover-effect",color:"cyan-4",modelValue:n.lot,"onUpdate:modelValue":t[6]||(t[6]=e=>n.lot=e)},null,8,["modelValue"])]),(0,l._)("div",xd,[(0,l.Wm)(d,{label:"Peremption",type:"date",hint:"Native date",class:"hover-effect",color:"cyan-4",modelValue:n.peremption,"onUpdate:modelValue":t[7]||(t[7]=e=>n.peremption=e)},null,8,["modelValue"])])]),(0,l._)("div",qd,[(0,l._)("div",Sd,[(0,l.Wm)(y,{label:"Sélectionner un certificat(pdf)",accept:".pdf",modelValue:n.certificat,"onUpdate:modelValue":t[8]||(t[8]=e=>n.certificat=e)},null,8,["modelValue"])])])])),_:1}),(0,l.Wm)(_),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l._)("div",Md,[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{flat:"",label:"Réceptionner",onClick:r.receptionner,color:"green-4"},null,8,["onClick"]),(0,l.Wm)(i,{flat:"",label:"Annuler",onClick:t[9]||(t[9]=e=>n.addMatiereStock=!1),color:"red-4"})])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(q,{fit:"",anchor:"bottom right",self:"top middle",modelValue:e.expanded[o.id],"onUpdate:modelValue":t=>e.expanded[o.id]=t},{default:(0,l.w5)((()=>[(0,l.Wm)(x,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[o.fournisseur?((0,l.wg)(),(0,l.j4)(C,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Fournisseur : ")])),_:1}),(0,l.Wm)(W,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.fournisseur.name),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.code_fournisseur?((0,l.wg)(),(0,l.j4)(C,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Ref : ")])),_:1}),(0,l.Wm)(W,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.code_fournisseur),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.ean?((0,l.wg)(),(0,l.j4)(C,{key:2},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" EAN/CIP : ")])),_:1}),(0,l.Wm)(W,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.ean),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.prix?((0,l.wg)(),(0,l.j4)(C,{key:3},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Prix : ")])),_:1}),(0,l.Wm)(W,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.prix)+" € ",1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.prix_unit?((0,l.wg)(),(0,l.j4)(C,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Prix unitaire : ")])),_:1}),(0,l.Wm)(W,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.prix_unit)+" €/"+(0,g.zw)(o.unite_mesure.nom),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.stock_mini?((0,l.wg)(),(0,l.j4)(C,{key:5},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Stock mini : ")])),_:1}),(0,l.Wm)(W,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.stock_mini)+(0,g.zw)(o.unite_mesure.nom),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["class"])])))),128))])])])])])])),_:1})):((0,l.wg)(),(0,l.j4)(S,{key:1,class:"row items-center justify-center"},{default:(0,l.w5)((()=>[(0,l._)("div",Ud,[(0,l.Wm)(M,{class:"bg-op-8","animation-duration":1e3,size:200,color:"#ff1d5e"})])])),_:1}))}var Id={name:"MatieresCards",components:{FontAwesomeIcon:$r.GN,AtomSpinner:ya.e},data(){return{searchQuery:"",addMatiereStock:!1,selectedMatiere:null,qte:"",lot:"",peremption:"",certificat:""}},computed:{...(0,u.Se)("matieresPremieres",["allMatieres","expanded"]),countMatieres(){return this.filteredMatieresLivraison.length},filteredMatieresLivraison(){return this.allMatieres.filter((e=>!0===e.attente_livraison))},filteredMatieres(){return this.searchQuery?this.filteredMatieresLivraison.filter((e=>e.nom.toLowerCase().startsWith(this.searchQuery.toLowerCase()))):this.filteredMatieresLivraison}},async created(){await this.loadMatieresPremieres()},methods:{...(0,u.nv)("matieresPremieres",["loadMatieresPremieres","addReception","toggleLivraison","toggleInfo"]),selectMatiere(e){this.selectedMatiere={...e},this.addMatiereStock=!0},async receptionner(){const e={matiere:this.selectedMatiere.id,qte:this.qte,lot:this.lot,peremption:this.peremption,certificat:this.certificat};console.log("formData",e),await this.addReception(e),await this.loadMatieresPremieres(),this.selectedMatiere=null,this.qte="",this.lot="",this.peremption="",this.certificat="",this.addMatiereStock=!1},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1}}};const Vd=(0,p.Z)(Id,[["render",Fd]]);var Pd=Vd;U()(Id,"components",{QPage:De.Z,QBtn:v.Z,QInput:Ce.Z,QIcon:q.Z,QCard:Fe.Z,QImg:Sl.Z,QSpinnerRings:Ml.Z,QBtnGroup:K.Z,QForm:Ve.Z,QDialog:Ue.Z,QCardSection:Ie.Z,QSeparator:x.Z,QFile:rl.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z,QField:xe.Z});const Ed={class:"row justify-center"},Ld={class:"col-md-12"},Qd={class:"row q-mx-sm q-mt-sm"},jd={class:"col-3"},Td={class:"row"},Dd={class:"col-6 q-mt-md text-cyan-4 text-h6"},Zd={class:"row justify-center"},Nd={class:"col-2 offset-1"},zd={class:"row q-mt-sm"},Rd={class:"col-12 justify-center"},Od={class:"row justify-start"},Ad={class:"absolute-top-left q-ml-sm q-mt-xs"},Bd={key:0,class:"text-red-4 text-subtitle2"},$d={key:1,class:"text-green-4 text-subtitle2"},Hd={key:2,class:"text-red-4 text-subtitle2"},Gd={class:"absolute-bottom-left"},Yd={class:"row"},Kd=(0,l._)("div",{class:"row justify-center text-h6 text-cyan-4"}," Réceptionner ",-1),Jd=(0,l._)("br",null,null,-1),Xd={class:"row justify-center text-subtitle1 text-orange-4"},em=(0,l._)("br",null,null,-1),tm=(0,l._)("div",{class:"row justify-center text-h6 text-cyan-4"}," dans le stock du préparatoire ",-1),om={class:"row"},am={class:"col-4"},lm={class:"row"},sm={class:"col-5"},nm={class:"col-5 offset-1"},rm={class:"row"},im={class:"col-12"},cm={class:"row justify-center"},um={class:"row justify-center"};function dm(e,t,o,s,n,r){const i=(0,l.up)("q-btn"),c=(0,l.up)("router-link"),u=(0,l.up)("q-icon"),d=(0,l.up)("q-input"),m=(0,l.up)("font-awesome-icon"),p=(0,l.up)("q-spinner-rings"),f=(0,l.up)("q-img"),h=(0,l.up)("q-tooltip"),w=(0,l.up)("q-btn-group"),_=(0,l.up)("q-card-section"),y=(0,l.up)("q-separator"),v=(0,l.up)("q-file"),b=(0,l.up)("q-card"),k=(0,l.up)("q-dialog"),W=(0,l.up)("q-form"),C=(0,l.up)("q-item-section"),x=(0,l.up)("q-item"),q=(0,l.up)("q-list"),S=(0,l.up)("q-menu"),M=(0,l.up)("q-page"),U=(0,l.up)("atom-spinner");return e.loadMatieresPremieres?((0,l.wg)(),(0,l.j4)(M,{key:0},{default:(0,l.w5)((()=>[(0,l._)("div",Ed,[(0,l._)("div",Ld,[(0,l._)("div",Qd,[(0,l._)("div",jd,[(0,l._)("div",Td,[(0,l.Wm)(c,{to:"/creation-matiere-premiere/"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{round:"",class:"q-mt-sm glossy btn-grey-primary-pph",icon:"add"})])),_:1})])]),(0,l._)("div",Dd,[(0,l._)("div",Zd,(0,g.zw)(r.countMatieres)+" matières premières en attente de commande ",1)]),(0,l._)("div",Nd,[(0,l.Wm)(d,{ref:"searchInput",modelValue:n.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchQuery=e),label:"Recherche...",onInput:e.filterMatieres,color:"cyan-4",onMouseover:t[1]||(t[1]=e=>r.changeLabelColor("searchInput","#ffb74d")),onMouseleave:t[2]||(t[2]=e=>r.changeLabelColor("searchInput","")),onFocus:t[3]||(t[3]=e=>r.onFocus("searchQuery","#4dd0e1")),onBlur:t[4]||(t[4]=e=>r.onBlur("searchQuery"))},{append:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"search",color:"cyan-4"})])),_:1},8,["modelValue","onInput"])])]),(0,l._)("div",zd,[(0,l._)("div",Rd,[(0,l._)("div",Od,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.filteredMatieres,(o=>((0,l.wg)(),(0,l.iD)("div",{class:"col-2 q-pa-sm",key:o.id},[(0,l.Wm)(b,{bordered:"",class:(0,g.C_)(["card-maxi justify-center items-center text-center relative",{"bd-red-4":!o.stockee}])},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(f,{class:"logo-card-mini",src:pl,loading:"lazy","spinner-color":"red-4",alt:o.type.nom},{loading:(0,l.w5)((()=>[(0,l.Wm)(p,{color:"red-4"})])),default:(0,l.w5)((()=>["Conditionnement"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:0,icon:"fa-solid fa-prescription-bottle",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Principe actif"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:1,icon:"fa-solid fa-pills",size:"3x",class:"icon-background hover-effect"})):(0,l.kq)("",!0),"Cosmétique"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:2,icon:"fa-solid fa-hand-holding-droplet",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Complément alimentaire"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:3,icon:"fa-solid fa-glass-water-droplet",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Technique"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:4,icon:"fa-solid fa-book-medical",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Alimentaire"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:5,icon:"fa-solid fa-bottle-droplet",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),"Excipient"===o.type.nom?((0,l.wg)(),(0,l.j4)(m,{key:6,icon:"fa-solid fa-flask",size:"3x",class:"icon-background"})):(0,l.kq)("",!0),(0,l._)("div",{class:(0,g.C_)(["absolute-top hover-effect q-my-none",{"text-cyan-1":o.stockee,"text-red-4":!o.stockee}])},[(0,l._)("div",null,(0,g.zw)(o.nom),1),(0,l._)("div",null,(0,g.zw)(o.forme.nom)+" "+(0,g.zw)(o.qté_cdt)+(0,g.zw)(o.unite_cdt),1),(0,l._)("div",null,[o.qté_stock<o.stock_mini?((0,l.wg)(),(0,l.j4)(m,{key:0,icon:"fa-solid fa-triangle-exclamation","beat-fade":"",size:"fa-xs",style:{color:"#e57373"}})):(0,l.kq)("",!0),(0,l.Uk)(" Stock : "+(0,g.zw)(o.qté_stock)+(0,g.zw)(o.unite_mesure.nom),1)])],2)])),_:2},1032,["alt"])]),(0,l._)("div",Ad,["Liste 1"===o.liste.nom?((0,l.wg)(),(0,l.iD)("div",Bd,"1")):(0,l.kq)("",!0),"Liste 2"===o.liste.nom?((0,l.wg)(),(0,l.iD)("div",$d,"2")):(0,l.kq)("",!0),"Stupéfiant"===o.liste.nom?((0,l.wg)(),(0,l.iD)("div",Hd,"S")):(0,l.kq)("",!0)]),(0,l._)("div",Gd,[(0,l._)("div",Yd,[o.froid?((0,l.wg)(),(0,l.j4)(m,{key:0,fade:"",icon:"fa-solid fa-snowflake",class:"q-ml-xs q-mb-xs fa-2x",style:{color:"#4dd0e1"}})):(0,l.kq)("",!0),o.cmr?((0,l.wg)(),(0,l.j4)(f,{key:1,class:"q-ml-xs q-mb-xs fade-blink",src:Ys,style:{width:"30px",height:"30px"}})):(0,l.kq)("",!0)])]),(0,l.Wm)(w,{class:"absolute-bottom-right q-pa-none q-ma-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"q-pa-none hover-effect",flat:"",color:"red-4",icon:"playlist_remove",onClick:(0,a.iM)((t=>e.toggleCde({matiereId:o.id,isCde:o.cde})),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"bg-blue-grey-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Retirer de la liste de commande")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(i,{class:"q-pa-none hover-effect",flat:"",color:"green-4",icon:"check_circle",onClick:(0,a.iM)((t=>e.toggleLivraison({matiereId:o.id,isLivraison:o.attente_livraison})),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"bg-blue-grey-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Mettre en attente de livraison")])),_:1})])),_:2},1032,["onClick"]),(0,l.Wm)(i,{class:"hover-effect",color:"cyan-4",round:"",flat:"",dense:"",icon:"info",onClick:(0,a.iM)((t=>e.toggleInfo(o.id)),["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"bg-blue-grey-4"},{default:(0,l.w5)((()=>[(0,l.Uk)("Informations")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,{modelValue:n.addMatiereStock,"onUpdate:modelValue":t[10]||(t[10]=e=>n.addMatiereStock=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[Kd,Jd,(0,l._)("div",Xd,(0,g.zw)(n.selectedMatiere.nom)+" "+(0,g.zw)(n.selectedMatiere.qté_cdt)+(0,g.zw)(n.selectedMatiere.unite_cdt)+" "+(0,g.zw)(n.selectedMatiere.fournisseur.name)+" ref:"+(0,g.zw)(n.selectedMatiere.code_fournisseur),1),em,tm])),_:1}),(0,l.Wm)(y),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l._)("div",om,[(0,l._)("div",am,[(0,l.Wm)(d,{modelValue:n.qte,"onUpdate:modelValue":t[5]||(t[5]=e=>n.qte=e),label:"Quantité",color:"cyan-4",class:"hover-effect"},null,8,["modelValue"])])]),(0,l._)("div",lm,[(0,l._)("div",sm,[(0,l.Wm)(d,{label:"Lot",class:"hover-effect",color:"cyan-4",modelValue:n.lot,"onUpdate:modelValue":t[6]||(t[6]=e=>n.lot=e)},null,8,["modelValue"])]),(0,l._)("div",nm,[(0,l.Wm)(d,{label:"Peremption",type:"date",hint:"Native date",class:"hover-effect",color:"cyan-4",modelValue:n.peremption,"onUpdate:modelValue":t[7]||(t[7]=e=>n.peremption=e)},null,8,["modelValue"])])]),(0,l._)("div",rm,[(0,l._)("div",im,[(0,l.Wm)(v,{label:"Sélectionner un certificat(pdf)",accept:".pdf",modelValue:n.certificat,"onUpdate:modelValue":t[8]||(t[8]=e=>n.certificat=e)},null,8,["modelValue"])])])])),_:1}),(0,l.Wm)(y),(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l._)("div",cm,[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{flat:"",label:"Réceptionner",onClick:r.receptionner,color:"green-4"},null,8,["onClick"]),(0,l.Wm)(i,{flat:"",label:"Annuler",onClick:t[9]||(t[9]=e=>n.addMatiereStock=!1),color:"red-4"})])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(S,{fit:"",anchor:"bottom right",self:"top middle",modelValue:e.expanded[o.id],"onUpdate:modelValue":t=>e.expanded[o.id]=t},{default:(0,l.w5)((()=>[(0,l.Wm)(q,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[o.fournisseur?((0,l.wg)(),(0,l.j4)(x,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Fournisseur : ")])),_:1}),(0,l.Wm)(C,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.fournisseur.name),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.code_fournisseur?((0,l.wg)(),(0,l.j4)(x,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Ref : ")])),_:1}),(0,l.Wm)(C,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.code_fournisseur),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.ean?((0,l.wg)(),(0,l.j4)(x,{key:2},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" EAN/CIP : ")])),_:1}),(0,l.Wm)(C,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.ean),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.prix?((0,l.wg)(),(0,l.j4)(x,{key:3},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Prix : ")])),_:1}),(0,l.Wm)(C,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.prix)+" € ",1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.prix_unit?((0,l.wg)(),(0,l.j4)(x,{key:4},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Prix unitaire : ")])),_:1}),(0,l.Wm)(C,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.prix_unit)+" €/"+(0,g.zw)(o.unite_mesure.nom),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),o.stock_mini?((0,l.wg)(),(0,l.j4)(x,{key:5},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{avatar:"",class:"text-cyan-4"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Stock mini : ")])),_:1}),(0,l.Wm)(C,{class:"text-grey-7"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(o.stock_mini)+(0,g.zw)(o.unite_mesure.nom),1)])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["class"])])))),128))])])])])])])),_:1})):((0,l.wg)(),(0,l.j4)(M,{key:1,class:"row items-center justify-center"},{default:(0,l.w5)((()=>[(0,l._)("div",um,[(0,l.Wm)(U,{class:"bg-op-8","animation-duration":1e3,size:200,color:"#ff1d5e"})])])),_:1}))}var mm={name:"MatieresCards",components:{FontAwesomeIcon:$r.GN,AtomSpinner:ya.e},data(){return{searchQuery:"",addMatiereStock:!1,selectedMatiere:null,qte:"",lot:"",peremption:"",certificat:""}},computed:{...(0,u.Se)("matieresPremieres",["allMatieres","expanded"]),countMatieres(){return this.filteredMatieresCommande.length},filteredMatieresCommande(){return this.allMatieres.filter((e=>!0===e.cde))},filteredMatieres(){return this.searchQuery?this.filteredMatieresCommande.filter((e=>e.nom.toLowerCase().startsWith(this.searchQuery.toLowerCase()))):this.filteredMatieresCommande}},async created(){await this.loadMatieresPremieres()},methods:{...(0,u.nv)("matieresPremieres",["loadMatieresPremieres","toggleCde","toggleLivraison","toggleInfo"]),selectMatiere(e){this.selectedMatiere={...e},this.addMatiereStock=!0},async receptionner(){const e={matiere:this.selectedMatiere.id,qte:this.qte,lot:this.lot,peremption:this.peremption,certificat:this.certificat};console.log("formData",e),await this.addReception(e),await this.loadMatieresPremieres(),this.selectedMatiere=null,this.qte="",this.lot="",this.peremption="",this.certificat="",this.addMatiereStock=!1},changeLabelColor(e,t){this[e.replace("Input","")]||(this.$refs[e].$el.querySelector(".q-field__label").style.color=t)},onFocus(e,t){this[`${e}Focused`]=!0,this.changeLabelColor(`${e}Input`,t)},onBlur(e){this[`${e}Focused`]=!1}}};const pm=(0,p.Z)(mm,[["render",dm]]);var fm=pm;U()(mm,"components",{QPage:De.Z,QBtn:v.Z,QInput:Ce.Z,QIcon:q.Z,QCard:Fe.Z,QImg:Sl.Z,QSpinnerRings:Ml.Z,QBtnGroup:K.Z,QTooltip:Yn.Z,QForm:Ve.Z,QDialog:Ue.Z,QCardSection:Ie.Z,QSeparator:x.Z,QFile:rl.Z,QMenu:b.Z,QList:k.Z,QItem:W.Z,QItemSection:C.Z,QField:xe.Z});const hm=[{path:"/cgu/",name:"CdtGalUtl",component:As},{path:"/mentions/",name:"MentionsLegales",component:Ps},{path:"/home/",name:"Home",component:rr},{path:"/register",name:"Register",component:Jo,beforeEnter:async(e,t,o)=>{await Wo.dispatch("auth/checkAuthentication"),Wo.state.auth.isLoggedIn?(await Wo.dispatch("notifications/showNotification",{message:"Vous devez vous déconnecter pour accéder à cette page !",type:"info"},{root:!0}),o("/home")):o()}},{path:"/login",name:"Login",component:ka,beforeEnter:async(e,t,o)=>{await Wo.dispatch("auth/checkAuthentication"),Wo.state.auth.isLoggedIn?(await Wo.dispatch("notifications/showNotification",{message:"Vous devez vous déconnecter pour accéder à cette page !",type:"info"},{root:!0}),o("/home")):o()}},{path:"/password-reset",name:"PasswordReset",component:za,beforeEnter:async(e,t,o)=>{await Wo.dispatch("auth/checkAuthentication"),Wo.state.auth.isLoggedIn?(await Wo.dispatch("notifications/showNotification",{message:"Vous devez vous déconnecter pour accéder à cette page !",type:"info"},{root:!0}),o("/home")):o()}},{path:"/user-account",name:"UserAccount",component:ps},{path:"/user",name:"User",component:Xl},{path:"/users",name:"UsersCards",component:qs},{path:"/supplier",name:"CreateSupplier",component:ml},{path:"/supplier/:id",component:ml,name:"supplier-form",props:!0},{path:"/suppliers",name:"SuppliersCards",component:Fl},{path:"/matieres-premieres",name:"MatieresCards",component:Yr},{path:"/catalogue",name:"MatieresCatalogueCards",component:bc},{path:"/nouvelle-formule",name:"CreateFormula",component:nu},{path:"/formules",name:"FormulaCards",component:ku},{path:"/creation-matiere-premiere",name:"CreateMatiere",component:Ju},{path:"/reception",name:"MatieresCardsReception",component:Pd},{path:"/commande",name:"MatieresCardsCommande",component:fm}],wm=(0,ze.p7)({history:(0,ze.PO)("/"),routes:hm});var gm=wm,_m=o(8029),ym=o(7586),vm=o.n(ym),bm=o(5541),km={plugins:{Loading:bm.Z,Notify:ct.Z},config:{loading:{spinner:Ml.Z,spinnerColor:"red"}},lang:vm()},Wm=o(3636),Cm=o(9417),xm=o(5563);(0,xm.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),Wm.vI.add(Cm.zzZ,Cm.PUm,Cm.iIb,Cm.jZZ,Cm.uR4,Cm.Y$T,Cm.q9v,Cm.QmK,Cm.QTx,Cm.DIA,Cm.Yol,Cm.LoV,Cm.vvx,Cm.jOV,Cm.ik8,Cm.WM4);const qm=(0,a.ri)(Ne).use(_m.Z,km).use(gm).use(Wo);function Sm(e){let t=null;if(document.cookie&&""!==document.cookie){let o=document.cookie.split(";");for(let a=0;a<o.length;a++){let l=o[a].trim();if(l.substring(0,e.length+1)===e+"="){t=decodeURIComponent(l.substring(e.length+1));break}}}return t}qm.component("font-awesome-icon",$r.GN),qm.config.errorHandler=(e,t,o)=>{console.log("Captured in app.config.errorHandler: ",e,t,o)},qm.mount("#app");let Mm=Sm("csrftoken");Re.Z.defaults.xsrfCookieName="csrftoken",Re.Z.defaults.xsrfHeaderName="X-CSRFTOKEN",Re.Z.defaults.headers.post["X-CSRFToken"]=Mm}},t={};function o(a){var l=t[a];if(void 0!==l)return l.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,a,l,s){if(!a){var n=1/0;for(u=0;u<e.length;u++){a=e[u][0],l=e[u][1],s=e[u][2];for(var r=!0,i=0;i<a.length;i++)(!1&s||n>=s)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(r=!1,s<n&&(n=s));if(r){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[a,l,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,s,n=a[0],r=a[1],i=a[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(l in r)o.o(r,l)&&(o.m[l]=r[l]);if(i)var u=i(o)}for(t&&t(a);c<n.length;c++)s=n[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},a=self["webpackChunkPPH"]=self["webpackChunkPPH"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(1604)}));a=o.O(a)})();
//# sourceMappingURL=app.467a0a8f.js.map